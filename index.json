[{"content":"æ¯æ¬¡çœ‹åˆ° Github ä¸Šçš„ä»£ç è´¡çŒ®å›¾æ—¶ï¼Œæ€»æƒ³è‡ªå·±æä¸€ä¸ªã€‚ä½†æ˜¯ç›´æ¥æä¼¼ä¹å¾ˆéº»çƒ¦ï¼Œäºæ˜¯ä¸Šç½‘ä¸€æœï¼Œå˜¿ï¼Œæœ‰ä¸¤ä¸ªå¼€æºå›¾è¡¨åº“æ­£å¥½æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œæœæ–­å¼€æã€‚\nè¿™ä¸¤ä¸ªå›¾å›¾è¡¨åº“å¦‚ä¸‹ï¼š\nèš‚èšæ•°æ®å¯è§†åŒ– AntV https://antv-2018.alipay.com/zh-cn/index.html Apache ECharts https://echarts.apache.org/zh/index.html è¿™ä¸¤ä¸ªéƒ½æ˜¯éå¸¸å¥½çš„å›¾è¡¨åº“ï¼Œè€Œæˆ‘ä½¿ç”¨çš„ EChartsï¼ˆåªæ˜¯å› ä¸ºç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„æ˜¯ EChartsï¼‰ã€‚ä¸è¿‡æœ‰ä¸€äº›åŠŸèƒ½è¿˜æ˜¯æ²¡èƒ½å®ç°ï¼Œæœ‰æœºä¼šå°è¯•ç”¨ AntV å†å®ç°ä¸€ä¸‹ã€‚\næ”¹é€ åæœ€åçš„æ•ˆæœå›¾å¦‚ä¸‹\n è·å– ECharts å®˜æ–¹ç»™çš„å®‰è£…æ–¹å¼æœ‰ä¸‰ç§ï¼š Github è·å–ã€npm å®‰è£…å’Œ CDN è·å–ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨ npm å®‰è£…ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨ CDN è·å–ï¼š\n\u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; è€Œä¸‹è½½ç½‘å€æ˜¯åœ¨ https://www.jsdelivr.com/package/npm/echarts ã€‚\nnpm ä¸‹è½½å¦‚ä¸‹ï¼š\nnpm install echarts --save å¦å¤–ï¼Œå®˜ç½‘è¿˜æä¾›åœ¨çº¿æ„å»ºï¼Œå…·ä½“å¯ä»¥å‰å¾€ https://echarts.apache.org/zh/builder.html ã€‚\n é…ç½®æ–‡ç« æ•°æ® é¦–å…ˆé…ç½®ç”Ÿæˆçƒ­åŠ›å›¾çš„æ¨¡å—\n\u0026lt;div id=\u0026#34;heatmap\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; ç„¶åç¼–å†™ javascript è„šæœ¬ã€‚\nåˆå§‹åŒ–å›¾æ ‡å¹¶ç»‘å®šåˆ°çƒ­åŠ›å›¾æ¨¡å—ï¼Œå¹¶è®¾å®šå›¾è¡¨å“åº”å®¹å™¨çš„å¤§å°å˜åŒ–\nvar myChart = echarts.init(document.getElementById(\u0026#39;heatmap\u0026#39;)); window.onresize = function() { myChart.resize(); };  ç”Ÿæˆæ–‡ç« æ•°æ® ç”Ÿæˆçƒ­åŠ›å›¾çš„ option ç»“æ„åœ¨ https://echarts.apache.org/zh/option.html#calendar ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦è¦è§£å†³çš„æ˜¯ä¸¤ä¸ªé—®é¢˜ï¼š\n 1.å¦‚ä½•å°†æ—¥å†çš„æ—¥æœŸè®¾ç½®ä¸ºå»å¹´ä»Šæ—¥åˆ°ä»Šæ—¥æ—¥æœŸåŒºé—´\n2.å°†æ–‡ç« çš„æ—¥æœŸå’Œå­—æ•°ä¼ å…¥ ECharts\n æ—¥å†æ—¶é—´åœ¨ series çš„ data ä¸­è®¾ç½®ï¼Œæ”¯æŒ data([day,number]) çš„åˆ—è¡¨å½¢å¼ï¼Œæˆ‘ä»¬çš„ç›®çš„åˆ™æ˜¯å°†æ‰€æœ‰å‘å¸ƒçš„æ–‡ç« çš„æ•°å­—ä½œç»Ÿè®¡ï¼Œç„¶åä¼ å…¥åˆ—è¡¨ data ä¸­ã€‚\nå¥½æ¶ˆæ¯æ˜¯ Hugo æ”¯æŒåœ¨ html ä¸­å†™å…¥ä»£ç ï¼Œéšå Hugo ä¼šè‡ªåŠ¨å¯¹å…¶è¿›è¡Œç¼–ç ã€‚æ¥ç€ä¸Šé¢ä»£ç \nvar data = []; {{ range.Site.RegularPages }} data.push( [ {{ .PublishDate.Format \u0026#34;2006-01-02\u0026#34; }}, {{ .WordCount }}, ], ); {{- end -}} è¿™é‡Œæˆ‘ä»¬å°†æ‰€æœ‰å‘å¸ƒæ–‡ç« çš„æ•°æ®ä¿å­˜åœ¨äº† data ä¸­ï¼ˆæ³¨æ„ï¼šè¯¥æ®µä»£ç éœ€è¦å†™åœ¨ html ä¸­ï¼Œè‹¥å•ç‹¬ç¼–å†™ js æ–‡ä»¶ï¼Œæœ€åå¹¶ä¸ä¼šå¥æ•ˆï¼Œå› ä¸º Hugo å¹¶ä¸ä¼šå»ç¼–è¯‘ js æ–‡ä»¶ï¼‰ã€‚\n è®¾ç½®æ—¥æœŸæ—¶é—´ å®˜æ–¹ç»™å‡ºçš„æ—¥æœŸè®¾ç½®æ—¶é—´éå¸¸ç®€å•ï¼Œä»å½“å‰ä¸€å¹´çš„ä¸€æœˆä¸€æ—¥å¼€å§‹ï¼Œéšæœºç”Ÿæˆ 365 ä¸ªæ•°æ®ã€‚è€Œ javascript ä¸­æœ‰ä¸€æ®µä»£ç å¯ä»¥è·å–å½“å‰æ—¶é—´å’Œå½“å‰æ—¶é—´å‰æ¨ä»»æ„æ—¶é—´\nvar sdtime2=new Date().setHours(sdtime1.getHours() -1)//å°æ—¶ var sdtime3=new Date().setDate((new Date().getDate()-7))//7å¤© var sdtime4=new Date().setMonth((new Date().getMonth()-1))//ä¸€ä¸ªæœˆ var sdtime5=new Date().setFullYear((new Date().getFullYear()-1))//ä¸€å¹´ console.log(new Date(sdtime2).Format(\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;)); æˆ‘ä»¬å¯ä»¥ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œç”Ÿæˆå½“å‰æ—¶é—´æ¨è‡³å‰è‹¥å¹²ä¸ªæœˆçš„æ—¥å†åŒºé—´\nfunction heatmap_width(months){ // è®¡ç®—è½¬æ¢æ—¥æœŸ  var startDate = new Date(); var mill = startDate.setMonth((startDate.getMonth() - months)); var endDate = +new Date(); startDate = +new Date(mill); endDate = echarts.format.formatTime(\u0026#39;yyyy-MM-dd\u0026#39;, endDate); startDate = echarts.format.formatTime(\u0026#39;yyyy-MM-dd\u0026#39;, startDate); var showmonth = []; showmonth.push([ startDate, endDate ]); return showmonth }; è¯¥å‡½æ•°è¿”å›ä¸€ä¸ª [startDate,endDate] æ•°æ®ï¼Œè¡¨ç¤ºæ—¥å†çš„å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸã€‚\n å›¾è¡¨é…ç½® ä¸Šæ–‡å·²ç»æåˆ°è¿‡ï¼Œæ—¥å†çš„é…ç½®åœ¨ https://echarts.apache.org/zh/option.html#calendar æœ‰éå¸¸è¯¦ç»†çš„è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®˜ç½‘æ ·ä¾‹ç»™å‡ºçš„é…ç½®\noption = { title: { top: 30, left: \u0026#39;center\u0026#39;, text: \u0026#39;æ•°æ•°æ•²äº†å‡ ä¸ªå­—ï¼Ÿ\u0026#39; }, tooltip: {}, visualMap: { min: 0, max: 5000, type: \u0026#39;piecewise\u0026#39;, orient: \u0026#39;horizontal\u0026#39;, left: \u0026#39;center\u0026#39;, top: 65 }, calendar: { top: 120, left: 30, right: 30, cellSize: [\u0026#39;auto\u0026#39;, 12], range: heatmap_width(12),\t// è®¾ç½®è½¬æ¢çš„æ—¥å†æ—¥æœŸåŒºé—´  itemStyle: { borderWidth: 0.5 }, yearLabel: { show: false } }, series: { type: \u0026#39;heatmap\u0026#39;, coordinateSystem: \u0026#39;calendar\u0026#39;, data: data\t// åŠ è½½æ–‡ç« æ•°æ®  } }; myChart.setOption(option); å¤§åŠŸå‘Šæˆï¼æ—¥å†è´¡çŒ®å›¾å°±å®Œæˆäº†ï¼æ‰€æœ‰ä»£ç  https://shared.snipper.app/snippet/D67FD48F-2089-4A13-9A2B-37E6B48D3F06 æˆ–è€…ä¸‹é¢çš„æœªè®¾ç½® hugo è·å–æ–‡ç« æ•°æ®çš„ä»£ç ï¼Œè½¬è€Œä½¿ç”¨éšæœºæ•°æ®\n\u0026lt;div id=\u0026#34;ttt\u0026#34; style=\u0026#34; width: 600px; height: 300px; margin-top: 15px; margin-bottom: 10px; padding: 2px; border: 1px solid; border-radius: 10px; border-width: 0.5px; text-align: center;\u0026#34; \u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; var chartDom = document.getElementById(\u0026#39;ttt\u0026#39;); var myChart = echarts.init(chartDom); var option; // è®¡ç®—æ—¥æœŸå¹¶è½¬æ¢æ ¼å¼  var startDate = new Date(); var year_Mill = startDate.setFullYear((startDate.getFullYear() - 1)); var startDate = +new Date(year_Mill); var endDate = +new Date(); var dayTime = 3600 * 24 * 1000; var data = []; for (var time = startDate; time \u0026lt; endDate; time += dayTime) { data.push([ echarts.format.formatTime(\u0026#39;yyyy-MM-dd\u0026#39;,time), Math.floor(Math.random() * 10000) ]); } startDate = echarts.format.formatTime(\u0026#39;yyyy-MM-dd\u0026#39;, startDate); endDate = echarts.format.formatTime(\u0026#39;yyyy-MM-dd\u0026#39;, endDate); var rangeArr = [startDate,endDate]; option = { title: { top: 30, left: \u0026#39;center\u0026#39;, text: \u0026#39;Daily Step Count\u0026#39; }, tooltip: {}, visualMap: { min: 0, max: 10000, type: \u0026#39;piecewise\u0026#39;, orient: \u0026#39;horizontal\u0026#39;, left: \u0026#39;center\u0026#39;, top: 65 }, calendar: { top: 120, left: 30, right: 30, cellSize: [\u0026#39;auto\u0026#39;, 13], range: rangeArr, itemStyle: { borderWidth: 0.5 }, yearLabel: { show: false } }, series: { type: \u0026#39;heatmap\u0026#39;, coordinateSystem: \u0026#39;calendar\u0026#39;, data: data } }; option \u0026amp;\u0026amp; myChart.setOption(option); \u0026lt;/script\u0026gt;  ä½†æ˜¯ï¼Œä½†æ˜¯ï¼ç­‰ç­‰\u0026hellip;è¿™æ ·é…ç½®çš„çƒ­åŠ›å›¾ä¼¼ä¹å¹¶ä¸å®Œç¾ï¼Œåœ¨ä¸åŒå±å¹•å®½åº¦ä¸‹çš„å±•ç¤ºæ•ˆæœä¼šéå¸¸å·®ï¼Œæ‰€ä»¥è¦è®¾ç½®ä¸€ä¸‹é€‚é…å±å¹•å®½åº¦çš„çƒ­åŠ›å›¾ã€‚\n ä¼˜åŒ– æˆ‘ä»¬åˆ†åˆ«è®¾ç½®åœ¨ä¸åŒå±å¹•å®½åº¦ä¸‹è¦æ˜¾ç¤ºçš„æ—¥æœŸåŒºé—´ï¼Œå°†å¦‚ä¸‹ä»£ç æ”¾è‡³ heatmap_width å‡½æ•°ä¸‹é¢ï¼Œoption ä¸Šé¢(javascript å¹¶ä¸æ˜¯ç‰¹åˆ«æ‹¿æ‰‹ï¼Œåªèƒ½ä½¿ç”¨æœ€ç¬¨çš„æ–¹æ³•äº†ğŸ˜¥)\nif(window.matchMedia(\u0026#39;(max-width: 320px)\u0026#39;).matches){ var rangeArr = heatmap_width(3); }else if(window.matchMedia(\u0026#39;(max-width: 400px)\u0026#39;).matches){ var rangeArr = heatmap_width(5); }else if(window.matchMedia(\u0026#39;(max-width: 550px)\u0026#39;).matches){ var rangeArr = heatmap_width(6); }else if(window.matchMedia(\u0026#39;(max-width: 1021px)\u0026#39;).matches){ var rangeArr = heatmap_width(12); }else if(window.matchMedia(\u0026#39;(max-width: 1400px)\u0026#39;).matches){ var rangeArr = heatmap_width(9); }else if(window.matchMedia(\u0026#39;(max-width: 1920px)\u0026#39;).matches){ var rangeArr = heatmap_width(12); }else if(window.matchMedia(\u0026#39;(max-width: 2560px)\u0026#39;).matches){ var rangeArr = heatmap_width(24); }  æš—æ¨¡å¼ è¯¥å›¾è¡¨å…¶å®æœ¬èº«è‡ªå¸¦æš—æ¨¡å¼ï¼Œä½†æ˜¯ä¸ºäº†å’Œæœ¬ç½‘ç«™ç›¸åŒ¹é…ï¼Œæ‰€ä»¥å†³å®šè‡ªå·±åŠ¨æ‰‹å®ç°æš—æ¨¡å¼ã€‚\nä¸ºæ­¤æˆ‘åˆ†åˆ«å†™äº†ä¸¤ä¸ªå‡½æ•°\nfunction LightOption() function DarkOption() å°† option é…ç½®åˆ†åˆ«æ”¾å…¥ä¸¤ä¸ªå‡½æ•°ä¸­ï¼Œå†å•ç‹¬è¿›è¡Œé¢œè‰²é…ç½®\nç„¶åä½¿ç”¨ (window.matchMedia('(prefers-color-scheme: dark)').matches) è·å–å½“å‰ç³»ç»Ÿçš„æš—æ¨¡å¼æ–¹æ³•\nif(window.matchMedia(\u0026#39;(prefers-color-scheme: dark)\u0026#39;).matches){ // æš—æ¨¡å¼  DarkOption() } else{ // äº®æ¨¡å¼  LightOption() }  åŠ å…¥å±å¹•ç›‘å¬åŠŸèƒ½\nå½“æˆ‘ä»¬åˆ‡æ¢æ˜æš—æ¨¡å¼æ—¶ï¼Œä»¥ä¸Šä»£ç å¯¹äºç½‘ç«™å¹¶ä¸ä¼šç›´æ¥ç”Ÿæ•ˆï¼Œéœ€è¦åˆ·æ–°ä¸€éæ‰å¯ä»¥ç”Ÿæ•ˆã€‚æ‰€ä»¥åŠ å…¥ç›‘å¬åŠŸèƒ½ä½¿å¾—ç½‘ç«™ä¸€æ—¦åˆ‡æ¢æ˜æš—æ¨¡å¼åˆ™ç†ç§‘ç”Ÿæ•ˆ\nvar listeners={ // æ¨¡å¼ç›‘å¬  dark:(mediaQueryList )=\u0026gt;{ // æš—æ¨¡å¼  if(mediaQueryList.matches){ DarkOption() } }, light:(mediaQueryList)=\u0026gt;{ // äº®æ¨¡å¼  if(mediaQueryList.matches){ LightOption() } }, } window.matchMedia(\u0026#39;(prefers-color-scheme: dark)\u0026#39;).addListener(listeners.dark) window.matchMedia(\u0026#39;(prefers-color-scheme: light)\u0026#39;).addListener(listeners.light)  è‡³æ­¤ï¼Œæ€»ç®—å®Œæˆäº†ã€‚\n æ€»ç»“ ECharts åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯å´å¹¶ä¸èƒ½ç”Ÿæˆå¦‚åŒ Github ä»£ç è´¡çŒ®å›¾çš„æ ·å­ï¼Œå¯¹äºæ¯ä¸€å¤©çš„å°æ–¹å—ä¸èƒ½è®¾ç½®æ›´å¥½çš„æ ·å¼ã€‚ä¸çŸ¥é“ AntV è¡Œä¸è¡Œã€‚æ€»ä¹‹ï¼Œä»¥åæœ‰æ—¶é—´å†ç ”ç©¶ç ”ç©¶ã€‚\n","permalink":"https://yibocat.github.io/posts/jzrj/jzrj_4/","summary":"æ¯æ¬¡çœ‹åˆ° Github ä¸Šçš„ä»£ç è´¡çŒ®å›¾æ—¶ï¼Œæ€»æƒ³è‡ªå·±æä¸€ä¸ªã€‚ä½†æ˜¯ç›´æ¥æä¼¼ä¹å¾ˆéº»çƒ¦ï¼Œäºæ˜¯ä¸Šç½‘ä¸€æœï¼Œå˜¿ï¼Œæœ‰ä¸¤ä¸ªå¼€æºå›¾è¡¨åº“æ­£å¥½æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œæœæ–­å¼€æã€‚ è¿™ä¸¤ä¸ªå›¾å›¾è¡¨","title":"[å»ºç«™æ—¥è®°] Hugo æ·»åŠ æ–‡ç« æ—¥æœŸçƒ­åŠ›å›¾"},{"content":"åœ¨ç½‘ç«™ä¸Šæœ‰ä¸€ä¸ªåŠ¨æ€æ‰“å­—ç‰¹æ•ˆå½“ç„¶æ˜¯ä¸€ä»¶å¾ˆé…·çš„äº‹å•Šã€‚æ— æ„ä¹‹é—´æ‰¾åˆ°äº†ä¸€ä¸ªåŠ¨æ€æ‰“å­—ç‰¹æ•ˆæ’ä»¶ Typed-js ã€‚è¯¥æ’ä»¶è¿˜å®ç°äº†å„ç§è‡ªå®šä¹‰æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚å¯ä»¥è¯´æ˜¯éå¸¸éå¸¸å¥½ç”¨äº†ï¼Œè€Œä¸”å®‰è£…ä½¿ç”¨ä¹Ÿæ˜¯éå¸¸çš„ç®€å•ã€‚\nè¯¥æ’ä»¶çš„ä½œè€…æ˜¯ Matt Boldtï¼Œè¿™æ˜¯ä»–çš„ä¸»é¡µï¼šhttps://mattboldt.com/ ã€‚\nTyped-js çš„ Githubï¼šhttps://github.com/mattboldt/typed.js/ ã€‚\nè¯¥æ’ä»¶çš„è‡ªå®šä¹‰ Demo å¦‚ä¸‹ï¼šhttp://mattboldt.github.io/typed.js/ ã€‚\nä¸‹é¢æˆ‘ä»¬å¤§æ¦‚è®²ä¸€ä¸‹è¯¥æ’ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€‚\n å®‰è£…æ–¹æ³• å®˜æ–¹æä¾›äº†ä¸‰ç§å®‰è£…æ–¹æ³•ï¼š\nnpm install typed.js yarn add typed.js bower install typed.js æˆ–è€…ä½¿ç”¨ script CDN å¯¼å…¥\n\u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/typed.js@2.0.12\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;  ä½¿ç”¨ ä»å®˜æ–¹ç»™å‡ºçš„ä¾‹å­æ¥çœ‹\nThis is really all you need to get going.\n// Can also be included with a regular script tag import Typed from \u0026#39;typed.js\u0026#39;; var options = { strings: [\u0026#39;\u0026lt;i\u0026gt;First\u0026lt;/i\u0026gt; sentence.\u0026#39;, \u0026#39;\u0026amp;amp; a second sentence.\u0026#39;], typeSpeed: 40 }; var typed = new Typed(\u0026#39;.element\u0026#39;, options); ä¸Šé¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•ã€‚æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªæ›´å…·ä½“çš„ä¾‹å­\n var typed = new Typed('#typed', { stringsElement: '#typed-strings' });  \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/typed.js@2.0.12\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; var typed = new Typed(\u0026#39;#typed\u0026#39;, { stringsElement: \u0026#39;#typed-strings\u0026#39; }); \u0026lt;/script\u0026gt; \u0026lt;div id=\u0026#34;typed-strings\u0026#34;\u0026gt; \u0026lt;p\u0026gt;Typed.js is a \u0026lt;strong\u0026gt;JavaScript\u0026lt;/strong\u0026gt; library.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;It \u0026lt;em\u0026gt;types\u0026lt;/em\u0026gt; out sentences.\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;span id=\u0026#34;typed\u0026#34;\u0026gt;\u0026lt;/span\u0026gt; stringElement ä¸ºå®šä¹‰çš„å¤–éƒ¨åŠ¨æ€æ‰“å­—æ–‡å­—ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ strings:[] æ¥æ›¿ä»£ã€‚ typed-strings è¡¨ç¤ºè¦æ’å…¥åŠ¨æ€æ‰“å­—ç‰¹æ•ˆçš„æ¨¡å—ã€‚ä¸€èˆ¬çš„è‡ªå®šä¹‰åˆ™åœ¨ new Typed() ä¸­è®¾ç½®ã€‚\n æ ·å¼è®¾ç½® css åŠ¨ç”»æ˜¯åŸºäº javascript åˆå§‹åŒ–æ„å»ºçš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ css ä¸­è®¾ç½®å„ç§æ ·å¼\n/* å…‰æ ‡ */ .typed-cursor { } /* å¦‚æœè®¾ç½®äº†æ·¡å‡ºé€‰é¡¹ */ .typed-fade-out { }  è‡ªå®šä¹‰ var typed = new Typed(\u0026#39;.element\u0026#39;, { /** * @property {array} strings è¦è¾“å…¥çš„å­—ç¬¦ * @property {string} stringsElement åŒ…å«å­—ç¬¦ä¸² children çš„å…ƒç´ çš„ ID */ strings: [ \u0026#39;These are the default values...\u0026#39;, \u0026#39;You know what you should do?\u0026#39;, \u0026#39;Use your own!\u0026#39;, \u0026#39;Have a great day!\u0026#39; ], stringsElement: null, /** * @property {number} typeSpeed ç±»å‹é€Ÿåº¦ï¼Œå•ä½ï¼šæ¯«ç§’ */ typeSpeed: 0, /** * @property {number} startDelay è¾“å…¥å¼€å§‹å‰çš„æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’ */ startDelay: 0, /** * @property {number} backSpeed é€€æ ¼é€Ÿåº¦ï¼Œå•ä½ï¼šæ¯«ç§’ */ backSpeed: 0, /** * @property {boolean} smartBackspace åªé€€æ ¼ä¸å‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¸åŒ¹é…çš„å†…å®¹ */ smartBackspace: true, /** * @property {boolean} shuffle éšæœºæ’­æ”¾å­—ç¬¦ä¸² */ shuffle: false, /** * @property {number} backDelay é€€æ ¼å‰çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’ */ backDelay: 700, /** * @property {boolean} fadeOut ç”¨æ·¡å‡ºæ›¿ä»£é€€æ ¼ * @property {string} fadeOutClass æ·¡å‡ºåŠ¨ç”» * @property {boolean} fadeOutDelay æ·¡å‡ºå»¶è¿Ÿï¼Œå•ä½ï¼šæ¯«ç§’ */ fadeOut: false, fadeOutClass: \u0026#39;typed-fade-out\u0026#39;, fadeOutDelay: 500, /** * @property {boolean} loop è¿›è¡Œå¾ªç¯æ’­æ”¾ * @property {number} loopCount å¾ªç¯æ’­æ”¾æ¬¡æ•° */ loop: false, loopCount: Infinity, /** * @property {boolean} showCursor æ˜¾ç¤ºå…‰æ ‡ * @property {string} cursorChar å…‰æ ‡å­—ç¬¦ä¸²ï¼Œä¸€èˆ¬ä¸º\u0026#39;|\u0026#39;ï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢è®¾ç½®ä¸ºèƒŒæ™¯å®šå®½ * @property {boolean} autoInsertCss æ’å…¥ CSS å…‰æ ‡å¹¶æ·¡å‡ºåˆ° HTML \u0026lt;head\u0026gt; */ showCursor: true, cursorChar: \u0026#39;|\u0026#39;, autoInsertCss: true, /** * @property {string} attr è¾“å‡ºçš„å­—ç¬¦ä¸²å±æ€§ * Ex: input placeholder, value, or just HTML text */ attr: null, /** * @property {boolean} bindInputFocusEvents å¦‚æœ el æ˜¯æ–‡æœ¬è¾“å…¥çš„è¯åˆ™ç»‘å®šåˆ°ç„¦ç‚¹å’Œæ¨¡ç³Š */ bindInputFocusEvents: false, /** * @property {string} contentType å†…å®¹ç±»å‹ä¸º html æˆ–è€… null */ contentType: \u0026#39;html\u0026#39;, /** * å¼€å§‹è¾“å…¥ä¹‹å‰æ‰§è¡Œ * @param {Typed} self */ onBegin: (self) =\u0026gt; {}, /** * æ‰€æœ‰è¾“å…¥å®Œæˆæ‰§è¡Œ * @param {Typed} self */ onComplete: (self) =\u0026gt; {}, /** * æ¯ä¸ªå­—ç¬¦ä¸²è¾“å…¥ä¹‹å‰æ‰§è¡Œ * @param {number} arrayPos * @param {Typed} self */ preStringTyped: (arrayPos, self) =\u0026gt; {}, /** * æ¯ä¸ªå­—ç¬¦ä¸²è¾“å…¥ä¹‹åæ‰§è¡Œ * @param {number} arrayPos * @param {Typed} self */ onStringTyped: (arrayPos, self) =\u0026gt; {}, /** * å¾ªç¯è¿‡ç¨‹ä¸­è¾“å…¥æœ€åä¸€ä¸ªå­—ç¬¦ä¸²åæ‰§è¡Œ * @param {Typed} self */ onLastStringBackspaced: (self) =\u0026gt; {}, /** * è¾“å…¥åœæ­¢æ‰§è¡Œ * @param {number} arrayPos * @param {Typed} self */ onTypingPaused: (arrayPos, self) =\u0026gt; {}, /** * Typing has been started after being stopped * @param {number} arrayPos * @param {Typed} self */ onTypingResumed: (arrayPos, self) =\u0026gt; {}, /** * é‡ç½®ä¹‹åæ‰§è¡Œ * @param {Typed} self */ onReset: (self) =\u0026gt; {}, /** * åœæ­¢ä¹‹åæ‰§è¡Œ * @param {number} arrayPos * @param {Typed} self */ onStop: (arrayPos, self) =\u0026gt; {}, /** * å¼€å§‹ä¹‹åæ‰§è¡Œ * @param {number} arrayPos * @param {Typed} self */ onStart: (arrayPos, self) =\u0026gt; {}, /** * é”€æ¯ä¹‹å * @param {Typed} self */ onDestroy: (self) =\u0026gt; {} });  ä¸¾ä¾‹ http://mattboldt.github.io/typed.js/  ","permalink":"https://yibocat.github.io/posts/jzrj/jzrj_3/","summary":"åœ¨ç½‘ç«™ä¸Šæœ‰ä¸€ä¸ªåŠ¨æ€æ‰“å­—ç‰¹æ•ˆå½“ç„¶æ˜¯ä¸€ä»¶å¾ˆé…·çš„äº‹å•Šã€‚æ— æ„ä¹‹é—´æ‰¾åˆ°äº†ä¸€ä¸ªåŠ¨æ€æ‰“å­—ç‰¹æ•ˆæ’ä»¶ Typed-js ã€‚è¯¥æ’ä»¶è¿˜å®ç°äº†å„ç§è‡ªå®šä¹‰æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚å¯ä»¥è¯´æ˜¯éå¸¸é","title":"[å»ºç«™æ—¥è®°] åŠ¨æ€æ‰“å­—ç‰¹æ•ˆ"},{"content":"ä»€ä¹ˆæ˜¯æ­£å‘ä¼ æ’­ï¼Ÿæ­£å‘ä¼ æ’­æ˜¯æŒ‰ç…§ç¥ç»ç½‘ç»œçš„è¾“å…¥åˆ°è¾“å‡ºçš„é¡ºåºï¼Œä¾æ¬¡è®¡ç®—ä»æ¨¡å‹ä¸­é—´å˜é‡çš„è¿‡ç¨‹ã€‚è€Œåå‘ä¼ æ’­åˆ™æ˜¯è®¡ç®—ç¥ç»ç½‘ç»œçš„å‚æ•°æ¢¯åº¦çš„è¿‡ç¨‹ã€‚åœ¨è®­ç»ƒç¥ç»ç½‘ç»œæ—¶ï¼Œæ­£å‘ä¼ æ’­ä¸åå‘ä¼ æ’­æ˜¯ç›¸äº’ä¾èµ–çš„ã€‚æ­£å‘ä¼ æ’­ä¾æ¬¡è®¡ç®—æ¨¡å‹ä¸­é—´å˜é‡ï¼Œåå‘ä¼ æ’­å†æ ¹æ®å˜é‡å¯¹å‚æ•°è¿›è¡Œæ¢¯åº¦æ±‚å¯¼ã€‚æ‰€ä»¥å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œåœ¨å‚æ•°è¿›è¡Œåˆå§‹åŒ–ä¹‹åå¯¹æ¨¡å‹è¿›è¡Œäº¤æ›¿çš„æ­£å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ï¼Œå¹¶æ ¹æ®åå‘ä¼ æ’­è®¡ç®—çš„æ¢¯åº¦è¿­ä»£æ¨¡å‹å‚æ•°ã€‚\n æ­£å‘ä¼ æ’­ å‰å‡ ç¯‡æ–‡ç« è®²çš„åŸºæœ¬ä¸Šéƒ½æ˜¯æ­£å‘ä¼ æ’­ï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•åœ°å†æ¨å¯¼ä¸€ä¸‹ã€‚\nå‡è®¾è¾“å…¥ä¸º $x\\in \\mathbb{R}^d$ ï¼Œä¸è€ƒè™‘åå·®ï¼Œä¸­é—´å˜é‡ä¸º $z\\in\\mathbb{R}^h$ï¼Œ$\\pmb{W}^{(1)}\\in\\mathbb{R}^{h\\times d}$ ä¸ºéšè—å±‚çš„æƒé‡å‚æ•°ã€‚è®¾ $\\phi()$ ä¸ºæ¿€æ´»å‡½æ•°ï¼Œåˆ™æœ‰ $$ z=\\pmb{W}^{(1)}x,\\newline \\pmb{h} = \\phi(z) $$ è¿™é‡Œ $\\pmb{h}$ è¡¨ç¤ºå¾—åˆ°çš„éšè—å±‚å˜é‡ï¼Œä¹Ÿå°±æ˜¯ä¸­é—´å˜é‡ã€‚\nå‡è®¾è¾“å‡ºå±‚å‚æ•°ä¸º $\\pmb{W}^{(2)}\\in\\mathbb{R}^{q\\times h}$ ï¼Œåˆ™å¾—åˆ°çš„å‘é‡é•¿åº¦ä¸º $q$ çš„è¾“å‡ºå±‚å˜é‡ä¸º $$ \\pmb{o}=\\pmb{W}^{(2)}\\pmb{h} $$ æˆ‘ä»¬å‡è®¾æŸå¤±å‡½æ•°ä¸º $\\ell$ ï¼Œæ ·æœ¬æ ‡ç­¾ä¸º $y$ ï¼Œåˆ™æ ·æœ¬æŸå¤±é¡¹ä¸º $$ L=\\ell(\\pmb{o},y) $$ å¼•å…¥æ­£åˆ™åŒ–é¡¹ $s$ $$ s=\\frac{\\lambda}{2}(\\vert\\vert\\pmb{W}^{(1)}\\vert\\vert^2_F+\\vert\\vert\\pmb{W}^{(2)}\\vert\\vert^2_F) $$ å¾—åˆ°æ¨¡å‹åœ¨ç»™å®šæ ·æœ¬ä¸Šçš„æŸå¤±ä¸º $J = L+s$ ï¼Œæˆ‘ä»¬ç§° $J$ ä¸ºç»™å®šæ ·æœ¬çš„ç›®æ ‡å‡½æ•°ã€‚\n åå‘ä¼ æ’­ æˆ‘ä»¬è¯´åå‘ä¼ æ’­æ˜¯è®¡ç®—ç¥ç»ç½‘ç»œå‚æ•°æ¢¯åº¦çš„æ–¹æ³•ï¼Œå…¶åŸºæœ¬åŸç†æ˜¯å¾®ç§¯åˆ†ä¸­çš„é“¾å¼æ³•åˆ™ã€‚\n é“¾å¼æ³•åˆ™\nå‡è®¾ $y=g(x)ï¼Œz=f(y)$ï¼Œåˆ™ $z=h(x)=f(g(x))$ ã€‚å¯¹è¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«æ±‚å¯¼æœ‰ $$ \\frac{dy}{dx}=g'(x) \\newline \\frac{dz}{dy}=f'(y) $$ æ ¹æ®é“¾å¼æ³•åˆ™ï¼Œæœ‰ $$ h'(x)=\\frac{dz}{dx}=\\frac{dz}{dy}\\cdot\\frac{dy}{dx} $$ å³å¤åˆå‡½æ•°æ±‚å¯¼ä½¿ç”¨ä¹˜æ³•æ³•åˆ™ï¼Œæˆ–ç§°ä¸ºé“¾å¼æ³•åˆ™ã€‚åœ¨åå‘ä¼ æ’­ä¸­æˆ‘ä»¬å¯ä»¥å®Œç¾åœ°ä½¿ç”¨è¿™ä¸ªæ³•åˆ™ã€‚\n åå‘ä¼ æ’­\næˆ‘ä»¬å°†é“¾å¼æ³•åˆ™åº”ç”¨åˆ°åå‘ä¼ æ’­ä¸­ã€‚åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬çš„æ¨¡å‹å‚æ•°ä¸º $\\pmb{W}^{(1)}$ å’Œ $\\pmb{W}^{(2)}$ ï¼Œå› æ­¤åå‘ä¼ æ’­æ‰€è¦ä½œçš„è®¡ç®—æ˜¯ $\\frac{\\partial J}{\\partial\\pmb{W}^{(1)}}$ å’Œ $\\frac{\\partial J}{\\partial\\pmb{W}^{(2)}}$ï¼Œåå‘ä¼ æ’­çš„è®¡ç®—æ¬¡åºä¸æ­£å‘ä¼ æ’­è®¡ç®—æ¬¡åºæ°æ°ç›¸åã€‚æˆ‘ä»¬æ±‚ç›®æ ‡å‡½æ•°å…³äº $L$ å’Œ $s$ çš„æ¢¯åº¦ï¼Œæœ‰ $$ \\frac{\\partial J}{\\partial L}=1,\\quad \\frac{\\partial J}{\\partial s}=1 $$ ç„¶åæ ¹æ®é“¾å¼æ³•åˆ™è®¡ç®—ç›®æ ‡å‡½æ•°å¯¹äºè¾“å‡ºå±‚å˜é‡çš„æ¢¯åº¦ $$ \\frac{\\partial J}{\\partial o}=\\frac{\\partial J}{\\partial L}\\cdot\\frac{\\partial L}{\\partial o}=\\frac{\\partial L}{\\partial o} $$ æ¥ç€è®¡ç®—æ­£åˆ™åŒ–é¡¹å¯¹äºä¸¤ä¸ªå‚æ•°çš„æ¢¯åº¦ $$ \\frac{\\partial s}{\\partial\\pmb{W}^{(1)}}=\\lambda\\pmb{W}^{(1)},\\quad \\frac{\\partial s}{\\partial\\pmb{W}^{(2)}}=\\lambda\\pmb{W}^{(2)} $$ ç„¶åå…ˆè®¡ç®—é è¿‘è¾“å‡ºå±‚å‚æ•°çš„æ¢¯åº¦ $\\frac{\\partial J}{\\partial\\pmb{W}^{(2)}}\\in\\mathbb{R}^{q\\times h}$ $$ \\begin{aligned} \\frac{\\partial J}{\\partial\\pmb{W}^{(2)}} \u0026amp; = \\frac{\\partial J}{\\partial o}\\centerdot\\frac{\\partial o}{\\partial\\pmb{W}^{(2)}}+\\frac{\\partial J}{\\partial s}\\centerdot\\frac{\\partial s}{\\partial \\pmb{W}^{(2)}} \\newline \u0026amp; = \\frac{\\partial J}{\\partial o}\\pmb{h}^{\\top}+\\lambda\\pmb{W}^{(2)} \\end{aligned} $$ ç„¶åç»§ç»­æ²¿ç€è¾“å‡ºå±‚å‘éšè—å±‚åå‘ä¼ æ’­ï¼Œéšè—å±‚å˜é‡çš„æ¢¯åº¦ä¸º $$ \\frac{\\partial J}{\\partial \\pmb{h}} = \\frac{\\partial J}{\\partial o}\\centerdot\\frac{\\partial o}{\\partial\\pmb{h}}={\\pmb{W}^{(2)}}^{\\top}\\frac{\\partial J}{\\partial o} $$ ç”±äºæ¿€æ´»å‡½æ•° $\\phi$ æŒ‰å…ƒç´ è¿ç®—ï¼Œä¸­é—´å˜é‡ $z$ çš„æ¢¯åº¦ $\\frac{\\partial J}{\\partial z}$ çš„è®¡ç®—éœ€è¦ä½¿ç”¨æŒ‰å…ƒç´ ä¹˜æ³• ï¼Œç¬¦å·ä½ $\\odot$ $$ \\frac{\\partial J}{\\partial z}=\\frac{\\partial J}{\\partial \\pmb{h}}\\cdot\\frac{\\partial \\pmb{h}}{\\partial z}=\\frac{\\partial J}{\\partial\\pmb{h}}\\odot\\phi'(z) $$ æœ€åæˆ‘ä»¬å¾—åˆ°é è¿‘è¾“å…¥å±‚çš„æ¨¡å‹å‚æ•°çš„æ¢¯åº¦ $\\frac{\\partial J}{\\partial\\pmb{W}^{(1)}}$ $$ \\begin{aligned} \\frac{\\partial J}{\\partial \\pmb{W}^{(1)}} \u0026amp;= \\frac{\\partial J}{\\partial z}\\cdot\\frac{\\partial z}{\\partial\\pmb{W}^{(1)}}+\\frac{\\partial J}{\\partial s}\\cdot\\frac{\\partial s}{\\partial \\pmb{W}^{(1)}} \\newline \u0026amp; = \\frac{\\partial J}{\\partial z}x^{\\top}+\\lambda\\pmb{W}^{(1)} \\end{aligned} $$ \næ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒ çœ‹äº†è¿™ä¹ˆäº›å…¬å¼å¯èƒ½éƒ½å¿˜è®°æˆ‘ä»¬æœ€åˆæ˜¯è¦å¹²ä»€ä¹ˆçš„ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç®—è¿™ä¹ˆäº›å…¬å¼ï¼Ÿæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ã€‚\næˆ‘ä»¬è®­ç»ƒæ¨¡å‹çš„ç›®çš„æ˜¯ä¸ºäº†å¾—åˆ°æœ€ä¼˜çš„å‚æ•°ä»¥æ»¡è¶³æˆ‘ä»¬çš„æ¨¡å‹ï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„æ¨¡å‹æœ€ä¼˜å‘¢ï¼Ÿå¯ä»¥è®¤ä¸ºæ˜¯æŸå¤±å‡½æ•°æœ€å°çš„æ¨¡å‹å°±æ˜¯æœ€ä¼˜çš„ã€‚é‚£ä¹ˆå¦‚ä½•é™ä½æŸå¤±å‡½æ•°å‘¢ï¼Œæˆ‘ä»¬çŸ¥é“æ¨¡å‹åœ¨ç»™å®šæ ·æœ¬ä¸Šçš„æŸå¤±å‡½æ•°ä¸º $J$ ï¼Œæˆ‘ä»¬è¦è®©æŸå¤±å‡½æ•°æœ€å°åŒ–ï¼Œæ‰€ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•è¿­ä»£æœ€æ¥è¿‘çš„å‚æ•°ï¼Œä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•è¿›è¡Œè¿­ä»£å°±è¦é€šè¿‡åå‘ä¼ æ’­ç®—æ³•è®¡ç®—å‚æ•°æ¢¯åº¦ã€‚æˆ‘ä»¬å›å¿†ä¸€ä¸‹å¸¦æœ‰ $L2$ å‚æ•°æ­£åˆ™åŒ–é¡¹çš„å‚æ•°è¿­ä»£å…¬å¼ $$ \\omega\\gets(1-\\frac{\\eta\\lambda}{\\vert \\mathcal{B}\\vert})\\omega-\\frac{\\eta}{\\vert \\mathcal{B}\\vert}\\sum_{i\\in\\mathcal{B}}\\frac{\\partial \\ell^{(i)}(\\omega,b)}{\\partial \\omega} $$ è¿™ä¹ˆä¸€çœ‹ï¼Œåé¢çš„ä¸€é¡¹æ­£æ˜¯æˆ‘ä»¬æ‰€æ¨å¯¼çš„å‚æ•°è¿­ä»£å…¬å¼ã€‚è¿™å°±æ˜¯åå‘ä¼ æ’­ï¼\n ä¸€æ–¹é¢ï¼Œæ­£å‘ä¼ æ’­çš„è®¡ç®—å¯èƒ½ä¾èµ–äºæ¨¡å‹å‚æ•°çš„å½“å‰å€¼ï¼Œè€Œè¿™äº›æ¨¡å‹å‚æ•°æ˜¯åœ¨åå‘ä¼ æ’­çš„æ¢¯åº¦è®¡ç®—åé€šè¿‡ä¼˜åŒ–ç®—æ³•è¿­ä»£çš„ã€‚å¦ä¸€æ–¹é¢ï¼Œåå‘ä¼ æ’­çš„æ¢¯åº¦è®¡ç®—å¯èƒ½ä¾èµ–äºå„å˜é‡çš„å½“å‰å€¼ï¼Œè€Œè¿™äº›å˜é‡çš„å½“å‰å€¼æ˜¯é€šè¿‡æ­£å‘ä¼ æ’­è®¡ç®—å¾—åˆ°çš„ã€‚\næ‰€ä»¥ï¼Œæ¨¡å‹å‚æ•°åˆå§‹åŒ–ä¹‹åï¼Œæˆ‘ä»¬äº¤æ›¿åœ°è¿›è¡Œæ­£å‘ä¼ æ’­å’Œåå‘ä¼ æ’­ï¼Œå¹¶æ ¹æ®åå‘ä¼ æ’­è®¡ç®—çš„æ¢¯åº¦è¿­ä»£æ¨¡å‹å‚æ•°ã€‚è€Œæ­£æ˜¯ç”±äºç¥ç»ç½‘ç»œçš„ç‰¹æ®Šæ€§ï¼Œæ­£å‘ä¼ æ’­ç»“æŸåä¸èƒ½ç«‹å³é‡Šæ”¾å˜é‡å†…å­˜ï¼Œä»è€Œå¯¼è‡´ç¥ç»ç½‘ç»œçš„è®­ç»ƒå¾€å¾€å ç”¨å¾ˆå¤§çš„å†…å­˜çš„åŸå› ã€‚\n å‚è€ƒ Back Propagationï¼ˆæ¢¯åº¦åå‘ä¼ æ’­ï¼‰å®ä¾‹è®²è§£ - HexUpçš„æ–‡ç«  ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹PyTorch ç‰ˆï¼Œé˜¿æ–¯é¡¿Â·å¼ ã€ææ² ","permalink":"https://yibocat.github.io/posts/dl/sdxx_5/","summary":"ä»€ä¹ˆæ˜¯æ­£å‘ä¼ æ’­ï¼Ÿæ­£å‘ä¼ æ’­æ˜¯æŒ‰ç…§ç¥ç»ç½‘ç»œçš„è¾“å…¥åˆ°è¾“å‡ºçš„é¡ºåºï¼Œä¾æ¬¡è®¡ç®—ä»æ¨¡å‹ä¸­é—´å˜é‡çš„è¿‡ç¨‹ã€‚è€Œåå‘ä¼ æ’­åˆ™æ˜¯è®¡ç®—ç¥ç»ç½‘ç»œçš„å‚æ•°æ¢¯åº¦çš„è¿‡ç¨‹ã€‚åœ¨è®­ç»ƒç¥","title":"[æ·±åº¦å­¦ä¹ ç¬”è®°] æ·±åº¦å­¦ä¹ ç¬¬ 5 ç¯‡â€”â€”æ­£å‘ä¼ æ’­ä¸åå‘ä¼ æ’­"},{"content":"æƒé‡è¡°å‡ä¸ä¸¢å¼ƒæ³•æ˜¯å¸¸ç”¨çš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œæœ¬ç¯‡æ–‡ç« æˆ‘ä»¬å°è¯•æ‰‹åŠ¨å®ç°æƒé‡è¡°å‡ä¸ä¸¢å¼ƒæ³•ï¼Œå¹¶ä¸”å¯¹å…¶è¿›è¡Œè¯„ä¼°ã€‚\n æƒé‡è¡°å‡ æˆ‘ä»¬çŸ¥é“é«˜å¤æ‚åº¦æ¨¡å‹ä¸æ ·æœ¬æ•°æ®ä¸åŒ¹é…æ—¶ä¼šå‘ç”Ÿè¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆç°è±¡ï¼Œè€Œåº”å¯¹è¿‡æ‹Ÿåˆçš„æ–¹æ³•ï¼Œä¸€æ–¹é¢æ˜¯å¢å¤§è®­ç»ƒæ ·æœ¬æ•°æ®é‡ï¼Œå¦å¤–ä¸€ç§æ–¹æ³•æ˜¯é™åˆ¶æ¨¡å‹å¤æ‚åº¦ã€‚ä¸€èˆ¬æ¥è¯´å¢å¤§æ ·æœ¬æ•°æ®é‡æ¥åŒ¹é…ç¥ç»ç½‘ç»œæ¨¡å‹å¤æ‚åº¦çš„æ–¹æ³•å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œè€Œä½¿ç”¨æ­£åˆ™åŒ–æ‰‹æ®µå¯¹æ¨¡å‹æ·»åŠ æ­£åˆ™åŒ–é¡¹å¯ä»¥æœ‰æ•ˆåœ°é™åˆ¶æ¨¡å‹å¤æ‚åº¦ä»è€Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚æƒé‡è¡°å‡ï¼ˆWeight Decayï¼‰ å°±æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œå³åœ¨æ¯æ¬¡å‚æ•°æ›´æ–°æ—¶ï¼Œå¼•å…¥ä¸€ä¸ªè¡°å‡ç³»æ•°ã€‚\nåœ¨æ ‡å‡†çš„éšæœºæ¢¯åº¦ä¸‹é™ä¸­ï¼Œæƒé‡è¡°å‡æ­£åˆ™åŒ–ä¸ $L2$ èŒƒæ•°æ­£åˆ™åŒ–ç­‰ä»·ï¼Œä½†æ˜¯åœ¨ä¸€äº›è¾ƒå¤æ‚çš„ä¼˜åŒ–æ–¹æ³•ä¸­ï¼ˆAdamï¼‰å¹¶ä¸ç­‰ä»·ã€‚è¿™é‡Œå›é¡¾ä¸€ä¸‹ $L2$ èŒƒæ•°æ­£åˆ™åŒ–ã€‚\n $L2$ èŒƒæ•°æ­£åˆ™åŒ–\n$L2$ èŒƒæ•°æ­£åˆ™åŒ–åœ¨æ¨¡å‹åŸæŸå¤±å‡½æ•°çš„åŸºç¡€ä¸Šå¢åŠ äº† $L2$ èŒƒæ•°æ­£åˆ™åŒ–é¡¹ï¼Œä»¥æ­¤æ¥é™åˆ¶å‚æ•°ä»è€Œä½¿å¾—æ¨¡å‹å¤æ‚åº¦å°½å¯èƒ½ç®€å•ã€‚$L2$ èŒƒæ•°æ­£åˆ™åŒ–é¡¹æŒ‡çš„æ˜¯æ¨¡å‹æƒé‡å‚æ•°æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹å’Œä¸ä¸€ä¸ªæ­£çš„å¸¸æ•°çš„ä¹˜ç§¯ã€‚\næˆ‘ä»¬çœ‹çº¿æ€§å›å½’æŸå¤±å‡½æ•°ä¸º $$ \\ell(\\pmb{\\omega},b)=\\frac{1}{N}\\sum_{i=1}^N\\frac{1}{2}(\\pmb{x}^{(i)}\\pmb{\\omega}+b-\\pmb{y}^{(i)})^2 $$ å…¶ä¸­ $\\pmb{\\omega}$ ä¸ºæƒé‡å‚æ•°å‘é‡ï¼Œ$b$ ä¸ºåå·®å‚æ•°ï¼Œæ ·æœ¬ $i $ çš„è¾“å…¥ä¸º $\\pmb{x}^{(i)}$ ï¼Œè¯¥æ ·æœ¬æ ‡ç­¾ä¸º $\\pmb{y}^{(i)}$ ï¼Œæ ·æœ¬æ•°ç›®ä¸º $N$ ã€‚åˆ™å¸¦æœ‰ $L2$ èŒƒæ•°æ­£åˆ™åŒ–é¡¹çš„æŸå¤±å‡½æ•°ä¸º $$ \\ell(\\pmb{\\omega},b)+\\frac{\\lambda}{2N}\\vert\\vert\\pmb{\\omega}\\vert\\vert^2 $$ è¿™é‡Œ $\\lambda\u0026gt;0$ ä¸ºè¶…å‚æ•°ã€‚å½“ $\\lambda$ æ¥è¿‘ 0 æ—¶ï¼Œæ­£åˆ™åŒ–é¡¹å¯¹æŸå¤±å‡½æ•°çš„å½±å“å°†é€æ¸é™ä½ã€‚\n$L2$ èŒƒæ•°å¹³æ–¹ $\\vert\\vert\\pmb{\\omega}\\vert\\vert^2$ å±•å¼€åå¾—åˆ° $\\sum_{i=1}^N\\omega_i^2$ ã€‚æˆ‘ä»¬åœ¨å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ä¸­å°†çº¿æ€§å›å½’ä¸­çš„æƒé‡ $\\pmb{\\omega}$ çš„è¿­ä»£æ–¹å¼ $$ \\omega \\gets \\omega-\\frac{\\eta}{|\\mathcal{B}|}\\sum_{i\\in\\mathcal{B}}\\frac{\\partial \\ell^{(i)}(\\omega,b)}{\\partial \\omega} $$ æ›´æ”¹ä¸ºå¦‚ä¸‹æ–¹å¼ $$ \\omega\\gets(1-\\frac{\\eta\\lambda}{\\vert \\mathcal{B}\\vert})\\omega-\\frac{\\eta}{\\vert \\mathcal{B}\\vert}\\sum_{i\\in\\mathcal{B}}\\frac{\\partial \\ell^{(i)}(\\omega,b)}{\\partial \\omega} $$ å¯ä»¥çœ‹åˆ°ï¼Œ $L2$ èŒƒæ•°æ­£åˆ™åŒ–å°†æƒé‡ä¹˜ä»¥ä¸€ä¸ªå°äº 1 çš„æ•°åå†å‡å»ä¸å«æ­£åˆ™åŒ–é¡¹çš„æ¢¯åº¦ã€‚æ‰€ä»¥ $L2$ èŒƒæ•°æ­£åˆ™åŒ–ä¹Ÿå«åšæƒé‡è¡°å‡ã€‚\n æƒé‡è¡°å‡æ‰‹åŠ¨ç¼–ç å®éªŒ ç”Ÿæˆæ•°æ®é›†\nè®¾æ ·æœ¬æ•°æ®é›†ç‰¹å¾çš„ç»´åº¦ä¸º $p$ ï¼Œå¯¹äºæ•°æ®é›†ä¸­çš„æ ·æœ¬ä½¿ç”¨å¦‚ä¸‹çº¿æ€§æ¨¡å‹ $$ y = \\sum_{i=1}^p0.01x_i+0.05+\\epsilon $$ è¿™é‡Œæƒé‡ä¸º 0.01ï¼Œ$\\epsilon$ ä¸ºå™ªå£°é¡¹ï¼Œå…¶æœä»å‡å€¼ä¸º 0ï¼Œæ ‡å‡†å·®ä¸º0.01 çš„é«˜æ–¯åˆ†å¸ƒã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¸ºäº†æ›´å¥½çš„æ˜¾ç¤ºè¿‡æ‹Ÿåˆæ•ˆæœï¼Œè®¾ç½®ç»´åº¦ $p$ ä¸º 200ï¼Œè®­ç»ƒæ•°æ®é›†æ•°é‡è®¾ç½®ä¸º 20ã€‚\nå¯¼å…¥å¿…é¡»åŒ…\n%matplotlib inline import torch import torch.nn as nn import numpy as np import sys import d2lzh_pytorch as d2l ç”Ÿæˆæ•°æ®é›†\nn_train, n_test, num_imputs = 20, 100, 200 true_w, true_b = torch.ones(num_imputs, 1) * 0.01, 0.05 # ç”Ÿæˆæ•°æ®é›† features = torch.rand((n_train + n_test, num_imputs)) labels = torch.matmul(features, true_w) + true_b labels += torch.tensor(np.random.normal(0, 0.01, size=labels.size()), dtype=torch.float) train_features, test_features = features[:n_train, :], features[n_train:, :] train_labels, test_labels = labels[:n_train], labels[n_train:]  åˆå§‹åŒ–æ¨¡å‹å‚æ•°\nå®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–æ¨¡å‹å‚æ•°çš„å‡½æ•°\ndef init_params(): # éšæœºåˆå§‹åŒ–å‚æ•° w = torch.randn((num_inputs, 1), requires_grad=True) b = torch.zeros(1, requires_grad=True) return [w, b]  $L2$ èŒƒæ•°æ­£åˆ™åŒ–é¡¹\ndef l2_penalty(w): return (w**2).sum() / 2  å®šä¹‰å’Œè®­ç»ƒæ¨¡å‹\nbatch_size, num_epochs, lr = 1, 100, 0.003\t# å°æ‰¹é‡ä¸º 1ï¼Œè¿­ä»£å‘¨æœŸ 100 net, loss = d2l.linreg, d2l.squared_loss\t# net ä½¿ç”¨çº¿æ€§å›å½’ï¼ŒæŸå¤±å‡½æ•°ä½¿ç”¨å¹³æ–¹å·®æŸå¤± dataset = torch.utils.data.TensorDataset(train_features, train_labels) train_iter = torch.utils.data.DataLoader(dataset, batch_size, shuffle=True) def fit_and_plot(lambd): w, b = init_params() train_ls, test_ls = [], [] for _ in range(num_epochs): for X, y in train_iter: # æ·»åŠ äº†L2èŒƒæ•°æƒ©ç½šé¡¹ l = loss(net(X, w, b), y) + lambd * l2_penalty(w) # å¢åŠ æ­£åˆ™åŒ–é¡¹çš„æŸå¤±å‡½æ•° l = l.sum() if w.grad is not None:\t# æ¢¯åº¦æ¸…é›¶ w.grad.data.zero_() b.grad.data.zero_() l.backward()\t# åå‘ä¼ æ’­è®¡ç®— d2l.sgd([w, b], lr, batch_size)\t# éšæœºæ¢¯åº¦ä¸‹é™æ³• train_ls.append(loss(net(train_features, w, b), train_labels).mean().item()) test_ls.append(loss(net(test_features, w, b), test_labels).mean().item()) d2l.semilogy(range(1, num_epochs + 1), train_ls, \u0026#39;epochs\u0026#39;, \u0026#39;loss\u0026#39;, range(1, num_epochs + 1), test_ls, [\u0026#39;train\u0026#39;, \u0026#39;test\u0026#39;])\t# ç”»å›¾ print(\u0026#39;L2 norm of w:\u0026#39;, w.norm().item())  è§‚å¯Ÿè¿‡æ‹Ÿåˆ\né¦–å…ˆæˆ‘ä»¬è®© $\\lambda=0.005$ ï¼Œå› ä¸º $\\lambda$ æ¥è¿‘ 0ï¼Œæ‰€ä»¥æ­£åˆ™åŒ–é¡¹çš„å½±å“éå¸¸å°ã€‚\nfit_and_plot(lambd=0.005) è¾“å‡º\nL2 norm of w: 12.12175464630127 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è®­ç»ƒè¯¯å·®è¿œè¿œå°äºæµ‹è¯•è¯¯å·®ï¼Œè¿™æ˜¯å¾ˆæ˜æ˜¾çš„è¿‡æ‹Ÿåˆã€‚\nç„¶åæˆ‘ä»¬å¢å¤§ $\\lambda$ ï¼Œè®¾ç½®ä¸º $\\lambda=4$\nfit_and_plot(lambd=4) è¾“å‡º\nL2 norm of w: 0.07619155943393707 å¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°æµ‹è¯•è¯¯å·®æœ‰æ‰€ä¸‹é™ï¼Œè¿‡æ‹Ÿåˆç°è±¡æœ‰æ‰€ç¼“è§£ã€‚å¦å¤–ï¼Œæƒé‡å‚æ•°çš„L2L_2L2èŒƒæ•°æ¯”ä¸ä½¿ç”¨æƒé‡è¡°å‡æ—¶çš„æ›´å°ï¼Œæ­¤æ—¶çš„æƒé‡å‚æ•°æ›´æ¥è¿‘0ã€‚\n ä¸¢å¼ƒæ³• æˆ‘ä»¬å‡è®¾ä¸€ä¸ªæ¨¡å‹ï¼Œå…¶è¾“å…¥ä¸ªæ•°ä¸º 4 ä¸ªï¼Œéšè—å•å…ƒä¸º 5ï¼Œåˆ™éšè—å•å…ƒ $h_i$ çš„è®¡ç®—è¡¨è¾¾å¼ä¸º $$ h_i=\\phi(x_1\\omega_{1i}+x_2\\omega_{2i}+x_3\\omega_{3i}+x_4\\omega_{4i}+b_i) $$ è¿™é‡Œ $\\phi$ è¡¨ç¤ºæ¿€æ´»å‡½æ•°ã€‚å½“æˆ‘ä»¬å¯¹éšè—å±‚ä½¿ç”¨ä¸¢å¼ƒæ³•æ—¶ï¼Œè¯¥å±‚çš„éšè—å•å…ƒä¼šæœ‰ä¸€å®šçš„æ¦‚ç‡è¢«ä¸¢å¼ƒæ‰ï¼Œæˆ‘ä»¬è®¾ä¸¢å¼ƒæ¦‚ç‡ä¸º $p$ ï¼Œåˆ™ä¸€ä¸ªéšè—å•å…ƒæœ‰ $p$ æ¦‚ç‡ä¼šè¢«æ¸…é›¶ï¼Œæœ‰ $1-p$ çš„æ¦‚ç‡è¯¥éšè—å•å…ƒé™¤ä»¥ $1-p$ è¿›è¡Œæ‹‰ä¼¸ã€‚è€Œä¸¢å¼ƒæ¦‚ç‡æ˜¯è¶…å‚æ•°ã€‚\nè®¾éšæœºå˜é‡ $\\xi_i$ ä¸º 0 å’Œ 1 çš„æ¦‚ç‡ä¸º $p$ å’Œ $1-p$ ï¼Œåˆ™è¯¥éšæœºå˜é‡æœä»ä¼¯åŠªåˆ©åˆ†å¸ƒã€‚æˆ‘ä»¬è®¾éšè—å•å…ƒ $h'_i$ ä¸º $$ h'_i=\\frac{\\xi_i}{1-p}h_i $$ å› ä¸º $\\xi_i$ æœä»ä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œæ‰€ä»¥å…¶æœŸæœ›ä¸º $E(\\xi_i)=1-p$ ï¼Œæ‰€ä»¥ $$ E(h'_i)=\\frac{E(\\xi_i)}{1-p}h_i=h_i $$ å¾—åˆ°ç»“è®ºï¼šä¸¢å¼ƒæ³•ä¸æ”¹å˜è¾“å…¥çš„æœŸæœ›å€¼ï¼\næˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸Šè¿°æ¨¡å‹ä½¿ç”¨ä¸¢å¼ƒæ³•åçš„ç¥ç»ç½‘ç»œç»“æ„\nå¯ä»¥çœ‹åˆ° $h_2$ å’Œ $h_5$ éƒ½è¢«æ¸…é›¶ï¼Œå› æ­¤åå‘ä¼ æ’­æ—¶ä¸ $h_2$ å’Œ $h_5$ ç›¸å…³çš„æƒé‡çš„æ¢¯åº¦ä¸º 0ã€‚\nä¸ºä»€ä¹ˆä¸¢å¼ƒæ³•èµ·åˆ°æ­£åˆ™åŒ–çš„ä½œç”¨ï¼Ÿå’Œæ­£åˆ™åŒ–ä¸€æ ·ï¼Œä¸¢å¼ƒæ³•ä¹Ÿæ˜¯ä¸ºäº†ä»å‡å°æ¨¡å‹å¤æ‚åº¦å‡ºå‘æ¥é˜²æ­¢è¿‡æ‹Ÿåˆçš„ï¼Œå› ä¸ºéšæœºå‡å°‘éšè—å•å…ƒå’Œç¼©å°ç»´åº¦æ˜¯ä¸€æ ·çš„é“ç†ã€‚é‚±é”¡é¹æ•™æˆçš„ã€Šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ ã€‹ä¸­ç»™å‡ºäº†ä¸¤ç§è§£é‡Šï¼šé›†æˆå­¦ä¹ è§’åº¦çš„è§£é‡Šå’Œè´å¶æ–¯å­¦ä¹ è§’åº¦çš„è§£é‡Šã€‚\n é›†æˆå­¦ä¹ è§’åº¦çš„è§£é‡Š\næ¯åšä¸€æ¬¡ä¸¢å¼ƒï¼Œç›¸å½“äºä»åŸå§‹çš„ç½‘ç»œä¸­é‡‡æ ·å¾—åˆ°ä¸€ä¸ªå­ç½‘ç»œï¼Œè‹¥ä¸€ä¸ªç¥ç»ç½‘ç»œæœ‰ $n$ ä¸ªç¥ç»å…ƒï¼Œé‚£ä¹ˆæ€»å…±å¯ä»¥é‡‡æ ·å‡º $2^n$ ä¸ªå­ç½‘ç»œã€‚æ¯æ¬¡è¿­ä»£éƒ½ç›¸å½“äºè®­ç»ƒä¸€ä¸ªä¸åŒçš„å­ç½‘ç»œï¼Œè¿™äº›å­ç½‘ç»œéƒ½å…±äº«åŸå§‹ç½‘ç»œçš„å‚æ•°ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ç½‘ç»œå¯ä»¥è¿‘ä¼¼çœ‹ä½œæ˜¯é›†æˆäº†æŒ‡æ•°çº§ä¸ªä¸åŒç½‘ç»œçš„ç»„åˆæ¨¡å‹ã€‚\n è´å¶æ–¯å­¦ä¹ è§’åº¦çš„è§£é‡Šï¼ˆä¸æ˜¯å¤ªæ˜ç™½\u0026hellip;\u0026hellip;ï¼‰\nä¸¢å¼ƒæ³•å¯ä»¥è§£é‡Šä¸ºä¸€ç§è´å¶æ–¯å­¦ä¹ çš„è¿‘ä¼¼ï¼Œç”¨ $y=f(\\pmb{x};\\theta)$ æ¥è¡¨ç¤ºè¦å­¦ä¹ çš„ç¥ç»ç½‘ç»œï¼Œè´å¶æ–¯å­¦ä¹ æ—¶å‡è®¾å‚æ•° $\\theta$ ä¸ºéšæœºå‘é‡ï¼Œå¹¶ä¸”å…ˆéªŒåˆ†å¸ƒä¸º $q(\\theta)$ ï¼Œè´å¶æ–¯æ–¹æ³•çš„é¢„æµ‹ä¸º $$ \\mathbb{E}_{q(\\theta)}[y]=\\int_qf(\\pmb{x};\\theta)q(\\theta)d\\theta\\approx\\frac{1}{M} \\sum^M f(\\pmb{x},\\theta_i) $$ å…¶ä¸­ $f(\\pmb{x},\\theta_i)$ ä¸ºç¬¬ $i$ æ¬¡ä½¿ç”¨ä¸¢å¼ƒæ³•åçš„ç½‘ç»œï¼Œå…¶å‚æ•° $\\theta_i$ ä¸ºå¯¹å…¨éƒ¨å‚æ•° $\\theta$ çš„ä¸€æ¬¡é‡‡æ ·ã€‚\n æ‰‹åŠ¨å®ç°ä¸¢å¼ƒæ³• å®šä¹‰ dropout() å‡½æ•°ä»¥ drop_prob çš„æ¦‚ç‡ä¸¢å¼ƒã€‚\ndef dropout(X, drop_prob): X = X.float() assert 0 \u0026lt;= drop_prob \u0026lt;= 1 keep_prob = 1 - drop_prob # è¿™ç§æƒ…å†µä¸‹æŠŠå…¨éƒ¨å…ƒç´ éƒ½ä¸¢å¼ƒ if keep_prob == 0: return torch.zeros_like(X) mask = (torch.rand(X.shape) \u0026lt; keep_prob).float() return mask * X / keep_prob  å®šä¹‰æ¨¡å‹å‚æ•°\nè¿™é‡Œç»§ç»­ä½¿ç”¨åŸä¹¦ä¸­çš„ Fashion-MNIST æ•°æ®é›†ã€‚ç„¶åå®šä¹‰ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªéšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºï¼Œä¸”ä¸¤ä¸ªéšè—å±‚çš„è¾“å‡ºä¸ªæ•°å‡ä¸º 256ã€‚\nnum_inputs, num_outputs, num_hiddens1, num_hiddens2 = 784, 10, 256, 256 W1 = torch.tensor(np.random.normal(0, 0.01, size=(num_inputs, num_hiddens1)), dtype=torch.float, requires_grad=True) b1 = torch.zeros(num_hiddens1, requires_grad=True) W2 = torch.tensor(np.random.normal(0, 0.01, size=(num_hiddens1, num_hiddens2)), dtype=torch.float, requires_grad=True) b2 = torch.zeros(num_hiddens2, requires_grad=True) W3 = torch.tensor(np.random.normal(0, 0.01, size=(num_hiddens2, num_outputs)), dtype=torch.float, requires_grad=True) b3 = torch.zeros(num_outputs, requires_grad=True) params = [W1, b1, W2, b2, W3, b3]  å®šä¹‰æ¨¡å‹\næ¨¡å‹å®šä¹‰éƒ¨åˆ†ä½¿ç”¨ ReLU æ¿€æ´»å‡½æ•°ï¼Œç„¶åå¯¹æ¯ä¸ªæ¿€æ´»å‡½æ•°çš„è¾“å‡ºä½¿ç”¨ä¸¢å¼ƒæ³•ã€‚è¿™é‡Œæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªéšè—å±‚çš„ä¸¢å¼ƒæ¦‚ç‡è®¾ç½®ä¸º 0.1ï¼Œç¬¬äºŒä¸ªéšè—å±‚çš„ä¸¢å¼ƒæ¦‚ç‡è®¾ä¸º 0.6ï¼Œç„¶åé€šè¿‡å‚æ•° is_training æ¥åˆ¤æ–­è¿è¡Œæ¨¡å¼æ˜¯è®­ç»ƒè¿˜æ˜¯æµ‹è¯•ï¼Œå¹¶åœ¨è®­ç»ƒæ¨¡å¼ä¸­ä½¿ç”¨ä¸¢å¼ƒæ³•ã€‚\ndrop_prob1, drop_prob2 = 0.1, 0.6 def net(X, is_training=True): X = X.view(-1, num_inputs) H1 = (torch.matmul(X, W1) + b1).relu() if is_training: # åªåœ¨è®­ç»ƒæ¨¡å‹æ—¶ä½¿ç”¨ä¸¢å¼ƒæ³• H1 = dropout(H1, drop_prob1) # åœ¨ç¬¬ä¸€å±‚å…¨è¿æ¥åæ·»åŠ ä¸¢å¼ƒå±‚ H2 = (torch.matmul(H1, W2) + b2).relu() if is_training: H2 = dropout(H2, drop_prob2) # åœ¨ç¬¬äºŒå±‚å…¨è¿æ¥åæ·»åŠ ä¸¢å¼ƒå±‚ return torch.matmul(H2, W3) + b3  æ¨¡å‹è¯„ä¼°\nåœ¨å¯¹æ¨¡å‹è¿›è¡Œè¯„ä¼°çš„æ—¶å€™ä¸åº”è¯¥ä½¿ç”¨ä¸¢å¼ƒæ³•\n# æœ¬å‡½æ•°å·²ä¿å­˜åœ¨d2lzh_pytorch def evaluate_accuracy(data_iter, net): acc_sum, n = 0.0, 0 for X, y in data_iter: if isinstance(net, torch.nn.Module): net.eval() # è¯„ä¼°æ¨¡å¼, è¿™ä¼šå…³é—­dropout acc_sum += (net(X).argmax(dim=1) == y).float().sum().item() net.train() # æ”¹å›è®­ç»ƒæ¨¡å¼ else: # è‡ªå®šä¹‰çš„æ¨¡å‹ if(\u0026#39;is_training\u0026#39; in net.__code__.co_varnames): # å¦‚æœæœ‰is_trainingè¿™ä¸ªå‚æ•° # å°†is_trainingè®¾ç½®æˆFalse acc_sum += (net(X, is_training=False).argmax(dim=1) == y).float().sum().item() else: acc_sum += (net(X).argmax(dim=1) == y).float().sum().item() n += y.shape[0] return acc_sum / n  è®­ç»ƒå’Œæµ‹è¯•\næ¨¡å‹è®­ç»ƒ train_ch3() ä½¿ç”¨å’Œå¤šå±‚æ„ŸçŸ¥æœºé‡Œä¸€æ ·çš„æ–¹æ³•\nnum_epochs, lr = 5, 0.1 # æœ¬å‡½æ•°å·²ä¿å­˜åœ¨d2lzhåŒ…ä¸­æ–¹ä¾¿ä»¥åä½¿ç”¨ def train_ch3(net, train_iter, test_iter, loss, num_epochs, batch_size, params=None, lr=None, optimizer=None): for epoch in range(num_epochs): train_l_sum, train_acc_sum, n = 0.0, 0.0, 0 for X, y in train_iter: y_hat = net(X) l = loss(y_hat, y).sum() # æ¢¯åº¦æ¸…é›¶ if optimizer is not None: optimizer.zero_grad() elif params is not None and params[0].grad is not None: for param in params: param.grad.data.zero_() l.backward() if optimizer is None: d2l.sgd(params, lr, batch_size) else: optimizer.step() # â€œsoftmaxå›å½’çš„ç®€æ´å®ç°â€ä¸€èŠ‚å°†ç”¨åˆ° train_l_sum += l.item() train_acc_sum += (y_hat.argmax(dim=1) == y).sum().item() n += y.shape[0] test_acc = evaluate_accuracy(test_iter, net) print(\u0026#39;epoch %d, loss %.4f, train acc %.3f, test acc %.3f\u0026#39; % (epoch + 1, train_l_sum / n, train_acc_sum / n, test_acc)) train_ch3(net, train_iter, test_iter, cross_entropy, num_epochs, batch_size, [W, b], lr) num_epochs, lr, batch_size = 5, 100.0, 256 loss = torch.nn.CrossEntropyLoss() train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size) d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, batch_size, params, lr) è¾“å‡º\nepoch 1, loss 0.0047, train acc 0.538, test acc 0.763 epoch 2, loss 0.0024, train acc 0.777, test acc 0.773 epoch 3, loss 0.0020, train acc 0.817, test acc 0.792 epoch 4, loss 0.0018, train acc 0.839, test acc 0.802 epoch 5, loss 0.0017, train acc 0.845, test acc 0.831  æœ€åï¼ŒåŸä¹¦ä¸­è¿˜æœ‰ä¸¤ç§æ–¹æ³•çš„ç®€æ´å®ç°ï¼Œè¿™é‡Œä¸å†å†™äº†ã€‚\n å‚è€ƒ   ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹PyTorch ç‰ˆï¼Œé˜¿æ–¯é¡¿Â·å¼ ã€ææ² https://tangshusen.me/Dive-into-DL-PyTorch/#/   ã€Šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ ã€‹é‚±é”¡é¹ https://nndl.github.io   ","permalink":"https://yibocat.github.io/posts/dl/sdxx_4/","summary":"æƒé‡è¡°å‡ä¸ä¸¢å¼ƒæ³•æ˜¯å¸¸ç”¨çš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œæœ¬ç¯‡æ–‡ç« æˆ‘ä»¬å°è¯•æ‰‹åŠ¨å®ç°æƒé‡è¡°å‡ä¸ä¸¢å¼ƒæ³•ï¼Œå¹¶ä¸”å¯¹å…¶è¿›è¡Œè¯„ä¼°ã€‚ æƒé‡è¡°å‡ æˆ‘ä»¬çŸ¥é“é«˜å¤æ‚åº¦æ¨¡å‹ä¸æ ·æœ¬æ•°æ®ä¸åŒ¹é…","title":"[æ·±åº¦å­¦ä¹ ç¬”è®°] æ·±åº¦å­¦ä¹ ç¬¬ 4 ç¯‡â€”â€”æƒé‡è¡°å‡ä¸ä¸¢å¼ƒæ³•"},{"content":"åœ¨å­¦ä¹ æ­£åˆ™åŒ–ä¹‹å‰ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹ç»éªŒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®ä¸è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆï¼Œç„¶åç»™å‡ºæ¨¡å‹å¤æ‚åº¦ç”¨æ¥åˆ¤å®šä¸€ä¸ªæ¨¡å‹çš„å¥½åï¼Œç„¶åå­¦ä¹ ç½‘ç»œæ­£åˆ™åŒ–ã€‚\n ç»éªŒè¯¯å·®ä¸æ³›åŒ–è¯¯å·® ä»€ä¹ˆæ˜¯ç»éªŒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®ï¼Ÿé€šä¿—çš„æ¥è®²ï¼Œç»éªŒè¯¯å·®ï¼ˆEmpirical Errorï¼‰å°±æ˜¯æŒ‡æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šçš„è¡¨ç°å‡ºæ¥çš„è¯¯å·®ï¼Œæ³›åŒ–è¯¯å·®ï¼ˆGeneralization Errorï¼‰æ˜¯æŒ‡æ¨¡å‹åœ¨ä»»æ„æ–°æ ·æœ¬ä¸Šçš„è¯¯å·®ã€‚\n å…·ä½“æ¥çœ‹ï¼Œç»™å®šä¸€ä¸ªæ¨¡å‹ $f(x;\\theta)$ ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯è¿™ä¸ªæ¨¡å‹æœ‰ä¸€ä¸ªå°çš„æœŸæœ›è¯¯å·®ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“çœŸå®çš„æ•°æ®åˆ†å¸ƒå’Œæ˜ å°„å‡½æ•°ï¼Œæ‰€ä»¥æ— æ³•è®¡ç®—æœŸæœ›è¯¯å·®ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è®¡ç®—çš„æ˜¯ç»éªŒè¯¯å·®ï¼Œå³æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®ï¼Œä¹Ÿå°±æ˜¯è®­ç»ƒé›†ä¸Šçš„å¹³å‡æŸå¤± $$ E_{D}^{emp}(\\theta)=\\frac{1}{m}\\sum_{i=1}^m\\mathbb{L}(y^{(i)},f(x^{(i)};\\theta)) $$ è¿™é‡Œ $E_D^{emp}(\\theta)$ è¡¨ç¤ºåœ¨è®­ç»ƒé›† $D$ ä¸Šçš„å‚æ•°ä¸º $\\theta$ çš„å¹³å‡ç»éªŒè¯¯å·®ï¼Œå‡è®¾æœ‰ $m$ ä¸ªè®­ç»ƒæ•°æ®ï¼Œ$\\mathbb{L}$ è¡¨ç¤ºæ¯ä¸ªè®­ç»ƒæ•°æ®é›†çš„çœŸå®æ ‡ç­¾ä¸æ¨¡å‹ $f(x^{(i)};\\theta)$ å¾—åˆ°çš„æ ‡ç­¾ä¹‹é—´çš„è¯¯å·®å‡½æ•°ã€‚\næˆ‘ä»¬é¦–å…ˆå¸Œæœ›å¾—åˆ°çš„æ¨¡å‹ä¸€å®šæ˜¯æœ‰è¾ƒå°çš„å¹³å‡ç»éªŒè¯¯å·®ã€‚é€šä¿—çš„è®²ï¼Œæˆ‘ä»¬çš„æ¨¡å‹æœ€åŸºæœ¬çš„è¦æ±‚é¦–å…ˆæ˜¯è¦åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®æœ€å°å§ï¼Œä¹Ÿå°±æ˜¯æš‚ä¸”è®©æ¨¡å‹æ»¡è¶³è®­ç»ƒé›†ä¸Šçš„æ•°æ®è¯¯å·®æœ€å°ï¼ˆæ‰¯äº†ä¸‰å¥å•°å—¦è¯ï¼Œå…¶å®æ˜¯ä¸€ä¸ªæ„æ€ï¼‰ã€‚è¿™ä¹Ÿå°±æ˜¯å¸¸è¯´çš„ç»éªŒé£é™©æœ€å°åŒ–å‡†åˆ™ï¼ˆEmpirical Risk Minimization , ERMï¼‰ã€‚\n æ¥ç€æ¥çœ‹æ³›åŒ–è¯¯å·®ã€‚\næˆ‘ä»¬å‡è®¾ä»»æ„æ ·æœ¬é›†ä¸º $\\mathcal{D}$ ï¼Œåˆ™æ³›åŒ–è¯¯å·®çš„è¡¨ç¤ºä¸º $$ E_{\\mathcal{D}}(\\theta) = P_{x\\thicksim\\mathcal{D}}(y\\ne f(x;\\theta)) $$ è¿™ä¸ªå…¬å¼å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œ$P_{x\\thicksim\\mathcal{D}}$ è¡¨ç¤º $x$ åœ¨ä»»æ„æ ·æœ¬ä¸‹çš„è¯¯å·®ï¼ˆæˆ–è€…è¯´å¹³å‡è¯¯å·®ï¼‰ï¼Œè€Œä»»æ„æ–°æ ·æœ¬çš„æ ‡ç­¾ä¸ç­‰äºè¯¥æ¨¡å‹å¯¹è¯¥æ ·æœ¬æ•°æ®ä¸‹çš„æ ‡ç­¾ï¼ˆå…¬å¼å¯èƒ½ä¸å¤ªæ­£ç¡®ï¼Œå¤§æ¦‚æ„æ€æ˜¯ä¸€æ ·çš„ï¼‰ã€‚\n ä»¥ä¸Šæˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆæ˜¯ç»éªŒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®ã€‚æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªæ¨¡å‹å¯ä»¥æ»¡è¶³ ERMã€‚\nä½†æ˜¯ï¼ä½†æ˜¯ï¼ï¼ï¼æˆ‘ä»¬ä¸èƒ½è®©ç»éªŒé£é™©æ— ç©·å°ï¼ˆå¤¸å¼ ï¼‰ï¼è¿‡å°çš„ç»éªŒé£é™©è™½ç„¶ä¼šè®©æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„è¡¨ç°éå¸¸å¥½ï¼Œä½†æ˜¯ä¼šé€ æˆè¿‡æ‹Ÿåˆï¼è¿™æ„å‘³ç€æˆ‘ä»¬çš„æ¨¡å‹é€‚åˆä¸”ä»…é€‚åˆè®­ç»ƒæ•°æ®é›†ï¼å¤ªå¥½äº†ä¹Ÿä¸æ˜¯ä»¶å¥½äº‹ï¼Œæ‰€è°“ç‰©æå¿…åã€‚\nè¿™ä¹Ÿå°±é€ æˆäº†è¿‡æ‹Ÿåˆç°è±¡ã€‚\n è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ ä¸Šæ–‡è®²è¿‡ï¼Œè¿‡æ‹Ÿåˆçš„æ„æ€å°±æ˜¯ä¸€ä¸ªè®­ç»ƒå¥½çš„æ¨¡å‹åªåœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°éå¸¸å¥½ï¼Œä½†æ˜¯æ— æ³•ç”¨åœ¨æ–°çš„æ•°æ®é›†ï¼Œæˆ–è€…è¯´æµ‹è¯•é›†ä¸Šã€‚é€šå¸¸é€ æˆè¿‡æ‹Ÿåˆçš„åŸå› æ˜¯è®­ç»ƒæ•°æ®é›†è¿‡å°‘ï¼Œæˆ–è€…å¯ä»¥è¿™ä¹ˆè¯´ï¼Œè¿‡æ‹Ÿåˆäº§ç”Ÿçš„åŸå› æ˜¯æ•°æ®é›†ä¸æ¨¡å‹å¤æ‚åº¦ä¸åŒ¹é…ï¼Œå³è®­ç»ƒæ•°æ®é›†çš„æ•°é‡æ— æ³•æ”¯æ’‘é«˜å¤æ‚åº¦çš„æ¨¡å‹ã€‚è€Œç¥ç»ç½‘ç»œé€šå¸¸æ˜¯ä¸€ä¸ªè¶…é«˜å¤æ‚åº¦çš„æ¨¡å‹ï¼Œè¿‡å°‘çš„æ•°æ®é›†å¾ˆå®¹æ˜“é€ æˆè¿‡æ‹Ÿåˆç°è±¡ã€‚\næ¬ æ‹Ÿåˆåˆ™å¾ˆå¥½ç†è§£ï¼ŒæŒ‡çš„æ˜¯æ¨¡å‹è¾ƒå¼±çš„å­¦ä¹ èƒ½åŠ›å½¢æˆçš„å¯¼è‡´æ³›åŒ–èƒ½åŠ›ä¸é«˜çš„ç°è±¡ã€‚æ€»çš„æ¥è¯´ï¼Œè¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆéƒ½æ˜¯ç”±äºæ¨¡å‹å¤æ‚åº¦ä¸æ•°æ®é›†ä¸åŒ¹é…é€ æˆçš„ã€‚\næ‰€ä»¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯æ¨¡å‹å¤æ‚åº¦è¿™ä¸ªæ¦‚å¿µã€‚\n æ¨¡å‹å¤æ‚åº¦ é¦–å…ˆæˆ‘ä»¬ä»¥å¤šé¡¹å¼æ‹Ÿåˆä¸ºä¾‹ã€‚ç»™å®šä¸€ä¸ªç”±æ ‡é‡æ•°æ®ç‰¹å¾ $x$ å’Œå¯¹åº”çš„æ ‡é‡æ ‡ç­¾ $y$ ç»„æˆçš„è®­ç»ƒæ•°æ®é›†ï¼Œå¤šé¡¹å¼å‡½æ•°æ‹Ÿåˆçš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ª $K$ é˜¶å¤šé¡¹å¼å‡½æ•° $$ \\hat{y}=b+\\sum_{k=1}^Kx^k\\omega_k $$ æ¥è¿‘ä¼¼ $y$ã€‚ä¸Šå¼ä¸­ï¼Œ$\\omega_k$ è¡¨ç¤ºæ¨¡å‹çš„æƒé‡å‚æ•°ï¼Œ$b$ è¡¨ç¤ºåå·®å‚æ•°ã€‚è€Œå¤šé¡¹å¼å‡½æ•°æ‹Ÿåˆä¹Ÿæ˜¯ç”¨å¹³æ–¹æŸå¤±å‡½æ•°ã€‚ç‰¹åˆ«çš„ï¼Œä¸€é˜¶å¤šé¡¹å¼å‡½æ•°æ‹Ÿåˆåˆå«çº¿æ€§å‡½æ•°æ‹Ÿåˆã€‚\nä»ä¸Šå¼å¯ä»¥çœ‹åˆ°ï¼Œéšç€ $k$ è¶Šæ¥è¶Šå¤§ï¼Œæ¨¡å‹çš„å‚æ•°ä¹Ÿå°±è¶Šæ¥è¶Šå¤šï¼Œæ¨¡å‹å‡½æ•°çš„é€‰æ‹©ç©ºé—´æ›´å¤§ï¼Œæ‰€ä»¥é«˜é˜¶å¤šé¡¹å¼å‡½æ•°æ¯”ä½é˜¶å¤šé¡¹å¼å‡½æ•°çš„å¤æ‚åº¦æ›´é«˜ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€é«˜é˜¶å¤šé¡¹å¼å‡½æ•°æ¯”ä½é˜¶å¤šé¡¹å¼å‡½æ•°æ›´å®¹æ˜“åœ¨ç›¸åŒçš„è®­ç»ƒæ•°æ®é›†ä¸Šå¾—åˆ°æ›´ä½çš„è®­ç»ƒè¯¯å·®ã€‚è¿™ä¹Ÿå°±æ˜¯æ¨¡å‹å¤æ‚åº¦ã€‚\nä¸‹å›¾å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºï¼Œæ¨¡å‹å¤æ‚åº¦ä¸è¯¯å·®çš„å…³ç³»ä»¥åŠä»€ä¹ˆæ˜¯æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ\nå…³äºè¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆçš„å®éªŒï¼Œå¯ä»¥æŸ¥çœ‹åŸä¹¦https://tangshusen.me/Dive-into-DL-PyTorch/#/chapter03_DL-basics/3.11_underfit-overfit æ­£åˆ™åŒ– ç¥ç»ç½‘ç»œå› å…¶éå¸¸å¼ºçš„æ‹Ÿåˆèƒ½åŠ›å¾€å¾€ä½¿å¾—ç»éªŒè¯¯å·®å¯ä»¥é™åˆ°éå¸¸ä½ï¼Œä»è€Œé€ æˆè¿‡æ‹Ÿåˆç°è±¡ã€‚æ‰€ä»¥å¦‚ä½•æé«˜ç¥ç»ç½‘ç»œçš„æ³›åŒ–èƒ½åŠ›æ˜¯éå¸¸é‡è¦çš„ã€‚\nä»ä¸Šæ–‡å¾—çŸ¥ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆå¯ä»¥ä»æ•°æ®å…¥æ‰‹ï¼Œå¢åŠ æ•°æ®é›†çš„æ•°é‡ï¼Œä½†æ˜¯å› ç¥ç»ç½‘ç»œå¼ºå¤§çš„æ‹Ÿåˆèƒ½åŠ›å¯ä»¥çŸ¥é“å…¶å¿…ç„¶æ˜¯ä¸€ä¸ªæ¨¡å‹å¤æ‚åº¦éå¸¸é«˜çš„æ¨¡å‹ï¼Œè¿™æ„å‘³ç€æ•°æ®é›†çš„é‡å‘ˆæŒ‡æ•°å¢é•¿ä»è€Œæ— æ³•æ»¡è¶³ç¥ç»ç½‘ç»œè¶…é«˜çš„å¤æ‚åº¦ï¼Œæ‰€ä»¥å¢åŠ æ•°æ®é›†çš„é‡æ˜¾ç„¶å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ³•ã€‚æ‰€ä»¥åªèƒ½ä»å¦ä¸€ä¸ªè§’åº¦æ¥è€ƒè™‘ï¼Œå³é™åˆ¶æ¨¡å‹å¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ç½‘ç»œæ­£åˆ™åŒ–ã€‚\næ­£åˆ™åŒ–ï¼ˆRegularizationï¼‰ æ˜¯ä¸€ç§é€šè¿‡é™åˆ¶æ¨¡å‹å¤æ‚åº¦æ¥é¿å…è¿‡æ‹Ÿåˆçš„æ–¹æ³•ï¼Œå¸¸ç”¨çš„æ­£åˆ™åŒ–æ–¹æ³•æœ‰æƒé‡è¡°å‡ã€ä¸¢å¼ƒæ³•ç­‰ã€‚\n $\\ell_1,\\ell_2$ æ­£åˆ™åŒ–\n$\\ell_1,\\ell_2$ æ­£åˆ™åŒ–ä¹Ÿç§°ä½œèŒƒæ•°æ­£åˆ™åŒ–ï¼Œæ˜¯æœºå™¨å­¦ä¹ ä¸­æœ€å¸¸ç”¨çš„æ­£åˆ™åŒ–æ–¹æ³•ã€‚å…¶é€šè¿‡çº¦æŸå‚æ•°çš„ $\\ell_1$ å’Œ $\\ell_2$ èŒƒæ•°æ¥å‡å°æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šçš„è¿‡æ‹Ÿåˆç°è±¡ã€‚æˆ‘ä»¬å°† $\\ell_1$ å’Œ $\\ell_2$ åŠ å…¥åˆ°ä¼˜åŒ–é—®é¢˜ä¸­ $$ \\mathcal{J}(\\theta) = arg\\min_{\\theta}\\frac{1}{N}\\sum_{n=1}^N\\mathcal{L}(y^{(n)},f(x^{(n)};\\theta))+\\lambda\\ell_p(\\theta) $$ $\\mathcal{L}()$ è¡¨ç¤ºæŸå¤±å‡½æ•°ï¼Œ$N$ ä¸ºè®­ç»ƒæ ·æœ¬æ•°é‡ï¼Œ$f()$ è¡¨ç¤ºå¾…å­¦ä¹ çš„ç¥ç»ç½‘ç»œï¼Œ$\\ell_p$ è¡¨ç¤ºèŒƒæ•°å‡½æ•°ï¼Œè¿™é‡Œ $p$ è¡¨ç¤ºç¬¬ $p$ èŒƒæ•°ï¼Œè¿™é‡Œå–å€¼ä¸º ${1,2}$ è¡¨ç¤º $\\ell_1,\\ell_2$ èŒƒæ•°ï¼Œ$\\lambda$ ä¸ºæ­£åˆ™åŒ–ç³»æ•°ã€‚\n æ€ä¹ˆç†è§£è¿™ä¸ªå¼å­å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬çœ‹ç­‰å¼å³è¾¹çš„å‰åŠéƒ¨åˆ†ï¼Œè¿™å…¶å®å°±æ˜¯ä¸Šæ–‡ä¸­æ‰€æåˆ°çš„ç»éªŒè¯¯å·®æœ€å°åŒ–å¼å­ã€‚æˆ‘ä»¬å‡è®¾ $\\lambda$ æ— é™å°äº 0 å³ç­‰ä»·äº 0 ï¼Œæ­¤æ—¶è¯¥å¼å­é€€åŒ–ä¸ºç»éªŒè¯¯å·®æœ€å°åŒ–ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åªè€ƒè™‘å¢å¤§è®­ç»ƒé›†æ•°æ®é‡æ¥é˜²æ­¢è¿‡æ‹Ÿåˆã€‚è€ŒåŠ å…¥æ­£åˆ™åŒ–é¡¹åï¼Œéšç€ $\\lambda$ çš„å€¼è¶Šæ¥è¶Šå¤§ï¼ŒèŒƒæ•°å‡½æ•°åœ¨ç­‰å¼ä¸­çš„ä½œç”¨è¶Šæ¥è¶Šå¤§ï¼Œè€Œè¯¥å‡½æ•°æ­£æ˜¯æ¥é™åˆ¶æ¨¡å‹å¤æ‚åº¦çš„ï¼Œæ‰€ä»¥è¯¥å¼å­é€šè¿‡åŠ å…¥äº†æ­£åˆ™é¡¹ï¼Œæ¥é™åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ã€‚\nè‡³äº $\\ell_1$ å’Œ $\\ell_2$ æ˜¯å¦‚ä½•é™åˆ¶æ¨¡å‹çš„ï¼Œè¿™æ¶‰åŠåˆ°æ•°å­¦é—®é¢˜äº†ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚\n ç®—äº†\u0026hellip;åšç¬”è®° \u0026hellip; è¿˜æ˜¯è¯¦ç»†ä¸€ç‚¹ \u0026hellip;\n æ­£åˆ™åŒ–é¡¹å¦‚ä½•å½±å“æ¨¡å‹\næˆ‘ä»¬å°†ä¸Šå¼ç­‰å¼çš„å³è¾¹ç¬¬ä¸€éƒ¨åˆ†ç®€åŒ–ä¸€ä¸‹ï¼Œç”¨ $E^{emp}(\\theta)$ è¡¨ç¤ºï¼Œåˆ™ä¼˜åŒ–é—®é¢˜å¯ä»¥å†™æˆ $$ \\mathcal{J}(\\theta)=E^{emp}(\\theta)+\\lambda\\ell_p(\\theta) $$ é¦–å…ˆçœ‹è¿™ä¸ªå¼å­ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯ä¸ºäº†è®© $\\mathcal{J}(\\theta)$ æœ€å°åŒ–ï¼Œåœ¨ä¸è€ƒè™‘æ­£åˆ™åŒ–é¡¹çš„æ—¶å€™ï¼Œ$\\mathcal{J}(\\theta)$ ç­‰ä»·äºç»éªŒè¯¯å·®æœ€å°åŒ–ã€‚è€ŒåŠ å…¥æ­£åˆ™åŒ–é¡¹ä¹‹åå°±è¦ç»¼åˆè€ƒè™‘ä¸¤é¡¹äº†ï¼ˆè¿™é‡Œçœ‹ä¼¼åºŸè¯ï¼Œå®åˆ™æ˜¯å¾ªåºæ¸è¿›ï¼‰ã€‚è€Œä¸ºäº†ä½¿å¾— $\\mathcal{J}(\\theta)$ æœ€å°åŒ–ï¼Œæ­£åˆ™åŒ–é¡¹ä¹Ÿè¦è¶Šå°è¶Šå¥½ã€‚\nè¿™é‡Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ 1-èŒƒæ•°å’Œ 2-èŒƒæ•°çš„å®šä¹‰\n å‘é‡çš„ 1-èŒƒæ•°ï¼š$\\vert\\vert X\\vert\\vert_1 = \\sum_{i=1}^n\\vert x_i\\vert$ ï¼Œè¡¨ç¤ºå‘é‡å†…å„å…ƒç´ çš„ç»å¯¹å€¼ä¹‹å’Œ\nå‘é‡çš„ 2-èŒƒæ•°ï¼š$\\vert\\vert X\\vert\\vert_2=(\\sum_{i=1}^nx_i^2)^{\\frac{1}{2}}$ ï¼Œè¡¨ç¤ºå…ƒç´ çš„å¹³æ–¹å’Œå†å¼€å¹³æ–¹\n  è¿™æ—¶å€™æˆ‘ä»¬å†çœ‹ï¼Œ1-èŒƒæ•°ä¸ºä¾‹ï¼Œæˆ‘ä»¬è¦è®©æ­£åˆ™åŒ–é¡¹è¶Šå°ï¼Œæ„å‘³ç€ $\\theta$ è¦è®© $\\sum_{i=1}^n\\vert\\theta_i\\vert$ å°½å¯èƒ½å°ï¼Œè¿™æ · $\\theta_i$ å°±è¢«é™åˆ¶ä½äº†ã€‚è€Œ $\\theta_i$ æ˜¯ä»€ä¹ˆï¼Ÿä¸å°±æ˜¯å‚æ•°å—ï¼Ÿæˆ‘ä»¬ä¸å…‰è¦è®©å‚æ•°å°½å¯èƒ½å°ï¼Œè€Œä¸”è¿˜è¦è®©å‚æ•°çš„æ•°é‡å°½å¯èƒ½å¾—å°‘ï¼$\\theta_i$ è¢«é™åˆ¶ä½ï¼Œæ›²çº¿ä¹Ÿå°±ä¸ä¼šå¤ªè¿‡é™¡å³­ã€‚è¿™ç§æ­£åˆ™åŒ–çš„æ–¹å¼è¢«ç§°ä¸º\nLasso å›å½’ï¼ˆLeast Absolute Shrinkage and Selection operator Regression) ã€‚\n 1-èŒƒæ•°æ­£åˆ™åŒ–\nL1 æ­£åˆ™åŒ–é¡¹ä¸ç¨€ç–æ€§æœ‰å…³ï¼Œå³ L1 æ­£åˆ™åŒ–å¯ä»¥ä½¿å¾—å‚æ•°ç¨€ç–åŒ–ä»è€Œå‡å°æ¨¡å‹å¤æ‚åº¦ã€‚ä»€ä¹ˆæ˜¯ç¨€ç–æ€§ï¼Ÿé€šå¸¸ç¥ç»ç½‘ç»œä¸­çš„ç‰¹å¾ä¼šè¾¾åˆ°ä¸€ä¸ªéå¸¸å¤§çš„æ•°é‡ï¼Œå¦‚æœæ¨¡å‹çš„å‚æ•°æœ‰éå¸¸å¤šçš„ 0ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†å¾ˆå¤šçš„å‚æ•°ç¨€ç–æ‰ã€‚è€Œ L1 æ­£åˆ™åŒ–é¡¹ç›¸å½“äºå¯¹æ¨¡å‹è¿›è¡Œäº†ä¸€æ¬¡ç‰¹å¾é€‰æ‹©ï¼Œåªç•™ä¸‹é‡è¦çš„ç‰¹å¾ï¼Œä»è€Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚\n æˆ‘ä»¬å‡è®¾ä¸€ä¸ªäºŒç»´å‚æ•°ç©ºé—´ï¼ŒæŸå¤±å‡½æ•°çš„ç­‰é«˜çº¿å¦‚ä¸‹æ‰€ç¤º\nè¿™æ—¶ L1 æ­£åˆ™åŒ–ä¸º $\\vert \\theta_1\\vert+\\vert\\theta_2\\vert$ ï¼Œå¯¹åº”çš„ç­‰é«˜çº¿æ˜¯ä¸€ä¸ªè±å½¢ã€‚å½“ä¸åŠ å¦‚æ­£åˆ™åŒ–é¡¹çš„æ—¶å€™ï¼Œä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•ä¼˜åŒ–æŸå¤±å‡½æ•°ï¼Œä»–ä¼šæ²¿ç€æ¢¯åº¦æ–¹å‘ä¸‹é™è€Œå¾—åˆ°ä¸€ä¸ªè¿‘ä¼¼çš„æœ€ä¼˜è§£\nè€ŒåŠ å…¥L1æ­£åˆ™åŒ–åï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚$P,Q$ ä¸¤ç‚¹åœ¨åŒä¸€ç­‰é«˜çº¿ä¸Šï¼Œå³ $P$ å’Œ $Q$ ä¸¤ä¸ªç‚¹çš„æŸå¤±å‡½æ•°æ˜¯ç­‰ä»·çš„ã€‚ä½†æ˜¯ï¼Œ$OP$ çš„è·ç¦»å¤§äº $OQ$ çš„è·ç¦»\nå› æ­¤å¯ä»¥å¾—åˆ° $P$ ç‚¹çš„ç»éªŒæŸå¤±å‡½æ•°å¤§äº $Q$ ç‚¹çš„ç»éªŒæŸå¤±å‡½æ•°ï¼Œå› ä¸º $Q$ ç‚¹çš„ L1 èŒƒæ•°å°äº $P$ ç‚¹çš„ L1 èŒƒæ•°ï¼Œæ‰€ä»¥é€‰æ‹© $Q$ ç‚¹ï¼Œå…¶æ¬¡ï¼Œå½“æˆ‘ä»¬é€‰æ‹© $Q$ ç‚¹æ—¶ï¼Œå¯¹åº”çš„ $\\theta_1=0$ ï¼Œè¿™æ°å¥½å°† $\\theta_1$ å»æ‰äº†ï¼Œå¹¶ä¸”å¯¹åŸæ¨¡å‹å¹¶æ²¡æœ‰å½±å“ã€‚\næ‰€ä»¥å¯ä»¥å¾—å‡ºç»“è®ºï¼Œå³åŠ ä¸Šæ­£åˆ™åŒ–é¡¹ï¼Œå‚æ•°ç©ºé—´ä¼šè¢«ç¼©å°ï¼Œä»è€Œå‡å°æ¨¡å‹å¤æ‚åº¦ã€‚\n 2-èŒƒæ•°æ­£åˆ™åŒ–\nå’Œ L1 æ­£åˆ™åŒ–æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å‡è®¾ä¸€ä¸ªäºŒç»´çš„å‚æ•°ç©ºé—´ï¼ŒL2 æ­£åˆ™åŒ–ä¸º $\\theta_1^2+\\theta_2^2$ ï¼Œè¿™æ—¶ L2 ç­‰é«˜çº¿æ˜¯ä¸€ä¸ªåŒå¿ƒåœ†\nåŒæ ·æˆ‘ä»¬ä½¿ç”¨ä¸Šè¿°æŸå¤±å‡½æ•°ä¸æŸå¤±å‡½æ•°ç­‰é«˜çº¿ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ŒL2 æ­£åˆ™ä¸æŸå¤±ç­‰é«˜çº¿äº¤äº $P,Q$ ä¸¤ç‚¹ï¼Œå¯ä»¥çœ‹åˆ° $P$ ç‚¹è·ç¦» $Q$ ç‚¹æ›´æ¥è¿‘åŸç‚¹ï¼Œå³è·ç¦»çŸ­ã€‚ä½†æ˜¯æ­¤æ—¶ $\\theta_1,\\theta_2$ å‡ä¸ä¸º 0 ã€‚æ‰€ä»¥æˆ‘ä»¬è¯´ 2-èŒƒæ•°æ­£åˆ™åŒ–å¯ä»¥å¾—åˆ°å°½å¯èƒ½å°çš„è§£ï¼Œä½†æ˜¯ä¸å…·æœ‰ç¨€ç–æ€§ã€‚è€Œ L2 æ­£åˆ™åŒ–æ–¹æ³•ä¹Ÿæ˜¯å²­å›å½’æ–¹æ³•ã€‚\nåˆ°è¿™ï¼Œæˆ‘ä»¬äº†è§£äº†æ­£åˆ™åŒ–é¡¹æ˜¯å¦‚ä½•å½±å“åˆ°æ¨¡å‹çš„å¤æ‚åº¦çš„ã€‚\n æ€»ç»“ è®­ç»ƒæ¨¡å‹çš„ç›®çš„æ˜¯ä¸ºäº†ç»éªŒé£é™©æœ€å°åŒ–ï¼Œè€Œè¿‡äºè¿½æ±‚ç»éªŒé£é™©æœ€å°åŒ–ä¼šé€ æˆè¿‡æ‹Ÿåˆã€‚\n ä¸è®ºæ˜¯è¿‡æ‹Ÿåˆè¿˜æ˜¯æ¬ æ‹Ÿåˆï¼Œå…¶äº§ç”Ÿçš„åŸå› æ˜¯ç”±äºæ¨¡å‹å¤æ‚åº¦ä¸æ•°æ®é›†ä¸åŒ¹é…é€ æˆçš„ï¼Œè§£å†³æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š1.ä»æ•°æ®é›†å…¥æ‰‹ï¼ˆä¸æ¨èï¼‰ï¼›2.ä»æ¨¡å‹å¤æ‚åº¦å…¥æ‰‹ï¼ˆæ­£åˆ™åŒ–ï¼‰\n æ­£åˆ™åŒ–é€šè¿‡æ·»åŠ æ­£åˆ™é¡¹æ¥å¯¹æ¨¡å‹å¤æ‚åº¦åŠ ä»¥é™åˆ¶ï¼Œä»è€Œé¿å…è¿‡æ‹Ÿåˆ\n æ­£åˆ™åŒ–å¦‚ä½•å½±å“æ¨¡å‹å¤æ‚åº¦ï¼šLasso å›å½’ï¼ˆå…·æœ‰ç¨€ç–æ€§ï¼‰ä¸å²­å›å½’ï¼ˆä¸å…·æœ‰ç¨€ç–æ€§ï¼‰ã€‚\n å‚è€ƒ   ã€Šæœºå™¨å­¦ä¹ ã€‹å‘¨å¿—å\n  ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹PyTorch ç‰ˆï¼Œé˜¿æ–¯é¡¿Â·å¼ ã€ææ² https://tangshusen.me/Dive-into-DL-PyTorch/#/   ã€Šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ ã€‹é‚±é”¡é¹ https://nndl.github.io   æ¦‚ç‡è¿‘ä¼¼æ­£ç¡®ï¼Ÿï¼ï¼ˆPAC Learningï¼‰ - Haoran Jiangçš„æ–‡ç«  - çŸ¥ä¹ https://zhuanlan.zhihu.com/p/44589648   [è®¡ç®—å­¦ä¹ ç†è®º] PAC (Probably Approximately Correct)\n  ï¼ˆç†è®º+ä»£ç ï¼‰ç†è§£æ¨¡å‹æ­£åˆ™åŒ–ï¼šL1æ­£åˆ™ã€L2æ­£åˆ™ - é¥¼å¹²Japsonçš„æ–‡ç«  - çŸ¥ä¹ https://zhuanlan.zhihu.com/p/113373391   Lassoâ€”åŸç†åŠæœ€ä¼˜è§£ - é£ç£çš„æ–‡ç«  - çŸ¥ä¹ https://zhuanlan.zhihu.com/p/116869931   ","permalink":"https://yibocat.github.io/posts/dl/sdxx_3/","summary":"åœ¨å­¦ä¹ æ­£åˆ™åŒ–ä¹‹å‰ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹ç»éªŒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®ä¸è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆï¼Œç„¶åç»™å‡ºæ¨¡å‹å¤æ‚åº¦ç”¨æ¥åˆ¤å®šä¸€ä¸ªæ¨¡å‹çš„å¥½åï¼Œç„¶åå­¦ä¹ ç½‘ç»œæ­£åˆ™åŒ–ã€‚ ç»éªŒè¯¯å·®ä¸æ³›åŒ–","title":"[æ·±åº¦å­¦ä¹ ç¬”è®°] æ·±åº¦å­¦ä¹ ç¬¬ 3 ç¯‡â€”â€”ç½‘ç»œæ­£åˆ™åŒ–"},{"content":"å…¶å®æ„ŸçŸ¥æœºä¹Ÿå°±æ˜¯ä¸Šä¸€ç¯‡æ‰€è®²çš„æœ€ç®€å•çš„å•å±‚ç¥ç»ç½‘ç»œï¼Œå³ç®€å•çº¿æ€§å›å½’æ¨¡å‹ï¼Œä¹Ÿæ˜¯å±äºä¸€ä¸ªç®€å•äºŒåˆ†ç±»æˆ–å¤šåˆ†ç±»æ¨¡å‹ã€‚\næ¨¡å‹è®¾è®¡ å¤šå±‚æ„ŸçŸ¥æœºå°±æ˜¯åœ¨åŸæœ¬æ„ŸçŸ¥æœºçš„åŸºç¡€ä¸Šå¢åŠ äº†è‹¥å¹²å±‚éšè—å±‚ã€‚ç”±äºè¾“å…¥å±‚ä¸å‚ä¸åˆ°è®¡ç®—ï¼Œæ‰€ä»¥ä¸‹å›¾å±•ç¤ºçš„æ˜¯ä¸€ä¸ªäºŒå±‚çš„ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚\nå¯ä»¥çœ‹åˆ°ï¼Œè¯¥å¤šå±‚æ„ŸçŸ¥æœºåŒ…å« 5 ä¸ªéšè—å•å…ƒï¼Œå¹¶ä¸”éšè—å±‚ä¸­çš„æ¯ä¸ªå•å…ƒå’Œè¾“å…¥å±‚çš„å„ä¸ªè¾“å…¥æ˜¯å…¨è¿æ¥çš„ï¼Œè¾“å‡ºå±‚çš„ç¥ç»å…ƒå’Œéšè—å±‚ä¸­çš„å„ä¸ªå•å…ƒä¹Ÿæ˜¯å…¨è¿æ¥çš„ï¼Œæ‰€ä»¥å¤šå±‚æ„ŸçŸ¥æœºä¸­çš„éšè—å±‚å’Œè¾“å‡ºå±‚éƒ½æ˜¯å…¨è¿æ¥å±‚ã€‚\n æˆ‘ä»¬è®¾ä¸€ä¸ªå°æ‰¹é‡æ ·æœ¬ $X\\in \\mathbb{R}^{n\\times d}$ ï¼Œæ‰¹é‡å¤§å°ä¸º $n$ ï¼Œè¾“å…¥ä¸ªæ•°ä¸º $d$ ã€‚éšè—å±‚å±‚æ•°ä¸ºä¸€å±‚ï¼Œéšå±‚å•å…ƒæ•°ä¸º $h$ ï¼Œéšè—å±‚è¾“å‡ºä¸º $H\\in \\mathbb{R}^{n\\times h}$ ï¼ˆä¹Ÿå¯ä»¥è®°ä¸ºéšè—å±‚å˜é‡ï¼‰ã€‚\nè®¾éšè—å±‚æƒé‡å‚æ•°å’Œåå·®åˆ†åˆ«ä¸º $W_h\\in\\mathbb{R}^{d\\times h}$ å’Œ $b_h\\in\\mathbb{R}^{l \\times h}$ï¼Œè¾“å‡ºå±‚æƒé‡å’Œåå·®åˆ†åˆ«ä¸º $W_o\\in\\mathbb{R}^{h\\times q}$ å’Œ $b_o\\in\\mathbb{R}^{l\\times q}$ ã€‚ç”±çº¿æ€§å›å½’çš„å…¬å¼å¯ä»¥å¾—åˆ°å¤šå±‚æ„ŸçŸ¥æœºçš„è®¾è®¡æ¨¡å‹ $$ H=XW_h+b_h \\newline O=HW_o+b_o $$ å°†ä¸¤ä¸ªå¼å­è”ç«‹èµ·æ¥ï¼Œå¯ä»¥å¾—åˆ° $$ O = (XW_h+b_h)W_o+b_o = XW_hW_o+b_hW_o+b_o $$ å¯ä»¥çœ‹åˆ°ï¼Œå¤šå±‚æ„ŸçŸ¥æœºçš„æ¨¡å‹å…¶å®å’Œå•å±‚ç¥ç»ç½‘ç»œæ˜¯ç­‰ä»·çš„ï¼Œåªä¸è¿‡è¾“å‡ºå±‚æƒé‡å˜æˆäº† $W_hW_o$ ï¼Œåå·®å˜æˆäº† $b_hW_o+b_o$ ã€‚\næ¿€æ´»å‡½æ•° ç”±ä¸Šé¢çš„æ¨å¯¼æˆ‘ä»¬çŸ¥é“çº¿æ€§å˜æ¢åªæ˜¯å¯¹æ•°æ®è¿›è¡Œäº†ä»¿å°„å˜æ¢(affine transformation) ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥æ ¹æ®å…¶ä»¿å°„å˜æ¢å¾—åˆ°æƒ³è¦çš„è¾“å‡ºåˆ†ç±»ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥éçº¿æ€§å˜æ¢â€”â€”æ¿€æ´»å‡½æ•°ã€‚\nç¥ç»ç½‘ç»œä¸­æœ‰å¾ˆå¤šä¸åŒçš„æ¿€æ´»å‡½æ•°\n ReLUå‡½æ•°\nReLU å‡½æ•°ï¼ˆRectified Linear Unitï¼Œä¿®æ­£çº¿æ€§å•å…ƒï¼‰ï¼Œä¹Ÿå« Rectifier å‡½æ•°ï¼Œæ˜¯ç›®å‰æ·±åº¦ç¥ç»ç½‘ç»œä¸­ç»å¸¸ä½¿ç”¨çš„æ¿€æ´»å‡½æ•°ï¼Œè¯¥å‡½æ•°å®šä¹‰ä¸º $$ ReLU(x)=\\max(0,x) $$ å…¶å›¾åƒå¦‚ä¸‹æ‰€ç¤º\nå¯ä»¥çœ‹åˆ°ï¼Œå½“è¾“å…¥ä¸ºè´Ÿæ•°æ—¶å¯¼æ•°ä¸º 0 ï¼Œå½“è¾“å…¥ä¸ºæ­£æ•°æ—¶å¯¼æ•°ä¸º 1ã€‚\n Sigmoid å‡½æ•°\nSigmoid å‡½æ•°å¯ä»¥å°†å…ƒç´ çš„å€¼å˜æ¢åˆ° 0 å’Œ 1 ä¹‹é—´ï¼Œè¯¥å‡½æ•°å¦‚ä¸‹å®šä¹‰ï¼š $$ Sigmoid(x) = \\frac{1}{1+\\exp(-x)} $$ å…¶å›¾åƒå¦‚ä¸‹æ‰€ç¤º\n Tanh å‡½æ•°\nTanh å‡½æ•°æ˜¯ä¸€ç§ Sigmoid å‹å‡½æ•°ï¼Œä¹Ÿå«åšåŒæ­£åˆ‡å‡½æ•°ï¼Œå…¶å®šä¹‰ä¸º $$ tanh(x)=\\frac{\\exp(x)-\\exp(-x)}{\\exp(x)+\\exp(-x)} $$ Tanh å‡½æ•°å¯ä»¥çœ‹æˆæ˜¯æ”¾å¤§å¹¶å¹³ç§»çš„ Sigmoid å‡½æ•°ï¼Œå…¶å½¢çŠ¶å’Œ Sigmoid å‡½æ•°çœ‹èµ·æ¥å¾ˆåƒï¼Œä½†æ˜¯å€¼åŸŸæ˜¯ (-1,1)ã€‚\næˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ Logistic å‹ Sigmoid å‡½æ•°å’Œ Tanh å‡½æ•°çš„å›¾åƒ\nå¤šå±‚æ„ŸçŸ¥æœºåŠ å…¥æ¿€æ´»å‡½æ•° é€šè¿‡ä¸Šæ–‡å·²ç»çŸ¥é“ï¼Œå¤šå±‚æ„ŸçŸ¥æœºå°±æ˜¯å«æœ‰è‡³å°‘ä¸€ä¸ªéšè—å±‚çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œï¼Œæ¯ä¸ªéšè—å±‚çš„è¾“å‡ºç”±æ¿€æ´»å‡½æ•°è¿›è¡Œå˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¿€æ´»å‡½æ•°å®šä¹‰ä¸º $\\phi(x)$ ï¼Œé‚£ä¹ˆå¤šå±‚æ„ŸçŸ¥æœºçš„æ¨¡å‹å¦‚ä¸‹æ‰€ç¤º $$ H=\\phi(XW_h+b_h) \\newline O=HW_o+b_o $$ \næ‰‹åŠ¨å®ç° è¿™éƒ¨åˆ†å¯ä»¥å‚è€ƒåŸä¹¦https://tangshusen.me/Dive-into-DL-PyTorch/#/chapter03_DL-basics/3.9_mlp-scratch æˆ–è€… Github https://github.com/ShusenTang/Dive-into-DL-PyTorch/blob/master/code/chapter03_DL-basics/3.9_mlp-scratch.ipynb ã€‚\nè·å–æ•°æ®å’Œè¯»å–æ•°æ®ç›´æ¥ä½¿ç”¨åŸä¹¦ä¸­æ‰€ç»™çš„ Fashion-MNIST æ•°æ®é›†ï¼Œè¿™æ˜¯ä¸€ä¸ªå›¾åƒå¤šåˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å‡è®¾å°æ‰¹é‡æ•°æ®é›†çš„æ•°é‡ä¸º batch_size = 256 ï¼Œå¹¶ä¸”é€šè¿‡ d2l.load_data_fashion_mnist() æ–¹æ³•å¾—åˆ°äº†è®­ç»ƒæ•°æ®é›†åˆæµ‹è¯•æ•°æ®é›†ï¼Œè¯¥å‡½æ•°æ˜¯åŸä¹¦ä¸­å›¾åƒå¤šåˆ†ç±»é—®é¢˜çš„è¯»å–æ•°æ®é›†çš„å‡½æ•° ã€‚ä»£ç å¦‚ä¸‹\nbatch_size = 256 train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)  å®šä¹‰å‚æ•°æ¨¡å‹\nåŸæ•°æ®é›†ä¸­çš„å›¾åƒå½¢çŠ¶ä¸º 28$\\times$28 ï¼Œä¸€å…±æœ‰ 10 ä¸ªç±»åˆ«ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ $28\\times 28=784$ å‘é‡é•¿åº¦æ¥è¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚æ‰€ä»¥ è¾“å…¥ä¸ªæ•°ä¸º 784ï¼Œè¾“å‡ºä¸ªæ•°ä¸º 10ã€‚å› ä¸ºæˆ‘ä»¬çš„æ•°æ®é›†çš„å°æ‰¹é‡æ•°æ®æ•°ä¸º 256ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç½®éšè—å•å…ƒæ•°ä¸º 256ã€‚æ³¨æ„ï¼šéšè—å•å…ƒæ•°æ˜¯è¶…å‚æ•°ã€‚\nç„¶åå¯¹å‚æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚\nnum_inputs, num_outputs, num_hiddens = 784, 10, 256 W1 = torch.tensor(np.random.normal(0, 0.01, (num_inputs, num_hiddens)), dtype=torch.float) b1 = torch.zeros(num_hiddens, dtype=torch.float) W2 = torch.tensor(np.random.normal(0, 0.01, (num_hiddens, num_outputs)), dtype=torch.float) b2 = torch.zeros(num_outputs, dtype=torch.float) params = [W1, b1, W2, b2] for param in params: param.requires_grad_(requires_grad=True)  å®šä¹‰æ¿€æ´»å‡½æ•°\nPyTorch å·²ç»æœ‰äº† ReLU å‡½æ•°ï¼Œå®ç°èµ·æ¥å¾ˆç®€å•ã€‚åœ¨æ‰‹åŠ¨å®ç°æ—¶æˆ‘ä»¬æœ€å¥½è‡ªå·±å†™ã€‚\ndef relu(X): return torch.max(input=X, other=torch.tensor(0.0))  å®šä¹‰æ¨¡å‹\nå®šä¹‰æ¨¡å‹çš„ç¬¬ä¸€æ­¥éœ€è¦å°†æ¯å¼ å›¾åƒçš„å½¢çŠ¶æ”¹ä¸ºé•¿åº¦ä¸º num_inputs çš„å‘é‡ï¼Œä»¥æ–¹ä¾¿å°†å…¶å¯¼å…¥åˆ°è¾“å…¥å±‚ï¼Œç„¶åæ ¹æ®ä¸Šæ–‡ä¸­çš„è¡¨è¾¾å¼å»ºç«‹æ¨¡å‹\ndef net(X): X = X.view((-1, num_inputs)) H = relu(torch.matmul(X, W1) + b1) return torch.matmul(H, W2) + b2 .view() å‡½æ•°è¡¨ç¤ºé‡å¡‘å½¢çŠ¶ï¼Œè¿™ä¸ªå‡½æ•°å’Œ sklearn ä¸­çš„ reshape() çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œè€Œ view(-1,1) è¡¨ç¤ºé‡å¡‘æˆåˆ—å‘é‡ã€‚åŒç†ï¼Œview(1,-1) è¡¨ç¤ºé‡å¡‘æˆè¡Œå‘é‡ã€‚ è€Œ torch.matmul() æ˜¯çŸ©é˜µç›¸ä¹˜æ–¹æ³•ã€‚\n å®šä¹‰æŸå¤±å‡½æ•°\næŸå¤±å‡½æ•°ç›´æ¥ä½¿ç”¨ PyTorch ä¸­çš„äº¤å‰ç†µæŸå¤±å‡½æ•°\nloss = torch.nn.CrossEntropyLoss()  è®­ç»ƒæ¨¡å‹\næˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªè¶…å‚æ•°ï¼Œè¿­ä»£å‘¨æœŸå’Œå­¦ä¹ ç‡ï¼Œåˆ†åˆ«ä¸º 5 å’Œ 100.0\nnum_epochs, lr = 5, 100.0 # æœ¬å‡½æ•°å·²ä¿å­˜åœ¨d2lzhåŒ…ä¸­æ–¹ä¾¿ä»¥åä½¿ç”¨ def train_ch3(net, train_iter, test_iter, loss, num_epochs, batch_size, params=None, lr=None, optimizer=None): for epoch in range(num_epochs): train_l_sum, train_acc_sum, n = 0.0, 0.0, 0 for X, y in train_iter: y_hat = net(X) l = loss(y_hat, y).sum() # æ¢¯åº¦æ¸…é›¶ if optimizer is not None: optimizer.zero_grad() elif params is not None and params[0].grad is not None: for param in params: param.grad.data.zero_() l.backward() if optimizer is None: d2l.sgd(params, lr, batch_size) else: optimizer.step() # â€œsoftmaxå›å½’çš„ç®€æ´å®ç°â€ä¸€èŠ‚å°†ç”¨åˆ° train_l_sum += l.item() train_acc_sum += (y_hat.argmax(dim=1) == y).sum().item() n += y.shape[0] test_acc = evaluate_accuracy(test_iter, net) print(\u0026#39;epoch %d, loss %.4f, train acc %.3f, test acc %.3f\u0026#39; % (epoch + 1, train_l_sum / n, train_acc_sum / n, test_acc)) train_ch3(net, train_iter, test_iter, loss, num_epochs, batch_size, params, lr) æœ€åå¾—åˆ°è¾“å‡ºå¦‚ä¸‹\nepoch 1, loss 0.0030, train acc 0.714, test acc 0.753 epoch 2, loss 0.0019, train acc 0.821, test acc 0.777 epoch 3, loss 0.0017, train acc 0.842, test acc 0.834 epoch 4, loss 0.0015, train acc 0.857, test acc 0.839 epoch 5, loss 0.0014, train acc 0.865, test acc 0.845  å…¨éƒ¨æ‰‹å·¥å®ç°å¤šå±‚æ„ŸçŸ¥æœºå¦‚ä¸Šæ‰€ç¤ºï¼Œä½†æ˜¯è¿™æ ·æ‰‹åŠ¨å®ç°å…¶å®å¾ˆå®¹æ˜“å‡ºç°é”™è¯¯ï¼Œä¸”æ•ˆç‡ä¸é«˜ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ PyTorch æ›´ç®€æ´åœ°å®ç°å¤šå±‚æ„ŸçŸ¥æœºã€‚\n ç®€æ´å®ç° æ¨¡å‹å®šä¹‰\næ¨¡å‹å®šä¹‰å¯ä»¥ç›´æ¥ä½¿ç”¨ PyTorch ä¸­çš„ nn.Sequential æ¥å®ç°ã€‚\nnum_inputs, num_outputs, num_hiddens = 784, 10, 256 net = nn.Sequential( d2l.FlattenLayer(), nn.Linear(num_inputs, num_hiddens),\t# è¾“å…¥å±‚ nn.ReLU(),\t# æ¿€æ´»å‡½æ•° nn.Linear(num_hiddens, num_outputs), # è¾“å‡ºå±‚ ) for params in net.parameters():\t# åˆå§‹åŒ–å‚æ•° init.normal_(params, mean=0, std=0.01) æ¨¡å‹ä»ä¸Šå¾€ä¸‹ä¸ºè¾“å…¥å±‚ï¼Œæ¿€æ´»å‡½æ•°ï¼Œè¾“å‡ºå±‚ã€‚\n è¯»å–æ•°æ®è®­ç»ƒæ¨¡å‹\nè¿™é‡Œä¼˜åŒ–ç›´æ¥ä½¿ç”¨ Pytorch ä¸­çš„ SGD æ¢¯åº¦ä¸‹é™ç®—æ³•\nbatch_size = 256\t# å°æ‰¹é‡å¤§å°\\éšè—å•å…ƒæ•°é‡ train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)\t# è¯»å–æ•°æ® loss = torch.nn.CrossEntropyLoss()\t# æŸå¤±å‡½æ•° optimizer = torch.optim.SGD(net.parameters(), lr=0.5)\t# ä¼˜åŒ–æ–¹æ³• num_epochs = 5\t# è¿­ä»£å‘¨æœŸ train_ch3(net, train_iter, test_iter, loss, num_epochs, batch_size, None, None, optimizer)# è®­ç»ƒæ¨¡å‹ æœ€åè¾“å‡º\nepoch 1, loss 0.0030, train acc 0.712, test acc 0.744 epoch 2, loss 0.0019, train acc 0.823, test acc 0.821 epoch 3, loss 0.0017, train acc 0.844, test acc 0.842 epoch 4, loss 0.0015, train acc 0.856, test acc 0.842 epoch 5, loss 0.0014, train acc 0.864, test acc 0.818  å‚è€ƒ ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹PyTorch ç‰ˆ ã€Šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ ã€‹é‚±é”¡é¹æ•™æˆ ","permalink":"https://yibocat.github.io/posts/dl/sdxx_2/","summary":"å…¶å®æ„ŸçŸ¥æœºä¹Ÿå°±æ˜¯ä¸Šä¸€ç¯‡æ‰€è®²çš„æœ€ç®€å•çš„å•å±‚ç¥ç»ç½‘ç»œï¼Œå³ç®€å•çº¿æ€§å›å½’æ¨¡å‹ï¼Œä¹Ÿæ˜¯å±äºä¸€ä¸ªç®€å•äºŒåˆ†ç±»æˆ–å¤šåˆ†ç±»æ¨¡å‹ã€‚ æ¨¡å‹è®¾è®¡ å¤šå±‚æ„ŸçŸ¥æœºå°±æ˜¯åœ¨åŸæœ¬æ„ŸçŸ¥æœº","title":"[æ·±åº¦å­¦ä¹ ç¬”è®°] æ·±åº¦å­¦ä¹ ç¬¬ 2 ç¯‡â€”â€”å¤šå±‚æ„ŸçŸ¥æœº"},{"content":"çº¿æ€§æ¨¡å‹ï¼ˆLinear Modelï¼‰æ˜¯æœºå™¨å­¦ä¹ ä¸­åº”ç”¨æœ€å¹¿æ³›çš„æ¨¡å‹ï¼ŒæŒ‡é€šè¿‡æ ·æœ¬ç‰¹å¾çš„çº¿æ€§ç»„åˆæ¥è¿›è¡Œé¢„æµ‹çš„æ¨¡å‹ã€‚çº¿æ€§å›å½’æ˜¯å•å±‚ç¥ç»ç½‘ç»œï¼Œå…¶æ¶‰åŠçš„æ¦‚å¿µå’ŒæŠ€æœ¯é€‚ç”¨äºå¤§å¤šæ•°æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚\n çº¿æ€§å›å½’ æ¨¡å‹å®šä¹‰\nç»™å®šä¸€ä¸ª $ D $ ç»´æ ·æœ¬ $ x=[x_1,x_2,\\cdots,x_D]^T $ å…¶çº¿æ€§ç»„åˆå‡½æ•°ä¸º $$ f(x;\\omega)=\\omega^Tx+b $$ æˆ‘ä»¬è¯´ $ \\omega $ æ˜¯ä¸€ä¸ªæƒé‡çŸ©é˜µï¼ˆå¯ä»¥ç†è§£ä¸ºæ–œç‡ï¼‰ï¼Œ $ b $ ä¸ºåå·®ï¼ˆå¯ä»¥ç†è§£ä¸ºæˆªè·ï¼‰ï¼Œå…¶å‡ä¸ºæ ‡é‡ã€‚è¿™ä¸¤ä¸ªå‚æ•°ç§°ä¸ºçº¿æ€§å›å½’æ¨¡å‹çš„å‚æ•°ï¼Œè€Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯é€šè¿‡è®­ç»ƒæ¨¡å‹ï¼Œå¾—åˆ°æœ€ä½³çš„å‚æ•°ä¼°è®¡ã€‚\n æŸå¤±å‡½æ•°\næ¨¡å‹è®­ç»ƒå‡ºçš„é¢„æµ‹å€¼é€šå¸¸éœ€è¦å’ŒçœŸå®å€¼è¿›è¡Œæ¯”å¯¹ï¼Œè¿™ç§æ¯”å¯¹ä¹Ÿå°±æ˜¯è¯¯å·®ã€‚åœ¨æœºå™¨å­¦ä¹ é‡ŒæŠŠè¡¡é‡è¯¯å·®çš„å‡½æ•°ç§°ä¸ºæŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å¹³æ–¹è¯¯å·®å‡½æ•°ï¼Œå•ä¸ªæ ·æœ¬çš„å¹³æ–¹æŸå¤±å‡½æ•°å¯ä»¥å¦‚ä¸‹è¡¨ç¤º $$ l^{(i)}(\\omega,b) = \\frac{1}{2}(\\hat{y}-y)^2 $$ è¿™é‡Œ $ \\hat{y} $ è¡¨ç¤ºè®­ç»ƒçš„é¢„æµ‹å€¼ï¼Œ$ y $ è¡¨ç¤ºçœŸå®å€¼ï¼Œ$ \\frac{1}{2} $ æ˜¯ä¸ºäº†åœ¨æ±‚å¯¼æ—¶æ–¹ä¾¿åŒ–ç®€ã€‚è®­ç»ƒé›†ä¸­æ‰€æœ‰æ ·æœ¬çš„è¯¯å·®çš„å¹³å‡æ¥è¡¡é‡æ¨¡å‹é¢„æµ‹çš„è´¨é‡ï¼Œå³ $$ l(\\omega,b)=\\frac{1}{n}\\sum_{i=1}^nl^{(i)}(\\omega,b) $$ æ­£å¦‚ä¸Šæ–‡æåˆ°çš„ï¼Œæ·±åº¦å­¦ä¹ çš„ä»»åŠ¡å°±æ˜¯æ‰¾åˆ°ä¸€ç»„æ¨¡å‹å‚æ•°ï¼Œä½¿å¾—è®­ç»ƒæ ·æœ¬çš„æŸå¤±æœ€å°ã€‚\n ç®—æ³•ä¼˜åŒ–\næ±‚è§£æ•°å€¼è§£çš„ä¼˜åŒ–ç®—æ³•ä¸­ï¼Œå°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼ˆmini-batch stochastic gradient descent åœ¨æ·±åº¦å­¦ä¹ ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚\n å½“æ¨¡å‹å’ŒæŸå¤±å‡½æ•°å½¢å¼è¾ƒä¸ºç®€å•æ—¶ï¼Œä¸Šé¢çš„è¯¯å·®æœ€å°åŒ–é—®é¢˜çš„è§£å¯ä»¥ç›´æ¥ç”¨å…¬å¼è¡¨è¾¾å‡ºæ¥ã€‚è¿™ç±»è§£å«ä½œè§£æè§£ï¼ˆanalytical solutionï¼‰ã€‚æœ¬èŠ‚ä½¿ç”¨çš„çº¿æ€§å›å½’å’Œå¹³æ–¹è¯¯å·®åˆšå¥½å±äºè¿™ä¸ªèŒƒç•´ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°æ·±åº¦å­¦ä¹ æ¨¡å‹å¹¶æ²¡æœ‰è§£æè§£ï¼Œåªèƒ½é€šè¿‡ä¼˜åŒ–ç®—æ³•æœ‰é™æ¬¡è¿­ä»£æ¨¡å‹å‚æ•°æ¥å°½å¯èƒ½é™ä½æŸå¤±å‡½æ•°çš„å€¼ã€‚è¿™ç±»è§£å«ä½œæ•°å€¼è§£ï¼ˆnumerical solutionï¼‰ã€‚\n åœ¨çº¿æ€§å›å½’æ¨¡å‹ä¸­ï¼Œæ¨¡å‹çš„æ¯ä¸ªå‚æ•°çš„è¿­ä»£å¦‚ä¸‹æ‰€ç¤º: $$ \\omega \\gets \\omega-\\frac{\\eta}{|\\mathcal{B}|}\\sum_{i\\in\\mathcal{B}}\\frac{\\partial l^{(i)}(\\omega,b)}{\\partial \\omega} \\newline b\\gets b-\\frac{\\eta}{|\\mathcal{B}|}\\sum_{i\\in\\mathcal{B}}\\frac{\\partial l^{(i)}(\\omega,b)}{\\partial b} $$ è¿™é‡Œ $ |\\mathcal{B}| $ è¡¨ç¤ºæ¯ä¸ªå°æ‰¹é‡çš„æ ·æœ¬ä¸ªæ•°ï¼Œ$\\eta$ ä¸ºå­¦ä¹ ç‡ã€‚è€Œè¿™é‡Œçš„å°æ‰¹é‡æ ·æœ¬æ•°å’Œå­¦ä¹ ç‡æ˜¯äººä¸ºè®¾å®šçš„è€Œä¸æ˜¯å­¦ä¹ å¾—æ¥çš„ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºè¶…å‚æ•°ï¼ˆhyperparameterï¼‰ã€‚\n çº¿æ€§å›å½’å®ç°  çº¿æ€§å›å½’çš„å®ç°æ€»ä½“ä¸Šåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n æ•°æ®é›†çš„å‡†å¤‡ åˆå§‹åŒ–æ¨¡å‹å‚æ•° å®šä¹‰æ¨¡å‹ å®šä¹‰æŸå¤±å‡½æ•° å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€ è®­ç»ƒæ¨¡å‹  åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”Ÿæˆç‰¹å¾æ ‡ç­¾çš„æ•£ç‚¹å›¾ï¼Œè¿™æ ·å¯ä»¥æ›´ç›´æ¥åœ°è§‚å¯Ÿä¸¤è€…é—´çš„çº¿æ€§å…³ç³»ã€‚\ndef use_svg_display(): # ç”¨çŸ¢é‡å›¾æ˜¾ç¤º display.set_matplotlib_formats(\u0026#39;svg\u0026#39;) def set_figsize(figsize=(3.5, 2.5)): use_svg_display() # è®¾ç½®å›¾çš„å°ºå¯¸ plt.rcParams[\u0026#39;figure.figsize\u0026#39;] = figsize #æ‰“å°æ•£ç‚¹å›¾ set_figsize() plt.scatter(features[:, 1].numpy(), labels.numpy(), 1);  è¯»å–æ•°æ®\nè®­ç»ƒæ¨¡å‹çš„æ—¶å€™éœ€è¦ä¸æ–­è¯»å–å°æ‰¹é‡æ•°æ®æ ·æœ¬ï¼Œæ‰€ä»¥å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥è¿”å›å°æ‰¹é‡çš„éšæœºæ ·æœ¬çš„ç‰¹å¾å’Œæ ‡ç­¾\ndef data_iter(batch_size, features, labels): # batch_size è¡¨ç¤ºæ‰¹é‡å¤§å° num_examples = len(features) indices = list(range(num_examples)) random.shuffle(indices) # æ ·æœ¬çš„è¯»å–é¡ºåºæ˜¯éšæœºçš„ for i in range(0, num_examples, batch_size): j = torch.LongTensor(indices[i: min(i + batch_size, num_examples)]) # æœ€åä¸€æ¬¡å¯èƒ½ä¸è¶³ä¸€ä¸ªbatch yield features.index_select(0, j), labels.index_select(0, j) batch_size = 10 for X, y in data_iter(batch_size, features, labels): # æ‰“å° print(X, y) break  åˆå§‹åŒ–æ¨¡å‹å‚æ•°\næƒé‡åˆå§‹åŒ–æˆå‡å€¼ä¸º 0 ï¼Œæ ‡å‡†å·®ä¸º 0.01 çš„æ­£å¤ªéšæœºæ•°ï¼Œåå·®åˆå§‹åŒ–ä¸º 0ã€‚ç„¶åå› ä¸ºå‚æ•°éœ€è¦æ±‚æ¢¯åº¦æ¥è¿­ä»£ï¼Œæ‰€ä»¥è®¾ç½® requires_grad=Trueã€‚\nw = torch.tensor(np.random.normal(0, 0.01, (num_inputs, 1)), dtype=torch.float32) b = torch.zeros(1, dtype=torch.float32) w.requires_grad_(requires_grad=True) b.requires_grad_(requires_grad=True)  å®šä¹‰æ¨¡å‹\næˆ‘ä»¬å·²ç»çŸ¥é“äº†çº¿æ€§å›å½’çš„æ¨¡å‹è¡¨è¾¾å¼ï¼Œä½¿ç”¨ torch.mm è¿›è¡ŒçŸ©é˜µä¹˜æ³•è¿ç®—\ndef linreg(X, w, b): return torch.mm(X, w) + b  å®šä¹‰æŸå¤±å‡½æ•°\næŸå¤±å‡½æ•°æˆ‘ä»¬ä½¿ç”¨å¹³æ–¹æŸå¤±å‡½æ•°ã€‚æ³¨æ„ï¼šç”±äº $\\hat{y}-y$ ä¸­ï¼Œ$\\hat{y}$ å’Œ $y$ çš„å½¢çŠ¶æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ y.view å°† $y$ çš„å½¢çŠ¶å˜æˆé¢„æµ‹å€¼ $\\hat{y}$ çš„å½¢çŠ¶ã€‚\ndef squared_loss(y_hat, y): # æ³¨æ„è¿™é‡Œè¿”å›çš„æ˜¯å‘é‡, å¦å¤–, pytorché‡Œçš„MSELosså¹¶æ²¡æœ‰é™¤ä»¥ 2 return (y_hat - y.view(y_hat.size())) ** 2 / 2  å®šä¹‰ä¼˜åŒ–ç®—æ³•\nä¼˜åŒ–ç®—æ³•æ ¹æ®ä¸Šæ–‡æåˆ°çš„ä½¿ç”¨å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œå…¶é€šè¿‡ä¸æ–­è¿­ä»£æ¨¡å‹å‚æ•°æ¥ä¼˜åŒ–æŸå¤±å‡½æ•°ã€‚è¿™é‡Œ lr ä¸ºè¿­ä»£æ­¥é•¿ã€‚\ndef sgd(params, lr, batch_size): for param in params: param.data -= lr * param.grad / batch_size # æ³¨æ„è¿™é‡Œæ›´æ”¹paramæ—¶ç”¨çš„param.data  è®­ç»ƒæ¨¡å‹\nlr = 0.03\t# è¿­ä»£æ­¥é•¿ num_epochs = 3\t# è¿­ä»£å‘¨æœŸ net = linreg\t# ä½¿ç”¨çº¿æ€§æ¨¡å‹ loss = squared_loss\t# æŸå¤±å‡½æ•° for epoch in range(num_epochs): # è®­ç»ƒæ¨¡å‹ä¸€å…±éœ€è¦num_epochsä¸ªè¿­ä»£å‘¨æœŸ # åœ¨æ¯ä¸€ä¸ªè¿­ä»£å‘¨æœŸä¸­ï¼Œä¼šä½¿ç”¨è®­ç»ƒæ•°æ®é›†ä¸­æ‰€æœ‰æ ·æœ¬ä¸€æ¬¡ï¼ˆå‡è®¾æ ·æœ¬æ•°èƒ½å¤Ÿè¢«æ‰¹é‡å¤§å°æ•´é™¤ï¼‰ã€‚X # å’Œyåˆ†åˆ«æ˜¯å°æ‰¹é‡æ ·æœ¬çš„ç‰¹å¾å’Œæ ‡ç­¾ for X, y in data_iter(batch_size, features, labels): l = loss(net(X, w, b), y).sum() # læ˜¯æœ‰å…³å°æ‰¹é‡Xå’Œyçš„æŸå¤± l.backward() # å°æ‰¹é‡çš„æŸå¤±å¯¹æ¨¡å‹å‚æ•°æ±‚æ¢¯åº¦ sgd([w, b], lr, batch_size) # ä½¿ç”¨å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™è¿­ä»£æ¨¡å‹å‚æ•° # ä¸è¦å¿˜äº†æ¢¯åº¦æ¸…é›¶ w.grad.data.zero_() b.grad.data.zero_() train_l = loss(net(features, w, b), labels) print(\u0026#39;epoch %d, loss %f\u0026#39; % (epoch + 1, train_l.mean().item())) è¿™é‡Œæˆ‘ä»¬è®¾ç½®è¿­ä»£æ­¥é•¿ä¸º 0.03ï¼Œè¿­ä»£å‘¨æœŸä¸º 3ï¼Œæ¯æ¬¡è¿­ä»£å‘¨æœŸä¸­éƒ½ä¼šé€šè¿‡ data_iter è¯»å–å°æ‰¹é‡æ•°æ®æ ·æœ¬ï¼Œç„¶åè®¾ç½®æŸå¤±å‡½æ•°æ—¶ï¼Œç”±äº l å¹¶ä¸æ˜¯æ ‡é‡ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ sum() æ–¹æ³•æ±‚å’Œå¾—åˆ°æ ‡é‡ï¼Œå†ä½¿ç”¨ l.backward() å¾—åˆ°æ¨¡å‹å‚æ•°çš„æ¢¯åº¦ï¼Œç„¶åä½¿ç”¨å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™æ³•è¿­ä»£æ¨¡å‹å‚æ•°ã€‚æ³¨æ„ï¼šæ¯æ¬¡è¿­ä»£å®Œéœ€è¦å¯¹æ¢¯åº¦æ¸…é›¶ã€‚\n ä»¥ä¸Šå°±æ˜¯å…¨äººå·¥å®ç°äº†ä¸€ä¸ªç®€å•çš„çº¿æ€§å›å½’æ¨¡å‹ã€‚å½“ç„¶ï¼ŒPyTorch æä¾›äº†ç®€ä¾¿çš„æ¨¡å‹æ„é€ æ–¹æ³•å’Œå¤šç§æŸå¤±å‡½æ•°ã€‚\n çº¿æ€§å›å½’ç®€æ´å®ç°  è¯»å–æ•°æ®\nPyTorch æä¾›äº† data åŒ…è¯»å–æ•°æ®ã€‚\nimport torch.utils.data as Data batch_size = 10 # å°†è®­ç»ƒæ•°æ®çš„ç‰¹å¾å’Œæ ‡ç­¾ç»„åˆ dataset = Data.TensorDataset(features, labels) # éšæœºè¯»å–å°æ‰¹é‡ data_iter = Data.DataLoader(dataset, batch_size, shuffle=True) for X, y in data_iter: # æ‰“å° print(X, y) break  å®šä¹‰æ¨¡å‹\nPyTorch æä¾›äº†å¤§é‡é¢„å®šä¹‰çš„å±‚ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¾ˆç®€æ´çš„å®ç°æ¨¡å‹çš„æ„é€ ã€‚\nå¯¼å…¥ torch.nn æ¨¡å—ï¼Œnnçš„æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯ Module ã€‚Module æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œæ—¢å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå±‚ï¼Œåˆå¯ä»¥è¡¨ç¤ºä¸€ä¸ªå¾ˆå¤šå±‚çš„ç¥ç»ç½‘ç»œï¼Œå…¶å®å®ƒæœ¬èº«å°±æ˜¯æ‰€æœ‰å±‚çš„ä¸€ä¸ªåŸºç±»ã€‚\nclass LinearNet(nn.Module): def __init__(self, n_feature): super(LinearNet, self).__init__() self.linear = nn.Linear(n_feature, 1) # forward å®šä¹‰å‰å‘ä¼ æ’­ def forward(self, x): y = self.linear(x) return y net = LinearNet(num_inputs) print(net) # ä½¿ç”¨printå¯ä»¥æ‰“å°å‡ºç½‘ç»œçš„ç»“æ„ forward() å®šä¹‰äº†æ¨¡å‹çš„å‰å‘ä¼ æ’­è®¡ç®—æ–¹å¼ã€‚\nå…¶å® PyTorch è¿˜æœ‰æ›´åŠ ç®€ä¾¿çš„ç½‘ç»œæ­å»ºæ–¹æ³•ï¼Œå¦‚ nn.Sequential, è¿™é‡Œä¸å†èµ˜è¿°ã€‚\nnet = nn.Sequential( nn.Linear(num_inputs, 1) # æ­¤å¤„è¿˜å¯ä»¥ä¼ å…¥å…¶ä»–å±‚ )  åˆå§‹åŒ–æ¨¡å‹å‚æ•°\nPyTorch åœ¨ init æ¨¡å—ä¸­æä¾›äº†å¾ˆå¤šå‚æ•°åˆå§‹åŒ–çš„æ–¹æ³•ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡ init.normal_ å°†æƒé‡å‚æ•°æ¯ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸ºéšæœºé‡‡æ ·äºå‡å€¼ä¸º0ã€æ ‡å‡†å·®ä¸º0.01çš„æ­£æ€åˆ†å¸ƒï¼Œåå·®ä¼šåˆå§‹åŒ–ä¸ºé›¶ã€‚\nfrom torch.nn import init init.normal_(net[0].weight, mean=0, std=0.01) init.constant_(net[0].bias, val=0) # ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹biasçš„data: net[0].bias.data.fill_(0)  å®šä¹‰æŸå¤±å‡½æ•°\nloss = nn.MSELoss()  å®šä¹‰ä¼˜åŒ–ç®—æ³•\ntorch.optimæ¨¡å—æä¾›äº†å¾ˆå¤šå¸¸ç”¨çš„ä¼˜åŒ–ç®—æ³•æ¯”å¦‚SGDã€Adamå’ŒRMSPropç­‰ï¼Œæ‰€ä»¥ä¸ç”¨å†è‡ªå·±å®ç°å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•äº†ã€‚\nimport torch.optim as optim optimizer = optim.SGD(net.parameters(), lr=0.03) print(optimizer) è¾“å‡ºï¼š\nSGD ( Parameter Group 0 dampening: 0 lr: 0.03 momentum: 0 nesterov: False weight_decay: 0 )  è®­ç»ƒæ¨¡å‹\nnum_epochs = 3 for epoch in range(1, num_epochs + 1): for X, y in data_iter: output = net(X) l = loss(output, y.view(-1, 1)) optimizer.zero_grad() # æ¢¯åº¦æ¸…é›¶ï¼Œç­‰ä»·äºnet.zero_grad() l.backward() optimizer.step() print(\u0026#39;epoch %d, loss: %f\u0026#39; % (epoch, l.item()))  ä»¥ä¸Šå°±æ˜¯å…³äºç®€å•çº¿æ€§æ¨¡å‹çš„å®ç°ï¼ŒåŒ…æ‹¬æ‰€æœ‰ä»£ç çš„æ‰‹å·¥å®ç°ä»¥åŠä½¿ç”¨ PyTorch æä¾›çš„æ¨¡å—çš„å®ç°ã€‚å†…å®¹åŸºæœ¬ä¸Šéƒ½æ˜¯æ ¹æ®ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ï¼ˆPyTorchç‰ˆï¼‰æ¥ç¼–å†™çš„ï¼Œä»£ç ä¹Ÿæ˜¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåº”è¯¥å°½å¯èƒ½é‡‡ç”¨çŸ¢é‡è®¡ç®—ï¼Œä»¥æå‡è®¡ç®—æ•ˆç‡ã€‚torch.utils.dataæ¨¡å—æä¾›äº†æœ‰å…³æ•°æ®å¤„ç†çš„å·¥å…·ï¼Œtorch.nnæ¨¡å—å®šä¹‰äº†å¤§é‡ç¥ç»ç½‘ç»œçš„å±‚ï¼Œtorch.nn.initæ¨¡å—å®šä¹‰äº†å„ç§åˆå§‹åŒ–æ–¹æ³•ï¼Œtorch.optimæ¨¡å—æä¾›äº†å¾ˆå¤šå¸¸ç”¨çš„ä¼˜åŒ–ç®—æ³•ã€‚\n å‚è€ƒ ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹(PyTorch) ","permalink":"https://yibocat.github.io/posts/dl/sdxx_1/","summary":"çº¿æ€§æ¨¡å‹ï¼ˆLinear Modelï¼‰æ˜¯æœºå™¨å­¦ä¹ ä¸­åº”ç”¨æœ€å¹¿æ³›çš„æ¨¡å‹ï¼ŒæŒ‡é€šè¿‡æ ·æœ¬ç‰¹å¾çš„çº¿æ€§ç»„åˆæ¥è¿›è¡Œé¢„æµ‹çš„æ¨¡å‹ã€‚çº¿æ€§å›å½’æ˜¯å•å±‚ç¥ç»ç½‘ç»œï¼Œå…¶æ¶‰åŠçš„æ¦‚","title":"[æ·±åº¦å­¦ä¹ ç¬”è®°] æ·±åº¦å­¦ä¹ ç¬¬ 1 ç¯‡â€”â€”ç®€å•çº¿æ€§å›å½’"},{"content":"æœ¬æ–‡é€šè¿‡æ­å»ºä¸€ä¸ªç®€å•çš„è¿œç¨‹ Jupyter æœåŠ¡ç«¯ï¼Œå¯ä»¥å®ç°ä¸åˆ†åœºåˆä¸æ—¶é—´è¿è¡Œä»£ç ï¼Œæˆ–è€…è¯´æ˜¯å±•ç¤ºä»£ç ï¼Œè¿™æä¾›äº†æå¤§çš„æ–¹ä¾¿ã€‚\næ­å»º Jupyter æœåŠ¡å™¨ ssh è¿œç¨‹ç™»å½•æœåŠ¡å™¨\nssh root@xxx.xxx.xxx.xxx ä¸‹è½½å¹¶å®‰è£… miniconda\nwget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh bash Miniconda3-latest-Linux-x86_64.sh ç„¶åè®¾ç½®è™šæ‹Ÿ conda ç¯å¢ƒï¼Œè¿™é‡Œæˆ‘ä»¬çš„ç¯å¢ƒä½¿ç”¨ python 3.9\nconda create -n myenvname python=3.9 åˆ‡æ¢ç¯å¢ƒä¸åœç”¨ç¯å¢ƒ\nconda activate myenvname conda deactivate å®‰è£… Jupyter å’Œé…ç½® å®‰è£… jupyter\nconda install -c conda-forge jupyterlab ç”Ÿæˆé…ç½®æ–‡ä»¶\njupyter notebook --generate-config è¿›å…¥ IPython ï¼Œè®¾ç½®è®°ä½å“ˆå¸Œå¯†ç ï¼ˆè¿™é‡Œä¼šå°†ç™»å½•å¯†ç è½¬æ¢ä¸ºå“ˆå¸Œå¯†ç ï¼‰\nIpython In[1]: from notebook.auth import passwd In[2]: passwd() Enter password: Verify password: Out[2]: \u0026#39;argon2:$argon2id$v=19$m=10240,t=10,p=8$1Hk7hXkmqH0KUC3JswHy8A$W2Ya\u0026#39; In[3]: exit ä¿®æ”¹é…ç½®æ–‡ä»¶ é€šè¿‡ FTP ç™»å½•åˆ°æœåŠ¡å™¨ï¼Œæ‰¾åˆ°é…ç½®æ–‡ä»¶ jupyter_notebook_config.py ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹åˆ°æ–‡ä»¶æœ«å°¾\nc.NotebookApp.password = u\u0026#39;argon2:$argon2id$v=19$m=10240,t=10,p=8$1Hk7hXkmqH0KUC3JswHy8A$W2Ya\u0026#39; #å°±æ˜¯åˆšæ‰éœ€è¦è®°ä¸‹çš„å“ˆå¸Œå¯†ç  c.NotebookApp.port = 9999 #æŒ‡å®šjupyter lab è¿è¡Œç«¯å£ï¼Œå†™ä¸€ä¸ªä¸å†²çªçš„ç«¯å£å³å¯  c.NotebookApp.allow_remote_access = True # å…è®¸è¿œç¨‹è®¿é—®  c.NotebookApp.ip=\u0026#39;*\u0026#39; # å°±æ˜¯è®¾ç½®æ‰€æœ‰ipçš†å¯è®¿é—®  c.NotebookApp.open_browser = False # ç¦æ­¢è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨   æ³¨æ„ï¼šè¿™é‡Œéœ€è¦å°†ç«¯å£æ”¾è¡Œï¼Œå¦åˆ™æ— æ³•è¿æ¥ç™»å½•\n æœåŠ¡å™¨å¼€å¯ Jupyterlab è¾“å…¥ä»£ç æ‰“å¼€ Jupyterlab\njupyter lab --allow-root æ­¤æ—¶å·²ç»å¯ä»¥åœ¨æµè§ˆå™¨ä¸ŠæŸ¥çœ‹è¿œç¨‹ Jupyterlab äº†ï¼Œä½†æ˜¯å½“å…³é—­ç»ˆç«¯æ—¶ Jupyter ä¹Ÿä¼šç›¸åº”å…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®© Jupyter ä¿æŒåœ¨åå°è¿è¡Œ\nåå°è¿è¡Œï¼Œå¹¶å°†æ ‡å‡†è¾“å‡ºå†™å…¥åˆ° jupyter.log ä¸­\nnohup jupyter notebook --allow-root \u0026gt; jupyter.log 2\u0026gt;\u0026amp;1 \u0026amp; nohup jupyter lab --allow-root \u0026gt; jupyter.log 2\u0026gt;\u0026amp;1 \u0026amp; nobup è¡¨ç¤º no hang upï¼Œå°±æ˜¯ä¸æŒ‚èµ·ï¼Œé€€å‡ºç»ˆç«¯åä¾ç„¶å¯ä»¥è¿è¡Œã€‚\nç„¶åæ‰¾åˆ° jupyter è¿›ç¨‹ï¼Œç»ˆæ­¢è¯¥è¿›ç¨‹\nps -a kill -9 pid æµè§ˆå™¨ä¸­è¾“å…¥ xxx.xxx.xxx.xxx:9999 è¿›å…¥ jupyter notebook\næµè§ˆå™¨ä¸­è¾“å…¥ xxx.xxx.xxx.xxx:9999/lab è¿›å…¥ jupyterlab\næ—¥å¸¸ç™»é™† Jupyter åŠæœåŠ¡å™¨æ“ä½œ è¿œç¨‹ç™»å½•æœåŠ¡å™¨\nssh root@xxx.xxx.xxx.xxx åˆ‡æ¢ç¯å¢ƒ\nconda activate myenvname è¿è¡Œ jupyterlab\njupyter lab --allow-root éæŒ‚èµ·è¿è¡Œ JupyterLab ï¼ˆå¯å…³é—­ç»ˆç«¯ï¼‰\nnohup jupyter notebook --allow-root \u0026gt; jupyter.log 2\u0026gt;\u0026amp;1 \u0026amp; nohup jupyter lab --allow-root \u0026gt; jupyter.log 2\u0026gt;\u0026amp;1 \u0026amp; æŸ¥çœ‹è¿è¡Œè¿›ç¨‹ï¼Œå¹¶æ€æ­»è¿›ç¨‹\nps -a kill 1000 æµè§ˆå™¨ä¸­è¾“å…¥ xxx.xxx.xxx.xxx:9999 è¿›å…¥ jupyter notebook\næµè§ˆå™¨ä¸­è¾“å…¥ xxx.xxx.xxx.xxx:9999/lab è¿›å…¥ jupyterlab\n","permalink":"https://yibocat.github.io/posts/fwq/fwq_jupyter/","summary":"\u003cp\u003eæœ¬æ–‡é€šè¿‡æ­å»ºä¸€ä¸ªç®€å•çš„è¿œç¨‹ \u003ccode\u003eJupyter\u003c/code\u003e æœåŠ¡ç«¯ï¼Œå¯ä»¥å®ç°ä¸åˆ†åœºåˆä¸æ—¶é—´è¿è¡Œä»£ç ï¼Œæˆ–è€…è¯´æ˜¯å±•ç¤ºä»£ç ï¼Œè¿™æä¾›äº†æå¤§çš„æ–¹ä¾¿ã€‚\u003c/p\u003e","title":"[Python ç¬”è®°æœ¬] è¿œç¨‹æ­å»º jupyter æœåŠ¡å™¨"},{"content":"Mac OS çš„æ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹éƒ½æœ‰ä¸€ä¸ªéšè—æ–‡ä»¶ .DS_Storeï¼Œè¯¥æ–‡ä»¶ä¿å­˜çš„æ˜¯å½“å‰æ–‡ä»¶å¤¹çš„å±æ€§ï¼Œå¦‚å›¾æ ‡ä½ç½®ã€èƒŒæ™¯ç­‰ã€‚\nä½†æ˜¯æ¯æ¬¡ä½¿ç”¨ Git æäº¤æ›´æ”¹æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆ .DS_Store æ›´æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡æäº¤åˆ°ç‰ˆæœ¬åº“å’Œ push åˆ° Github æ€»æ˜¯å¾ˆéº»çƒ¦ã€‚æ‰€ä»¥ .DS_Store æ˜¯æ²¡æœ‰å¿…è¦æäº¤åˆ°ç‰ˆæœ¬åº“çš„ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ git.gitignore æ¥å¿½ç•¥æ­¤ç±»æ–‡ä»¶ã€‚\nå¿½ç•¥å½“å‰ç›®å½•ä¸‹çš„ .DS_Store æˆ‘ä»¬åœ¨æ‰€è¦å¿½ç•¥ .DS_Store çš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª .gitignore æ–‡ä»¶ï¼Œç„¶åå°†è¦å¿½ç•¥çš„æ–‡ä»¶åå†™å…¥è¿›å»\ntouch .gitignore æ¯æ¬¡å¿½ç•¥ä»»ä½•æ–‡ä»¶åªéœ€å°†è¦å¿½ç•¥çš„æ–‡ä»¶æ·»åŠ åˆ° .gitignore æ–‡ä»¶å°±å¯ä»¥äº†ã€‚\nä½†æ˜¯æ¯æ¬¡æ›´æ”¹å®Œ .gitignore æ–‡ä»¶ä¹‹åï¼Œéƒ½éœ€è¦è¿è¡Œä»¥ä¸‹ä»£ç ï¼Œå¦åˆ™ .gitignore æ˜¯ä¸ç”Ÿæ•ˆçš„\ngit rm -r --cached . git add . git commit -m \u0026#39;update .gitignore\u0026#39; git å…¨å±€å¿½ç•¥ é¦–å…ˆåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹ä»£ç æŸ¥çœ‹ git ç°æœ‰çš„å…¨å±€é…ç½®\ngit config --list git å…¨å±€é…ç½®éƒ½åœ¨ä¸€ä¸ª .gitconfig æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ git å…¨å±€é…ç½®è¿›è¡Œå…¨å±€å¿½ç•¥ .DS_Store ã€‚\nå…·ä½“æ­¥éª¤æ˜¯åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª .gitignore_global æ–‡ä»¶ï¼ŒæŠŠè¦å¿½ç•¥çš„æ–‡ä»¶ç›´æ¥æ·»åŠ åˆ°è¯¥æ–‡ä»¶ä¸­ï¼Œå’Œä¸Šæ–‡ä¸­çš„å½“å‰ç›®å½•æ·»åŠ æ˜¯ä¸€æ ·çš„\nç„¶ååœ¨ç»ˆç«¯è¾“å…¥\ngit config --global core.excludesfile/Users/reon/.gitignore_global æˆ–è€…ç›´æ¥åœ¨ .gitconfig ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹\n[core] excludefile = /Users/xiaqunfeng/.gitignore_global å‚è€ƒ  http://xiaqunfeng.cc/2018/04/24/git-ignore-ds-store/#%E5%88%A0%E9%99%A4github%E4%B8%8A%E6%96%87%E4%BB%B6  https://blog.csdn.net/allanGold/article/details/73132606  ","permalink":"https://yibocat.github.io/posts/git/git_ignore/","summary":"\u003cp\u003eMac OS çš„æ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹éƒ½æœ‰ä¸€ä¸ªéšè—æ–‡ä»¶ .DS_Storeï¼Œè¯¥æ–‡ä»¶ä¿å­˜çš„æ˜¯å½“å‰æ–‡ä»¶å¤¹çš„å±æ€§ï¼Œå¦‚å›¾æ ‡ä½ç½®ã€èƒŒæ™¯ç­‰ã€‚\u003c/p\u003e","title":"[Git æ—¥è®°] Git å¿½ç•¥ .DS_Store ä¸å…¨å±€å¿½ç•¥"},{"content":"åšå®¢æ˜¯å»ºå¥½äº†ï¼Œä½†æ˜¯æ€»æ˜¯æƒ³æ·»åŠ ä¸€ä¸ªä»£ç ä¸€é”®å¤åˆ¶çš„åŠŸèƒ½ã€‚ä¸€å¼€å§‹æ˜¯æƒ³å» html æ ‡ç­¾ä¸­ç›´æ¥æ·»åŠ ä¸€ä¸ª button ï¼Œä½†æ˜¯å‘ç°å¥½åƒå¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚æŸ¥é˜…äº† Hugo çš„å†…ç½®åŠŸèƒ½ä¹Ÿæ²¡æœ‰å‘ç°ï¼Œå¾ˆå¹¸è¿æ‰¾åˆ°äº†ä¸€ç¯‡åšå®¢ é»„å¿ å¾·çš„åšå®¢ ï¼Œæ­£å¥½è§£å†³äº†æˆ‘çš„éœ€æ±‚ã€‚æ‰€ä»¥ä¹Ÿè®°å½•ä¸€ä¸‹ã€‚\næ€è€ƒ æˆ‘ä»¬çŸ¥é“ï¼Œä»£ç ç‰‡æ®µæ˜¯ä½¿ç”¨ markdown code fences æ¥ç¼–å†™çš„\n``` jsx import React from 'react'; ``` ä»¥ä¸Šä»£ç åœ¨ Hugo ç¼–è¯‘ä¸‹çš„ Html å°†å±•ç¤ºæˆå¦‚ä¸‹å½¢å¼\n\u0026lt;div class=\u0026#34;highlight\u0026#34;\u0026gt; \u0026lt;pre style=\u0026#34;background-color:#f0f0f0;tab-size:4\u0026#34;\u0026gt; \u0026lt;code class=\u0026#34;language-jsx\u0026#34; data-lang=\u0026#34;jsx\u0026#34;\u0026gt; \u0026lt;span style=\u0026#34;color:#007020;font-weight:bold\u0026#34;\u0026gt;import\u0026lt;/span\u0026gt; React from \u0026lt;span style=\u0026#34;color:#4070a0\u0026#34;\u0026gt;\u0026#39;react\u0026#39;\u0026lt;/span\u0026gt;; \u0026lt;/code\u0026gt; \u0026lt;/pre\u0026gt; \u0026lt;/div\u0026gt; æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼š\n æœç´¢æ‰€æœ‰çªå‡ºæ˜¾ç¤ºçš„ä»£ç å—ï¼Œç‰¹åˆ«æ˜¯æ‰€æœ‰å…·æœ‰ç±» highlight çš„å…ƒç´ ï¼› å¦‚ä½•åˆ›å»ºæŒ‰é’®æ”¾åœ¨ä»£ç æ¡†ä¸­ï¼› ç»™æŒ‰é’®æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼Œç”¨äºå°†ä»£ç å—ä¸­çš„ä»£ç å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚  ä»£ç  æ£€æŸ¥å¤åˆ¶æ”¯æŒ è¿›è¡Œå¤åˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å¯¹æµè§ˆå™¨æ˜¯å¦å¯ä»¥ä½¿ç”¨ document.execCommand('copy') è¿™ä¸ªåŠŸèƒ½ï¼Œå› ä¸ºè¿™æ®µä»£ç æ­£æ˜¯æˆ‘ä»¬è¦ä½¿ç”¨çš„å¤åˆ¶è°ƒç”¨ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‘½ä»¤æ¥æ£€æŸ¥ä¸€ä¸‹\nif(!document.queryCommandSupported(\u0026#39;copy\u0026#39;)) { return; } ä½†æ˜¯ queryCommandSupported æ–¹æ³•ä¼¼ä¹å·²ç»å¼ƒç”¨ï¼Œæ‰€ä»¥å…¶å®æ˜¯ä¸ç”¨æ·»åŠ çš„ã€‚\né€‰æ‹©çªå‡ºæ˜¾ç¤ºçš„ä»£ç å— ä¸Šæ–‡æåˆ°ï¼Œçªå‡ºæ˜¾ç¤ºçš„ä»£ç å—æ˜¯åŒ…å«åœ¨ç±» highlight ä¸­çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ DOM API æ¥æ£€æŸ¥æ‰€æœ‰çš„åœ¨ highlight å†…å®¹\nvar highlightBlocks = document.getElementsByClassName(\u0026#39;highlight\u0026#39;); æ·»åŠ æŒ‰é’® ç”±äº Hugo çš„è‡ªåŠ¨ç¼–è¯‘ä½¿å¾—æˆ‘ä»¬æ— æ³•ç›´æ¥åœ¨ html ä¸­æ·»åŠ æŒ‰é’®ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸€å¼€å§‹çš„ç–‘é—®ä¹‹å¤„ã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨ js åˆ›å»ºä¸€ä¸ªç‰¹å®šçš„å‡½æ•°æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ç„¶ååœ¨ for å¾ªç¯ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°\nfunction addCopyButton(containerEl) { var copyBtn = document.createElement(\u0026#34;button\u0026#34;); copyBtn.className = \u0026#34;highlight-copy-btn\u0026#34;; copyBtn.textContent = \u0026#34;Copy\u0026#34;; containerEl.appendChild(copyBtn); } for (var i = 0; i \u0026lt; highlightBlocks.length; i++) { addCopyButton(highlightBlocks[i]); } å¤åˆ¶å“åº” ç‚¹å‡»æŒ‰é’®ï¼Œä½¿ç”¨ document.execCommand() æ–¹æ³•å°†ä»£ç å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ŒåŒæ—¶è¿˜è¦ä¿æŒä»£ç çš„æ ¼å¼ã€‚æ‰€ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥é€‰æ‹©ç»™å®šçš„ html ä¸­çš„æ‰€æœ‰æ–‡æœ¬\nfunction selectText(node) { var selection = window.getSelection(); var range = document.createRange(); range.selectNodeContents(node); selection.removeAllRanges(); selection.addRange(range); return selection; } å› ä¸ºä»£ç èŠ‚ç‚¹æ˜¯åœ¨  \u0026lt;pre\u0026gt; æ‰€ä»¥ä½¿ç”¨ .firstElementChild æ¥è·å–èŠ‚ç‚¹ï¼Œé€‰æ‹©æ–‡æœ¬åæ·»åŠ åˆ°å‰ªè´´æ¿ï¼Œç„¶ååˆ é™¤æ‰€æœ‰é€‰æ‹©\nvar codeEl = containerEl.firstElementChild; copyBtn.addEventListener(\u0026#39;click\u0026#39;, function() { var selection = selectText(codeEl); document.execCommand(\u0026#39;copy\u0026#39;); selection.removeAllRanges(); }); æ·»åŠ æ ·å¼ è¿™éƒ¨åˆ†æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œç›´æ¥æ”¾ä»£ç äº†ï¼Œä¹‹åå¯ä»¥è‡ªå·±è°ƒè¯•ä»£ç æŒ‰é’®æ ·å¼\n.highlight { position: relative; } .highlight pre { padding-right: 75px; } .highlight-copy-btn { position: absolute; top: 7px; right: 7px; border: 0; border-radius: 4px; padding: 1px; font-size: 0.7em; line-height: 1.8; color: #fff; background-color: #777; min-width: 55px; text-align: center; } .highlight-copy-btn:hover { background-color: #666; } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ä»£ç æ¡†çš„å³ä¸Šæ–¹æ·»åŠ äº†ä¸€ä¸ªç°è‰²çš„æŒ‰é’®ã€‚\nå·²å¤åˆ¶å“åº” æ‰€æœ‰åŠŸèƒ½å…¶å®éƒ½å·²ç»å®Œæˆäº†ï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œåœ¨ç‚¹å‡»æŒ‰é’®åéœ€è¦æœ‰ä¸€ä¸ªå·²å¤åˆ¶çš„å“åº”è¿”å›ã€‚\nfunction flashCopyMessage(el, msg) { el.textContent = msg; setTimeout(function() { el.textContent = \u0026#34;Copy\u0026#34;; }, 1000); } try { var selection = selectText(codeEl); document.execCommand(\u0026#39;copy\u0026#39;); selection.removeAllRanges(); flashCopyMessage(copyBtn, \u0026#39;Copied!\u0026#39;) } catch(e) { console \u0026amp;\u0026amp; console.log(e); flashCopyMessage(copyBtn, \u0026#39;Failed :\\\u0026#39;(\u0026#39;) } æ‰€æœ‰ä»£ç  copy-to-clipboard.css :\n.highlight { position: relative; } .highlight pre { padding-right: 75px; } .highlight-copy-btn { position: absolute; top: 7px; right: 7px; border: 0; border-radius: 4px; padding: 1px; font-size: 0.7em; line-height: 1.8; color: #fff; background-color: #777; min-width: 55px; text-align: center; } .highlight-copy-btn:hover { background-color: #666; } copy-to-clipboard.js :\n(function() { \u0026#39;use strict\u0026#39;; if(!document.queryCommandSupported(\u0026#39;copy\u0026#39;)) { return; } function flashCopyMessage(el, msg) { el.textContent = msg; setTimeout(function() { el.textContent = \u0026#34;Copy\u0026#34;; }, 1000); } function selectText(node) { var selection = window.getSelection(); var range = document.createRange(); range.selectNodeContents(node); selection.removeAllRanges(); selection.addRange(range); return selection; } function addCopyButton(containerEl) { var copyBtn = document.createElement(\u0026#34;button\u0026#34;); copyBtn.className = \u0026#34;highlight-copy-btn\u0026#34;; copyBtn.textContent = \u0026#34;Copy\u0026#34;; var codeEl = containerEl.firstElementChild; copyBtn.addEventListener(\u0026#39;click\u0026#39;, function() { try { var selection = selectText(codeEl); document.execCommand(\u0026#39;copy\u0026#39;); selection.removeAllRanges(); flashCopyMessage(copyBtn, \u0026#39;Copied!\u0026#39;) } catch(e) { console \u0026amp;\u0026amp; console.log(e); flashCopyMessage(copyBtn, \u0026#39;Failed :\\\u0026#39;(\u0026#39;) } }); containerEl.appendChild(copyBtn); } // Add copy button to code blocks  var highlightBlocks = document.getElementsByClassName(\u0026#39;highlight\u0026#39;); Array.prototype.forEach.call(highlightBlocks, addCopyButton); })(); å°†è¿™ä¸¤ä¸ªæ–‡ä»¶åˆ†åˆ«æ”¾åœ¨ assets/css å’Œ assets/js ä¸‹ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶ config.toml ä¸­ä¿®æ”¹è‡ªå®šä¹‰ css å’Œ jsï¼Œæˆ–è€…æ‰‹åŠ¨æ·»åŠ åˆ° head.html å¤´æ–‡ä»¶ä¸­ã€‚\ncustom_css = [\u0026#34;css/copy-to-clipboard.css\u0026#34;] custom_js = [\u0026#34;js/copy-to-clipboard.js\u0026#34;] å‚è€ƒ  https://huangzhongde.cn/post/2020-02-21-hugo-code-copy-to-clipboard/  https://www.tomspencer.dev/blog/2018/09/14/adding-click-to-copy-buttons-to-a-hugo-powered-blog/  ","permalink":"https://yibocat.github.io/posts/jzrj/jzrj_2/","summary":"\u003cp\u003eåšå®¢æ˜¯å»ºå¥½äº†ï¼Œä½†æ˜¯æ€»æ˜¯æƒ³æ·»åŠ ä¸€ä¸ªä»£ç ä¸€é”®å¤åˆ¶çš„åŠŸèƒ½ã€‚ä¸€å¼€å§‹æ˜¯æƒ³å» html æ ‡ç­¾ä¸­ç›´æ¥æ·»åŠ ä¸€ä¸ª \u003ccode\u003ebutton\u003c/code\u003e ï¼Œä½†æ˜¯å‘ç°å¥½åƒå¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚æŸ¥é˜…äº† Hugo çš„å†…ç½®åŠŸèƒ½ä¹Ÿæ²¡æœ‰å‘ç°ï¼Œå¾ˆå¹¸è¿æ‰¾åˆ°äº†ä¸€ç¯‡åšå®¢ \u003ca href=\"https://huangzhongde.cn/\"target=\"_blank\" rel=\"noopener noreferrer\"\u003eé»„å¿ å¾·çš„åšå®¢\u003c/a\u003e\nï¼Œæ­£å¥½è§£å†³äº†æˆ‘çš„éœ€æ±‚ã€‚æ‰€ä»¥ä¹Ÿè®°å½•ä¸€ä¸‹ã€‚\u003c/p\u003e","title":"[å»ºç«™æ—¥è®°] Hugoä»£ç æ‹·è´æ’ä»¶"},{"content":"æœ€è¿‘èŠ±è´¹äº†è¿‘ä¸€å‘¨æ­å»ºè‡ªå·±çš„ç½‘ç«™ï¼Œå‡†ç¡®çš„è¯´æ˜¯é™æ€ç½‘é¡µã€‚è¿™æ˜¯ç½‘ç«™çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯è¿‘ä¸€å‘¨æ¥æ­å»ºä¸ªäººåšå®¢çš„è¸©å‘æ€»ç»“ã€‚\nç½‘ç«™é‡‡ç”¨çš„æ˜¯ hugo æ¡†æ¶ï¼Œåªæ˜¯å› ä¸º hugo å·ç§°æ˜¯ \u0026ldquo;The worldâ€™s fastest framework for building websites\u0026rdquo;ï¼Œè€Œå…¶ç‰¹ç‚¹å°±åœ¨äºè½»ã€‚å› ä¸ºé™æ€ç½‘é¡µæ— éœ€åŠ è½½å¤ªå¤šæ’ä»¶ï¼ˆwordpress å¤ªé‡äº†ï¼‰ï¼Œ ä¸éœ€è¦è®¿é—®æ•°æ®åº“ï¼Œä¸éœ€è¦ç¼–å†™å¤ªå¤šçš„ç½‘ç«™åŠŸèƒ½ï¼Œå¹¶ä¸”é™æ€ç½‘é¡µä½¿ç”¨çš„æ˜¯çº¯ htmlï¼Œå¯¹äºåšå®¢ç³»ç»Ÿæ¥è¯´æ˜¯å®Œå…¨è¶³å¤Ÿäº†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æ”¾å¼ƒ wordpress çš„åŸå› ã€‚å¦å¤–ä¸€ä¸ªåŸå› æ˜¯ wordpress è™½ç„¶æ‹¥æœ‰å„ç§å„æ ·çœ¼èŠ±ç¼­ä¹±çš„æ’ä»¶ï¼Œä½†æ˜¯å…¶ç»´æŠ¤éº»çƒ¦ï¼Œä¸å…‰ wordpress æœ¬èº«éœ€è¦ç‰ˆæœ¬æ›´æ–°ï¼Œæ’ä»¶ä¹Ÿéœ€è¦æ›´æ–°ï¼Œå¹¶ä¸”æ›´æ–°èµ·æ¥å¾ˆè‰°éš¾ï¼Œå¸¸å¸¸è‡ªåŠ¨æ›´æ–°å¤±è´¥ä»è€Œè½¬ä¸ºæ‰‹å·¥æ›´æ–°ã€‚å¹¶ä¸”wordpress å¾ˆå¤šä¸»é¢˜æ’ä»¶æ˜¯æ”¶è´¹çš„ã€‚\nä½¿ç”¨ hugo æ­å»ºä¸ªäººåšå®¢ç½‘ç«™ï¼Œå…¶å®ç†è®ºä¸Šæ¥è¯´ hugo ä¸æ­¢å¯ä»¥æ­å»ºåšå®¢ï¼Œè¿˜å¯ä»¥æ­å»ºä»»ä½•é™æ€ç½‘ç«™ï¼ˆç”šè‡³æ˜¯åŠ¨æ€ç½‘ç«™ï¼Œä¸è¿‡è¿™ä¹Ÿå°±å¤±å»äº† hugo æœ¬èº«çš„æ„ä¹‰äº†ï¼‰ã€‚è€Œä¸”è¿˜æœ‰ä¸€ä¸ªæ›´ä¸»è¦çš„åŸå› ï¼šå¯ä»¥å­¦ä¹  git å’Œ Githubã€‚\nhugo æ­å»ºå¥½ä¹‹åéœ€è¦è¿›è¡Œéƒ¨ç½²ã€‚é€šå¸¸çš„åšæ³•æ˜¯æ‰˜ç®¡åˆ° Github Pagesï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨è…¾è®¯äº‘çš„é™æ€ç½‘é¡µæ‰˜ç®¡ï¼ˆé˜¿é‡Œäº‘ä¹Ÿæœ‰ç›¸åŒçš„ä¸šåŠ¡ï¼‰ï¼Œæ´»æˆ–è€… Gitee Pagesï¼Œæˆ–è€…è‡ªå»ºæœåŠ¡å™¨ç­‰ç­‰ã€‚æ‰€ä»¥æœ¬æ–‡ä»ä¸€å¼€å§‹ hugo ä¸ git çš„å®‰è£…åˆ°æœ€å CDN ç½‘é¡µåŠ é€Ÿå…¨è¿‡ç¨‹è¿›è¡Œæ€»ç»“ã€‚\nå®‰è£… Hugo å¹¶æ–°å»ºç«™ç‚¹ Mac OS ä¸‹å®‰è£… Hugo éå¸¸æ–¹ä¾¿\n$ brew install hugo æŸ¥çœ‹ç‰ˆæœ¬æ˜¯å¦å®‰è£…æ­£ç¡®\n$ hugo version hugo v0.86.1+extended darwin/amd64 BuildDate=unknown Hugo å®‰è£…å¥½ä¹‹åï¼Œå°±å¯ä»¥åˆ›å»ºç«™ç‚¹äº†\n$ hugo new site myfirsthugo Congratulations! Your new Hugo site is created in /Users/your_name_path/myfirsthugo. Just a few more steps and you\u0026#39;re ready to go: 1. Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the \u0026#34;hugo new theme \u0026lt;THEMENAME\u0026gt;\u0026#34; command. 2. Perhaps you want to add some content. You can add single files with \u0026#34;hugo new \u0026lt;SECTIONNAME\u0026gt;/\u0026lt;FILENAME\u0026gt;.\u0026lt;FORMAT\u0026gt;\u0026#34;. 3. Start the built-in live server via \u0026#34;hugo server\u0026#34;. Visit https://gohugo.io/ for quickstart guide and full documentation. è¿›å…¥ç«™ç‚¹ç›®å½•ï¼Œç„¶åæŸ¥çœ‹ç›®å½•ä¸‹åŒ…å«çš„æ–‡ä»¶\n$ cd myfirsthugo $ ls -l archetypes\tcontent\tlayouts\tthemes config.toml\tdata\tstatic è¿™é‡Œå¯ä»¥çœ‹åˆ° Hugo è‡ªåŠ¨ç”Ÿæˆäº†ä¸€å †æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¹Ÿå°±æ˜¯ Hugo ç«™ç‚¹çš„ç»“æ„ã€‚\narchetypesï¼šç«™ç‚¹è¦å‘è¡¨çš„æ–‡ç« çš„æ–‡ç« æ¨¡æ¿ï¼Œåœ¨ Hugoå®˜ç½‘ä¸Šç§°ä¸ºæ¨¡æ¿çš„ Front Matterï¼›\ncontentï¼šå‘å¸ƒçš„æ–‡ç« åœ¨è¿™ä¸ªç›®å½•ä¸‹ç”Ÿæˆï¼›\nlayoutsï¼šHugo ç«™ç‚¹çš„å¸ƒå±€ç»“æ„ï¼Œå³ html å¸ƒå±€éƒ½è¦åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ç¼–å†™ï¼›\nthemesï¼šç«™ç‚¹ä¸»é¢˜ï¼›\nconfig.tomlï¼šç«™ç‚¹é…ç½®ï¼›\ndataï¼šå­˜æ”¾ç«™ç‚¹çš„ä¸€äº›æ•°æ®æ–‡ä»¶ï¼›\nstaticï¼šé™æ€æ–‡ä»¶åˆ™ä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚\nå®‰è£… git git çš„å®‰è£…å¯ä»¥ä»å®˜æ–¹ç½‘ç«™ä¸Šç›´æ¥ä¸‹è½½å®‰è£…ï¼š Mac OS https://git-scm.com/download/mac æˆ–è€… Windows https://git-scm.com/download/win Mac OS ä¹Ÿå¯ä»¥ç›´æ¥ç»ˆç«¯è¿è¡Œ\n$ brew install git å®‰è£…å¥½ä¹‹åæŸ¥çœ‹ git ç‰ˆæœ¬\n$ git --version git version 2.32.0 (Apple Git-132) åˆå§‹åŒ– git å­˜å‚¨åº“ï¼Œå®‰è£…ä¸»é¢˜è¿›è¡Œé…ç½® Hugo å»ºç«™æœ‰ä¸¤ç§ Github æ‰˜ç®¡æ–¹å¼ï¼Œä¸€ç§å…ˆæ˜¯ç›´æ¥ git åˆå§‹åŒ–ç«™ç‚¹ç›®å½•ï¼Œåœ¨æ‰˜ç®¡éƒ¨ç½²æ—¶ç›´æ¥å°†æ•´ä¸ªç›®å½•ä¸Šä¼ è‡³ Githubï¼Œè¿™ç§æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨ç»ˆç«¯ä¸‹è½½å®‰è£…ä¸»é¢˜ï¼›ç¬¬äºŒç§æ˜¯å…ˆä» Github ä¸Šä¸‹è½½å¥½ä¸»é¢˜å¹¶å®‰è£…ï¼Œç„¶åè¿è¡Œ Hugo ç»ˆç«¯å‘½ä»¤ hugo ç”Ÿæˆ public æ–‡ä»¶å¤¹ï¼Œè¿›å…¥ public å¹¶ git åˆå§‹åŒ–ï¼Œç„¶åå°† public æ‰˜ç®¡éƒ¨ç½²åˆ° Github ä¸Šã€‚æ¨èä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œä»¥ä¸‹æ–‡ç« ä¹Ÿæ˜¯é‡‡ç”¨ç¬¬ä¸€ç§æ–¹æ³•ã€‚\nåœ¨ Hugo ç«™ç‚¹ç›®å½•ä¸‹ï¼Œè¿›è¡Œ git åˆå§‹åŒ–\nmyfirsthugo $ git init ç„¶åä¸‹è½½ä¸»é¢˜ï¼Œå¯ä»¥ä» git å‘½ä»¤ clone ä¸€ä¸ªä¸»é¢˜ï¼Œä¹Ÿå¯ä»¥ä» Github ç›´æ¥ä¸‹è½½ï¼Œå°†ä¸‹è½½å¥½çš„ä¸»é¢˜è§£å‹å¹¶æ”¾åœ¨ themes æ–‡ä»¶å¤¹ä¸­ã€‚\nmyfirsthugo $ git submodule add https://Github.com/budparr/gohugo-theme-ananke.git themes/ananke ä¸‹è½½å¥½çš„ anake ä¸»é¢˜ç›´æ¥æ”¾åœ¨äº† themes æ–‡ä»¶å¤¹ä¸­ï¼Œä½†æ˜¯ä¸»é¢˜è¿˜å¹¶ä¸èƒ½åŠ è½½ä½¿ç”¨ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¸»é¢˜é…ç½®ã€‚\nmyfirsthugo $ echo theme = \\\u0026#34;ananke\\\u0026#34; \u0026gt;\u0026gt; config.toml æˆ–è€…ç›´æ¥æ‰“å¼€ config.toml åœ¨æœ€åä¸€è¡Œæ·»åŠ ä¸€å¥ï¼š\nbaseURL = \u0026#34;http://example.org/\u0026#34; languageCode = \u0026#34;en-us\u0026#34; title = \u0026#34;My New Hugo Site\u0026#34; theme = \u0026#34;ananke\u0026#34; ç„¶åå¯ä»¥æ–°å»ºä¸€ä¸ª post æ–‡ç« \nmyfirsthugo $ hugo new posts/my-first-post.md /Users/your_name_path/myfirsthugo/content/posts/my-first-post.md created è¿™æ—¶å¯ä»¥çœ‹åˆ°åœ¨ content æ–‡ä»¶å¤¹ä¸­è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ª posts æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”ç”Ÿæˆäº† my-first-post æ–‡ç« ã€‚\nå¯åŠ¨ Hugo server\nmyfirsthugo $ hugo server -D Start building sites â€¦ hugo v0.86.1+extended darwin/amd64 BuildDate=unknown | EN -------------------+----- Pages | 10 Paginator pages | 0 Non-page files | 0 Static files | 1 Processed images | 0 Aliases | 1 Sitemaps | 1 Cleaned | 0 Built in 72 ms Watching for changes in /Users/your_name_path/myfirsthugo/{archetypes,content,data,layouts,static,themes} Watching for config changes in /Users/your_name_path/myfirsthugo/config.toml, /Users/your_name_path/myfirsthugo/themes/ananke/config.yaml Environment: \u0026#34;development\u0026#34; Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) æ­¤æ—¶åœ¨æµè§ˆå™¨ä¸Šæ‰“å¼€ http://localhost:1313/ å°±å¯ä»¥ç›´æ¥è®¿é—®äº†ã€‚\nç”Ÿæˆç«™ç‚¹å¹¶å‘å¸ƒ ä»¥ä¸Šæ­¥éª¤åªæ˜¯è¡¨ç¤ºç½‘ç«™å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼Œå¹¶ä¸æ„å‘³ç€è¿™å°±æ˜¯ Hugo è¦å‘å¸ƒçš„ç«™ç‚¹ã€‚è¿˜è¦é€šè¿‡ hugo å‘½ä»¤å‘å¸ƒç«™ç‚¹ã€‚\nmyfirsthugo $ hugo -D Start building sites â€¦ hugo v0.86.1+extended darwin/amd64 BuildDate=unknown | EN -------------------+----- Pages | 10 Paginator pages | 0 Non-page files | 0 Static files | 1 Processed images | 0 Aliases | 1 Sitemaps | 1 Cleaned | 0 Total in 102 ms æ³¨æ„ï¼šè¿™é‡Œ -D è¡¨ç¤ºä»¥è‰ç¨¿ï¼ˆdraftï¼‰å½¢å¼å‘å¸ƒç«™ç‚¹ï¼Œæ‰€æœ‰çš„è‰ç¨¿æ–‡ç« éƒ½ä¼šæ˜¾ç¤ºã€‚\nè¿™æ—¶å°±ä¼šåœ¨ç«™ç‚¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª public æ–‡ä»¶å¤¹\nmyfirsthugo $ ls archetypes\tcontent\tlayouts\tresources\tthemes config.toml\tdata\tpublic\tstatic æ‰€æœ‰è¦å‘å¸ƒçš„å†…å®¹éƒ½ä¿å­˜åœ¨ public æ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç«™ç‚¹å‘ˆç°çš„æ‰€æœ‰å†…å®¹éƒ½å·²ç»ä¿å­˜åœ¨ public ä¸­äº†ï¼Œæ­¤æ—¶å¯ä»¥å°† public æ‰˜ç®¡åˆ° Githubã€‚\n æ³¨æ„ï¼šGithub Pages å¯ä»¥ä½¿ç”¨ Github Action è‡ªåŠ¨éƒ¨ç½²å¹¶å‘å¸ƒï¼Œè¿™æ„å‘³ç€å¹¶ä¸éœ€è¦è¿è¡Œ hugo å‘½ä»¤ç”Ÿæˆ publicï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”Ÿæˆ public çš„è¿‡ç¨‹ç›´æ¥éƒ¨ç½²åœ¨ Github è‡ªåŠ¨å‘å¸ƒä¸Šã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥åˆ é™¤æ‰ public æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åœ¨æ—¥å¸¸æµè§ˆä¸­ç›´æ¥ä½¿ç”¨ hugo server -D å‘½ä»¤å°±å¯ä»¥äº†ã€‚\n æ‰˜ç®¡åˆ° Github æµè§ˆå™¨æ‰“å¼€ç½‘å€å¯ä»¥è®¿é—®ï¼Œè¯´æ˜ç½‘ç«™å·²ç»å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼Œä½†æ˜¯è¿˜éœ€è¦æ‰˜ç®¡åˆ° Github ä¸Šæ‰èƒ½è¿›è¡Œéšæ—¶è®¿é—®ã€‚\nGithub Pages æ˜¯ Github å®˜æ–¹çš„åšå®¢å‘å¸ƒç³»ç»Ÿï¼Œå…¶é¡¹ç›®åç§°éœ€è¦éµå¾ª username.github.io å½¢å¼ã€‚åœ¨ Github ä¸Šæ–°å»ºä¸€ä¸ªå­˜å‚¨åº“ï¼Œä»»ä½•é€‰é¡¹éƒ½ä¸è¦å‹¾é€‰ï¼Œæ³¨æ„ï¼šrepository name è¦å’Œ Owner åç§°ç›¸åŒã€‚å¦‚ä¸‹æ‰€ç¤º\nç‚¹å‡» create repository åˆ›å»ºå­˜å‚¨åº“ï¼Œä¼šçœ‹åˆ°è¿™æ ·çš„ç•Œé¢\nå› ä¸ºä¹‹å‰å·²ç»åˆå§‹åŒ–è¿‡ç«™ç‚¹ git åº“äº†ï¼Œæ‰€ä»¥åªè¦å°†è¿œç¨‹åº“çš„åœ°å€åŠ è¿›æ¥å°±å¯ä»¥äº†ï¼Œæ­¤æ—¶çš„ Github åº“æ˜¯ä¸€ä¸ªç©ºåº“ã€‚ä¸Šå›¾ä¸­å·²ç»å‘Šè¯‰äº†åŸºæœ¬æ­¥éª¤ï¼Œå…ˆåœ¨æœ¬åœ°ç«™ç‚¹ç›®å½•åˆ›å»ºä¸€ä¸ª README.md æ–‡ä»¶\n$ echo \u0026#34;# accoppo.github.io\u0026#34; \u0026gt;\u0026gt; README.md ç„¶ååˆ›å»º master åˆ†æ”¯å¹¶æäº¤\n$ git add . $ git commit -m \u0026#34;first commit\u0026#34; $ git branch -M master $ git remote add origin git@github.com:accoppo/accoppo.github.io.git ç„¶å push ä¸Šå»\n$ git push -u origin master -u è¡¨ç¤ºåº“ä¸ºç©ºï¼Œéœ€è¦æ•´ä½“æäº¤ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨ git push ç›´æ¥ push äº†ã€‚\næ³¨æ„ï¼šåœ¨è¿›è¡Œæäº¤æ¨é€ä¹‹å‰ï¼Œéœ€è¦å…ˆåœ¨ Github è´¦æˆ·è®¾ç½®ä¸­æ–°å¢ SSH ç§˜é’¥ã€‚\nç„¶åå›åˆ° Github åº“ä¸­ï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰å†…å®¹æ¨é€ä¸Šæ¥äº†ã€‚å¯¹äº xxx.github.io è¿™æ ·çš„é¡¹ç›®åº“åç§°ï¼ŒGithub ç›´æ¥è®¤å®šæ˜¯é‡‡ç”¨ GIthub Pages å‘å¸ƒçš„ï¼Œæ‰€ä»¥åœ¨æµè§ˆå™¨ç›´æ¥è¾“å…¥ accoppo.github.io ä¹Ÿæ˜¯å¯ä»¥æ˜¾ç¤ºå†…å®¹çš„ï¼Œåªä¸è¿‡æ˜¾ç¤ºçš„ README.md ä¸­çš„å†…å®¹ã€‚\nGithub Action è‡ªåŠ¨éƒ¨ç½²å¹¶å‘å¸ƒ Action æ˜¯ Github æä¾›çš„ä»“åº“ä¸­è‡ªåŠ¨åŒ–ã€è‡ªå®šä¹‰å’Œæ‰§è¡Œè½¯ä»¶å¼€å‘å·¥ä½œæµç¨‹ã€‚\nå®˜æ–¹ç½‘ç«™ https://docs.github.com/cn/actions Hugo + Github Action å¯ä»¥å‚è€ƒ https://gohugo.io/hosting-and-deployment/hosting-on-github/#build-hugo-with-github-action å®˜æ–¹æä¾›äº†ä¸€ä¸ª yml æ–‡ä»¶ï¼Œæ–‡ä»¶å­˜åœ¨.github/workflows/gh-pages.yml é‡Œï¼Œåœ¨é¡¹ç›®åº“ä¸­é€‰æ‹© Action å¹¶ç‚¹å‡» new workflow\nç„¶åç‚¹å‡» set up a workflow yourself\nç„¶åè¿›å…¥åˆ°å·¥ä½œæµæ–‡ä»¶è®¾ç½®ä¸­ï¼Œå°† main.yml æ›´æ”¹ä¸º gh-pages.yml ï¼Œç„¶åå°†ä¸‹é¢ä»£ç å¤åˆ¶åˆ° Edit new file ä¸­\nname:github pageson:push:branches:- master # Set a branch to deployjobs:deploy:runs-on:ubuntu-18.04steps:- uses:actions/checkout@v2with:submodules:true# Fetch Hugo themes (true OR recursive)fetch-depth:0# Fetch all history for .GitInfo and .Lastmod- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:\u0026#39;latest\u0026#39;# extended: true- name:Buildrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3with:github_token:${{ secrets.GITHUB_TOKEN }}publish_dir:./publicå¦‚ä¸‹æ‰€ç¤º\nç„¶å Start commit Commit new file ï¼Œ\nå›åˆ° Action ä¼šè§¦å‘ä¸€æ¬¡æ„å»ºå‘å¸ƒä»»åŠ¡ï¼Œç­‰å¾…å‡ åˆ†é’Ÿå·¦ä¾§åœ†åœˆå˜æˆâœ…\nä»¥ä¸Šä»»åŠ¡å®Œæˆä»¥åï¼Œå›åˆ° Code ï¼Œå¹¶æ²¡æœ‰çœ‹åˆ° public ç›®å½•ï¼Œä½†æ˜¯ä¼šå‘ç°å¤šäº†ä¸€æ¡åˆ†æ”¯ï¼Œæ–°å¢åŠ çš„è¿™æ¡åˆ†æ”¯å°±æ˜¯ Github Pages è¦å‘å¸ƒçš„å†…å®¹\nç„¶åå›åˆ° Setting çš„ Pages é€‰é¡¹é‡Œå°†å‘å¸ƒæºæ”¹æˆ gh-pages.yml\nç­‰å¾…å‡ åˆ†é’Ÿå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹äº†ã€‚\nåœ¨å‘å¸ƒçš„ç«™ç‚¹ç½‘é¡µä¸­ï¼Œå¹¶æ²¡æœ‰çœ‹åˆ°å‘å¸ƒçš„æ–‡ç« ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ–‡ç« çš„ Front Matter è®¾ç½®ä¸­å°† Draft è®¾ç½®æˆäº† trueï¼Œè¿™è¡¨ç¤ºæ–‡ç« ç°åœ¨æ˜¯è‰ç¨¿å½¢å¼ï¼Œå¹¶æ²¡æœ‰å‘å¸ƒã€‚\nè€Œä¸”å› ä¸ºè¿œç¨‹åº“ä¸­çš„å†…å®¹å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥å…ˆä»è¿œç¨‹å°†é¡¹ç›®åº“ pull ä¸‹æ¥\nmyfirsthugo $ git pull ç„¶åæŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ä¼šå‘ç°å¤šå‡ºæ¥ä¸€æ¡åˆ†æ”¯ gh-pages\n$ git branch -a * master remotes/origin/gh-pages remotes/origin/master ä¿®æ”¹å‘å¸ƒæ–‡ç« çš„ Front Matter çš„ Draft é€‰é¡¹ï¼Œå¹¶ä¸”åœ¨ config.toml ä¸­å°† baseURL ä¿®æ”¹æˆ xxx.github.io ,å† push  åˆ° Github\nbaseURL = \u0026#34;http://xxx.github.io\u0026#34; languageCode = \u0026#34;en-us\u0026#34; title = \u0026#34;My New Hugo Site\u0026#34; theme = \u0026#34;ananke\u0026#34; æœ€åå°±å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚\nåŸŸåè®¾ç½® Github Pages æ”¯æŒè®¾ç½®è‡ªå®šä¹‰åŸŸåï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º custom domain  å¯ä»¥è®¾ç½®è‡ªå®šä¹‰åŸŸå\né¦–å…ˆåœ¨ä»»æ„çš„åŸŸåæ³¨å†Œå•†é‚£é‡Œæ³¨å†Œä¸€ä¸ªåŸŸåï¼Œè…¾è®¯äº‘åŸŸåæ³¨å†Œé“¾æ¥ https://buy.cloud.tencent.com/domain ï¼Œæˆ–è€…è¿›å…¥ç½‘ç«™ https://www.dnspod.cn è¿›è¡ŒåŸŸåæ³¨å†Œï¼Œç„¶åè¿›è¡Œå¤‡æ¡ˆã€‚\nç­‰å¾…å¤‡æ¡ˆå¥½ä¹‹åè¿›å…¥ DNSPod äº‘è§£ææ§åˆ¶å° https://www.dnspod.cn ï¼Œå¯ä»¥çœ‹åˆ°åŸŸåå·²ç»æ·»åŠ åˆ°æˆ‘çš„åŸŸåä¸­ï¼Œç„¶åè¦åšçš„æ˜¯å¯¹åŸŸåæ·»åŠ è§£æï¼Œç‚¹å‡»åŸŸåï¼Œè¿›å…¥æˆ‘çš„åŸŸåç®¡ç†ï¼Œç‚¹å‡»å¿«é€Ÿæ·»åŠ è§£æ\nç„¶åå°† xxx.github.io æ·»åŠ åˆ°åŸŸåæ˜ å°„CNAME ä¸­ï¼Œç‚¹å‡»ç¡®è®¤ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆå››æ¡è®°å½•ã€‚\nå›åˆ° GIthub ç«™ç‚¹é¡¹ç›®åº“çš„ setting pages ï¼Œå°†æ–°çš„åŸŸåå¡«å…¥è‡ªå®šä¹‰åŸŸåæ¡†ä¸­\nç­‰å¾…å‡ åˆ†é’Ÿï¼Œå°±å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰åŸŸåè®¿é—®ç«™ç‚¹äº†ã€‚\nåŸŸåè‡ªåŠ¨æ›´æ–°é—®é¢˜ æ¯æ¬¡å°†ç«™ç‚¹ push åˆ° Github å¹¶è¿›è¡Œ Action è‡ªåŠ¨å‘å¸ƒæ—¶ï¼Œè‡ªå®šä¹‰åŸŸåæ€»æ˜¯ä¼šä¸¢å¤±ï¼Œå¯¼è‡´æ¯ push ä¸€æ¬¡ï¼Œå°±è¦æ‰‹åŠ¨è®¾ç½®ä¸€æ¬¡åŸŸåï¼Œå¾ˆæ˜¯éº»çƒ¦ã€‚åæ¥æŸ¥é˜…èµ„æ–™æ‰çŸ¥é“ï¼ŒGithub Action å°†é¡¹ç›®åº“ä¸»åˆ†æ”¯è¿›è¡Œè‡ªåŠ¨éƒ¨ç½²æ—¶ï¼Œæ€»æ˜¯é‡æ–°éƒ¨ç½²ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬è®¾ç½®å¥½çš„åŸŸåæ€»ä¼šåˆ·æ–°æ‰ã€‚è§£å†³åŠæ³•æ˜¯åœ¨æœ¬åœ°ç«™ç‚¹ç›®å½•çš„ static ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª CNAME æ–‡ä»¶ï¼ˆæ³¨æ„ï¼šæ²¡æœ‰åç¼€ï¼‰ï¼Œå†™å…¥è‡ªå®šä¹‰åŸŸå\nè¿™æ ·ï¼Œåœ¨æ¯æ¬¡ Action è‡ªåŠ¨å‘å¸ƒæ—¶ï¼Œstatic ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šéƒ¨ç½²åˆ°å‘å¸ƒç›®å½•ï¼ˆå³ publicç›®å½•ä¸‹ï¼‰çš„æ ¹ç›®å½•ä¸‹ï¼Œæ¯æ¬¡è¿›è¡Œ push  å°±ä¸ä¼šä¸¢å¤±è‡ªå®šä¹‰åŸŸåäº†ã€‚\nCDN é™æ€ç½‘é¡µåŠ é€Ÿ ç”±äº Github æœåŠ¡å™¨ä½äºå›½å¤–ï¼Œæ‰€ä»¥è®¿é—®åŠ è½½æ—¶é—´æ˜¯éå¸¸é•¿çš„ï¼Œè¿™åè€Œå¤±å»äº†é™æ€ç½‘é¡µçš„ç‰¹ç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ CDN å†…å®¹åˆ†å‘ç½‘ç»œå¯¹æˆ‘ä»¬çš„ç½‘ç«™è¿›è¡ŒåŠ é€Ÿï¼Œå®ç°å¿«é€Ÿè®¿é—®ã€‚\nä¸ç®¡æ˜¯è…¾è®¯äº‘è¿˜æ˜¯é˜¿é‡Œäº‘æˆ–è€…å…¶ä»– CDN æœåŠ¡å•†ï¼Œéƒ½æ˜¯ä¸€æ ·çš„æµç¨‹ã€‚æˆ‘ä»¬è¿›å…¥è…¾è®¯äº‘ CDN å†…å®¹åˆ†å‘ç½‘ç»œæ§åˆ¶å°ï¼Œè¿›å…¥åŸŸåç®¡ç†ï¼Œç„¶åæ·»åŠ åŸŸåè¿›è¡ŒåŸŸåé…ç½®\nç„¶åè¿›è¡Œæºç«™é…ç½®ï¼Œæ³¨æ„ï¼šæºç«™é…ç½®çš„å›æºåè®®å†æ²¡æœ‰è®¾ç½® SSL æ—¶é€‰æ‹© HTTPï¼Œè…¾è®¯äº‘æœ‰ä¸€å¹´çš„å…è´¹ SSL ï¼Œç­‰é…ç½®å®Œ SSL ä¿®æ”¹æºç«™åè®®å³å¯ã€‚\næäº¤ç­‰å¾…å‡ åˆ†é’Ÿåï¼Œéœ€è¦å°†ç”Ÿæˆçš„åŠ é€ŸåŸŸå CNAME è¦†ç›–åˆ° DNSPod è®°å½•ç®¡ç†çš„ @ ä¸»æœºè®°å½•ï¼Œè¿™ä¸ªæ­¥éª¤ä¸€èˆ¬è…¾è®¯äº‘ä¼šè‡ªåŠ¨æ›¿æ¢ã€‚\nç­‰å¾… CDN éƒ¨ç½²å‡ åˆ†é’Ÿåï¼Œå°±å¯ä»¥æµç•…çš„æµè§ˆè‡ªå·±çš„åšå®¢äº†ã€‚\næ³¨æ„ CDN é™æ€ç½‘é¡µåŠ é€Ÿä»¥åï¼Œè™½ç„¶ç½‘é¡µæµè§ˆé€Ÿåº¦åŠ å¿«ï¼Œä½†æ˜¯æ›´æ–°ç¼“å­˜èµ„æºæ˜¯å»¶åçš„ï¼Œè¿™æ ·é€ æˆçš„åæœæ˜¯å‘è¡¨ä¸€ç¯‡æ–‡ç« ï¼Œå´ä¸èƒ½å³æ—¶åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨çœ‹åˆ°ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨è…¾è®¯äº‘çš„ CDNæ§åˆ¶å°æ˜¯æœ‰åˆ·æ–°é¢„çƒ­åŠŸèƒ½çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç½‘ç«™çš„æºç«™æœ‰èµ„æºæ›´æ–°ã€éœ€è¦æ¸…ç†è¿è§„èµ„æºã€åŸŸåæœ‰é…ç½®å˜æ›´çš„ï¼Œä¸ºé¿å…å…¨ç½‘ç”¨æˆ·å—èŠ‚ç‚¹ç¼“å­˜å½±å“ä»è®¿é—®åˆ°æ—§çš„èµ„æºã€å—æ—§é…ç½®çš„å½±å“ï¼Œå¯æäº¤åˆ·æ–°ä»»åŠ¡ï¼Œä¿è¯å…¨ç½‘ç”¨æˆ·å¯è®¿é—®åˆ°æœ€æ–°èµ„æºæˆ–æ­£å¸¸è®¿é—®ã€‚\nè¿™é‡Œæœ‰ä¸‰ç§åˆ·æ–°é¢„çƒ­æ–¹æ³•\n URL åˆ·æ–°ï¼šè¡¨ç¤ºæŸä¸€ä¸ªç½‘é¡µä¾‹å¦‚ä¸»é¡µæœ‰ä¿¡æ¯å˜åŒ–æ—¶ï¼Œé€šå¸¸ä½¿ç”¨ URL åˆ·æ–°\nç›®å½•åˆ·æ–°ï¼šç½‘ç«™ç›®å½•ä¸‹çš„ä¿¡æ¯åˆ·æ–°ï¼Œä¾‹å¦‚åˆ—è¡¨ã€Hugo çš„ Posts ç›®å½•ç­‰\nURL é¢„çƒ­ï¼šå½“æœ‰å®‰è£…åŒ…æˆ–è€…å‡çº§åŒ…å‘å¸ƒæ—¶ï¼Œå¸¸é‡‡ç”¨ URL é¢„çƒ­\n è™½ç„¶åˆ·æ–°æš‚æ—¶è§£å†³äº†ç½‘é¡µæœ€æ–°çš„æµè§ˆï¼Œä½†æ˜¯æ¯æ¬¡æ‰‹åŠ¨åˆ·æ–°ä¾ç„¶å¾ˆéº»çƒ¦ã€‚\nå¾ˆå¹¸è¿ï¼Œè…¾è®¯äº‘çš„ CDN æ§åˆ¶å°çš„æ’ä»¶ä¸­å¿ƒä¸­æœ‰ä¸€é¡¹åŠŸèƒ½æ˜¯å®šæ—¶åˆ·æ–°é¢„çƒ­\næˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€å®šçš„æ—¶é—´æˆ–è€…æ—¶é—´é—´éš”è¿›è¡Œè‡ªåŠ¨åˆ·æ–°ï¼Œé¿å…äº†æ¯æ¬¡æ‰‹åŠ¨åˆ·æ–°çš„éº»çƒ¦ã€‚\næ€»ç»“ä¸å…¶ä»–  æ·»åŠ ç½‘é¡µåå°ç»Ÿè®¡åˆ†æï¼Œå½“å‰çš„æµå½¢çš„ç»Ÿè®¡å¹³å°åŒ…æ‹¬ç™¾åº¦ç»Ÿè®¡ã€å‹ç›Ÿ+ã€è…¾è®¯ç»Ÿè®¡ç­‰ç­‰ï¼Œéƒ½æ˜¯å¾ˆä¸é”™çš„ã€‚ é€šè¿‡å­¦ä¹  Hugo çš„ç»“æ„ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç° Hugo æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé€šè¿‡å¸ƒå±€åµŒå¥—ï¼ŒHugo æœ€åéƒ¨ç½²ä¼šå°†æ‰€æœ‰çš„åµŒå¥—ç»“æ„åˆå¹¶æˆä¸€ä¸ªç½‘ç«™ï¼Œè¿™ä»ç†è®ºä¸Šæ¥è¯´ Hugo å¯ä»¥æ­å»ºä»»ä½•çš„ç½‘ç«™æˆ–è€…æ˜¯ç³»ç»Ÿã€‚ æœ‰æ—¶é—´æœ‰æœºä¼šäº†å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªä¸»é¢˜ã€‚  å‚è€ƒ  https://zhuanlan.zhihu.com/p/350977057  https://gohugo.io/documentation/  https://docs.github.com/cn  https://docs.github.com/cn/pages  ","permalink":"https://yibocat.github.io/posts/jzrj/jzri_1/","summary":"\u003cp\u003eæœ€è¿‘èŠ±è´¹äº†è¿‘ä¸€å‘¨æ­å»ºè‡ªå·±çš„ç½‘ç«™ï¼Œå‡†ç¡®çš„è¯´æ˜¯é™æ€ç½‘é¡µã€‚è¿™æ˜¯ç½‘ç«™çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯è¿‘ä¸€å‘¨æ¥æ­å»ºä¸ªäººåšå®¢çš„è¸©å‘æ€»ç»“ã€‚\u003c/p\u003e","title":"[å»ºç«™æ—¥è®°] Hugo+Github+Tencent CDNåšå®¢æ­å»º"},{"content":"CDN åˆ·æ–°åˆ—è¡¨ CDN å·¥ä½œå°ï¼šhttps://console.cloud.tencent.com/cdn/refresh URLåˆ·æ–° https://yibocat.com/ https://yibocat.com/posts https://yibocat.com/archives https://yibocat.com/categories https://yibocat.com/search ç›®å½•åˆ·æ–° https://yibocat.com/ https://yibocat.com/posts/ https://yibocat.com/archives/ https://yibocat.com/categories/ https://yibocat.com/search/ ","permalink":"https://yibocat.github.io/posts/cdn-%E5%88%B7%E6%96%B0%E5%88%97%E8%A1%A8/","summary":"\u003ch3 id=\"cdn-åˆ·æ–°åˆ—è¡¨\"\u003eCDN åˆ·æ–°åˆ—è¡¨\u003c/h3\u003e\n\u003cp\u003eCDN å·¥ä½œå°ï¼š\u003ca href=\"https://console.cloud.tencent.com/cdn/refresh\"target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://console.cloud.tencent.com/cdn/refresh\u003c/a\u003e\n\u003c/p\u003e","title":"CDN åˆ·æ–°åˆ—è¡¨"},{"content":"Written in Go, Hugo is an open source static site generator available under the Apache Licence 2.0. Hugo supports TOML, YAML and JSON data file types, Markdown and HTML content files and uses shortcodes to add rich content. Other notable features are taxonomies, multilingual mode, image processing, custom output formats, HTML/CSS/JS minification and support for Sass SCSS workflows.\nHugo makes use of a variety of open source projects including:\n https://github.com/yuin/goldmark  https://github.com/alecthomas/chroma  https://github.com/muesli/smartcrop  https://github.com/spf13/cobra  https://github.com/spf13/viper   Hugo is ideal for blogs, corporate websites, creative portfolios, online magazines, single page applications or even a website with thousands of pages.\nHugo is for people who want to hand code their own website without worrying about setting up complicated runtimes, dependencies and databases.\nWebsites built with Hugo are extremelly fast, secure and can be deployed anywhere including, AWS, GitHub Pages, Heroku, Netlify and any other hosting provider.\nLearn more and contribute on GitHub .\n","permalink":"https://yibocat.github.io/about/","summary":"Written in Go, Hugo is an open source static site generator available under the Apache Licence 2.0. Hugo supports TOML, YAML and JSON data file types, Markdown and HTML content files and uses shortcodes to add rich content. Other notable features are taxonomies, multilingual mode, image processing, custom output formats, HTML/CSS/JS minification and support for Sass SCSS workflows.\nHugo makes use of a variety of open source projects including:\n https://github.","title":"About"}]