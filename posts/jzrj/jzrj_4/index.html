<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.102.3"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><link rel=bookmark type=image/x-icon href=images/yibo_1.jpeg><link rel=icon type=image/x-icon href=images/yibo_1.jpeg><link rel="shortcut icon" type=image/x-icon href=images/yibo_1.jpeg><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?e5030d0d5c8f146cc58d0a4fe660754f",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><title>[建站日记] Hugo 添加文章日期热力图&nbsp;&ndash;&nbsp;Yibocat</title><link rel=stylesheet href=/css/core.min.0a0307d00613a4a7364263921bc1fbafe7f3eff5f15937907925d4c6a18e9130a5c9d54ad7b4631345308f0335629fed.css integrity=sha384-CgMH0AYTpKc2QmOSG8H7r+fz7/XxWTeQeSXUxqGOkTClydVK17RjE0UwjwM1Yp/t><meta name=twitter:card content="summary"><meta name=twitter:title content="[建站日记] Hugo 添加文章日期热力图"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">Yibocat</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/posts/>文章 </a><a class="nav item" href=/archives/>归档 </a><a class="nav item" href=/categories/>分类 </a><a class="nav item" href=/tags/>标签 </a><a class="nav item" href=/search/>搜索 </a><a class="nav item" href></a></nav></div></span></div><div class="site slogan"><span id=type></span></div><script src=https://cdn.jsdelivr.net/npm/typed.js@2.0.12></script>
<script>var typed=new Typed("#type",{strings:["Minecraft","Basketball","Code and code","Grand Theft Auto V","Photography","Back to campus","","<strong>Python<strong>","<strong>C++<strong>","<strong><i>Swift<i><strong>","Java","<strong>Machine Learning<strong>","don't like <strong>algorithm<strong>","","一个不会编程的研究僧"],typeSpeed:60,backSpeed:60,backDelay:1250,smartBackspace:!0,loop:!0})</script></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">[建站日记] Hugo 添加文章日期热力图</h1><p class="article date">2022-02-25
<span class=wordcount>&nbsp;•&nbsp;共&nbsp;1706&nbsp;个字</span><span class=reading-time> • 预计阅读时间 4 分钟</span></p></section><aside id=toc-container class="toc-container wide"><div class=toc><h3>文章目录</h3><div class=inner><ul><li><a href=#%e8%8e%b7%e5%8f%96 aria-label=获取>获取</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e6%96%87%e7%ab%a0%e6%95%b0%e6%8d%ae aria-label=配置文章数据>配置文章数据</a></li><li><a href=#%e7%94%9f%e6%88%90%e6%96%87%e7%ab%a0%e6%95%b0%e6%8d%ae aria-label=生成文章数据>生成文章数据</a></li><li><a href=#%e8%ae%be%e7%bd%ae%e6%97%a5%e6%9c%9f%e6%97%b6%e9%97%b4 aria-label=设置日期时间>设置日期时间</a></li><li><a href=#%e5%9b%be%e8%a1%a8%e9%85%8d%e7%bd%ae aria-label=图表配置>图表配置</a></li><li><a href=#%e4%bc%98%e5%8c%96 aria-label=优化>优化</a></li><li><a href=#%e6%9a%97%e6%a8%a1%e5%bc%8f aria-label=暗模式>暗模式</a></li><li><a href=#%e6%80%bb%e7%bb%93 aria-label=总结>总结</a></li></ul></div></div></aside><article class="article markdown-body"><div><p>每次看到 Github 上的代码贡献图时，总想自己搞一个。但是直接搞似乎很麻烦，于是上网一搜，嘿，有两个开源图表库正好满足我的需求，果断开搞。</p><p>这两个图图表库如下：</p><p>蚂蚁数据可视化 AntV <a href=https://antv-2018.alipay.com/zh-cn/index.html target=_blank rel="noopener noreferrer">https://antv-2018.alipay.com/zh-cn/index.html</a></p><p>Apache ECharts <a href=https://echarts.apache.org/zh/index.html target=_blank rel="noopener noreferrer">https://echarts.apache.org/zh/index.html</a></p><p>这两个都是非常好的图表库，而我使用的 ECharts（只是因为第一个找到的是 ECharts）。不过有一些功能还是没能实现，有机会尝试用 AntV 再实现一下。</p><p>改造后最后的效果图如下</p><p style=text-align:center><img src=/images/jzrj/jzrj-20220225-01.png style=width:80%></p></br><h3 id=获取>获取</h3><p>ECharts 官方给的安装方式有三种： Github 获取、npm 安装和 CDN 获取，官方建议使用 npm 安装，这里直接使用 CDN 获取：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>而下载网址是在 <a href=https://www.jsdelivr.com/package/npm/echarts target=_blank rel="noopener noreferrer">https://www.jsdelivr.com/package/npm/echarts</a>
。</p><p>npm 下载如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>npm install echarts --save
</span></span></code></pre></div><p>另外，官网还提供在线构建，具体可以前往 <a href=https://echarts.apache.org/zh/builder.html target=_blank rel="noopener noreferrer">https://echarts.apache.org/zh/builder.html</a>
。</p></br><h3 id=配置文章数据>配置文章数据</h3><p>首先配置生成热力图的模块</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;heatmap&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>然后编写 javascript 脚本。</p><p>初始化图标并绑定到热力图模块，并设定图表响应容器的大小变化</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>myChart</span> <span class=o>=</span> <span class=nx>echarts</span><span class=p>.</span><span class=nx>init</span><span class=p>(</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;heatmap&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>onresize</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>myChart</span><span class=p>.</span><span class=nx>resize</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div></br><h3 id=生成文章数据>生成文章数据</h3><p>生成热力图的 option 结构在 <a href=https://echarts.apache.org/zh/option.html#calendar target=_blank rel="noopener noreferrer">https://echarts.apache.org/zh/option.html#calendar</a>
。这里我们主要要解决的是两个问题：</p><blockquote><p>1.如何将日历的日期设置为去年今日到今日日期区间</p><p>2.将文章的日期和字数传入 ECharts</p></blockquote><p>日历时间在 <code>series</code> 的 <code>data</code> 中设置，支持 <code>data([day,number])</code> 的列表形式，我们的目的则是将所有发布的文章的数字作统计，然后传入列表 <code>data</code> 中。</p><p>好消息是 Hugo 支持在 <code>html</code> 中写入代码，随后 Hugo 会自动对其进行编码。接着上面代码</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>range</span><span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>RegularPages</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=nx>data</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span> <span class=p>.</span><span class=nx>PublishDate</span><span class=p>.</span><span class=nx>Format</span> <span class=s2>&#34;2006-01-02&#34;</span> <span class=p>}},</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span> <span class=p>.</span><span class=nx>WordCount</span> <span class=p>}},</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=nx>end</span> <span class=o>-</span><span class=p>}}</span>
</span></span></code></pre></div><p>这里我们将所有发布文章的数据保存在了 <code>data</code> 中（注意：该段代码需要写在 html 中，若单独编写 js 文件，最后并不会奏效，因为 Hugo 并不会去编译 js 文件）。</p></br><h3 id=设置日期时间>设置日期时间</h3><p>官方给出的日期设置时间非常简单，从当前一年的一月一日开始，随机生成 365 个数据。而 javascript 中有一段代码可以获取当前时间和当前时间前推任意时间</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>sdtime2</span><span class=o>=</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>setHours</span><span class=p>(</span><span class=nx>sdtime1</span><span class=p>.</span><span class=nx>getHours</span><span class=p>()</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span><span class=c1>//小时
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>sdtime3</span><span class=o>=</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>setDate</span><span class=p>((</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getDate</span><span class=p>()</span><span class=o>-</span><span class=mi>7</span><span class=p>))</span><span class=c1>//7天
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>sdtime4</span><span class=o>=</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>setMonth</span><span class=p>((</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getMonth</span><span class=p>()</span><span class=o>-</span><span class=mi>1</span><span class=p>))</span><span class=c1>//一个月
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>sdtime5</span><span class=o>=</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>setFullYear</span><span class=p>((</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getFullYear</span><span class=p>()</span><span class=o>-</span><span class=mi>1</span><span class=p>))</span><span class=c1>//一年
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=nx>sdtime2</span><span class=p>).</span><span class=nx>Format</span><span class=p>(</span><span class=s2>&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span class=p>));</span>
</span></span></code></pre></div><p>我们可以下一个函数，生成当前时间推至前若干个月的日历区间</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=nx>months</span><span class=p>){</span>             <span class=c1>// 计算转换日期
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>startDate</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>mill</span> <span class=o>=</span> <span class=nx>startDate</span><span class=p>.</span><span class=nx>setMonth</span><span class=p>((</span><span class=nx>startDate</span><span class=p>.</span><span class=nx>getMonth</span><span class=p>()</span> <span class=o>-</span> <span class=nx>months</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>endDate</span> <span class=o>=</span> <span class=o>+</span><span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>startDate</span> <span class=o>=</span> <span class=o>+</span><span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=nx>mill</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>endDate</span> <span class=o>=</span> <span class=nx>echarts</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>formatTime</span><span class=p>(</span><span class=s1>&#39;yyyy-MM-dd&#39;</span><span class=p>,</span> <span class=nx>endDate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>startDate</span> <span class=o>=</span> <span class=nx>echarts</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>formatTime</span><span class=p>(</span><span class=s1>&#39;yyyy-MM-dd&#39;</span><span class=p>,</span> <span class=nx>startDate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>showmonth</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=nx>showmonth</span><span class=p>.</span><span class=nx>push</span><span class=p>([</span>
</span></span><span class=line><span class=cl>        <span class=nx>startDate</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>endDate</span>
</span></span><span class=line><span class=cl>    <span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>showmonth</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>该函数返回一个 <code>[startDate,endDate]</code> 数据，表示日历的开始日期和结束日期。</p></br><h3 id=图表配置>图表配置</h3><p>上文已经提到过，日历的配置在 <a href=https://echarts.apache.org/zh/option.html#calendar target=_blank rel="noopener noreferrer">https://echarts.apache.org/zh/option.html#calendar</a>
有非常详细的说明，我们可以直接使用官网样例给出的配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>option</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>title</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>top</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>left</span><span class=o>:</span> <span class=s1>&#39;center&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>text</span><span class=o>:</span> <span class=s1>&#39;数数敲了几个字？&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>tooltip</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nx>visualMap</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>min</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>max</span><span class=o>:</span> <span class=mi>5000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;piecewise&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>orient</span><span class=o>:</span> <span class=s1>&#39;horizontal&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>left</span><span class=o>:</span> <span class=s1>&#39;center&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>top</span><span class=o>:</span> <span class=mi>65</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>calendar</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>top</span><span class=o>:</span> <span class=mi>120</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>left</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>right</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>cellSize</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;auto&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=nx>range</span><span class=o>:</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=mi>12</span><span class=p>),</span>				<span class=c1>// 设置转换的日历日期区间
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>itemStyle</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>borderWidth</span><span class=o>:</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>yearLabel</span><span class=o>:</span> <span class=p>{</span> <span class=nx>show</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>series</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;heatmap&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>coordinateSystem</span><span class=o>:</span> <span class=s1>&#39;calendar&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>data</span><span class=o>:</span> <span class=nx>data</span>								<span class=c1>// 加载文章数据
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>myChart</span><span class=p>.</span><span class=nx>setOption</span><span class=p>(</span><span class=nx>option</span><span class=p>);</span>
</span></span></code></pre></div><p>大功告成！日历贡献图就完成了！所有代码 <a href=https://shared.snipper.app/snippet/D67FD48F-2089-4A13-9A2B-37E6B48D3F06 target=_blank rel="noopener noreferrer">https://shared.snipper.app/snippet/D67FD48F-2089-4A13-9A2B-37E6B48D3F06</a>
或者下面的未设置 hugo 获取文章数据的代码，转而使用随机数据</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;ttt&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;
</span></span></span><span class=line><span class=cl><span class=s>  width: 600px;
</span></span></span><span class=line><span class=cl><span class=s>  height: 300px;
</span></span></span><span class=line><span class=cl><span class=s>  margin-top: 15px;
</span></span></span><span class=line><span class=cl><span class=s>  margin-bottom: 10px;
</span></span></span><span class=line><span class=cl><span class=s>  padding: 2px;
</span></span></span><span class=line><span class=cl><span class=s>  border: 1px solid;
</span></span></span><span class=line><span class=cl><span class=s>  border-radius: 10px;
</span></span></span><span class=line><span class=cl><span class=s>  border-width: 0.5px;
</span></span></span><span class=line><span class=cl><span class=s>  text-align: center;&#34;</span>
</span></span><span class=line><span class=cl><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>chartDom</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;ttt&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>myChart</span> <span class=o>=</span> <span class=nx>echarts</span><span class=p>.</span><span class=nx>init</span><span class=p>(</span><span class=nx>chartDom</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>option</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 计算日期并转换格式
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>startDate</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>year_Mill</span> <span class=o>=</span> <span class=nx>startDate</span><span class=p>.</span><span class=nx>setFullYear</span><span class=p>((</span><span class=nx>startDate</span><span class=p>.</span><span class=nx>getFullYear</span><span class=p>()</span> <span class=o>-</span> <span class=mi>1</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>startDate</span> <span class=o>=</span> <span class=o>+</span><span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=nx>year_Mill</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>endDate</span> <span class=o>=</span> <span class=o>+</span><span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>dayTime</span> <span class=o>=</span> <span class=mi>3600</span> <span class=o>*</span> <span class=mi>24</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>time</span> <span class=o>=</span> <span class=nx>startDate</span><span class=p>;</span> <span class=nx>time</span> <span class=o>&lt;</span> <span class=nx>endDate</span><span class=p>;</span> <span class=nx>time</span> <span class=o>+=</span> <span class=nx>dayTime</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>data</span><span class=p>.</span><span class=nx>push</span><span class=p>([</span>
</span></span><span class=line><span class=cl>          <span class=nx>echarts</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>formatTime</span><span class=p>(</span><span class=s1>&#39;yyyy-MM-dd&#39;</span><span class=p>,</span><span class=nx>time</span><span class=p>),</span>
</span></span><span class=line><span class=cl>          <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>10000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>startDate</span> <span class=o>=</span> <span class=nx>echarts</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>formatTime</span><span class=p>(</span><span class=s1>&#39;yyyy-MM-dd&#39;</span><span class=p>,</span> <span class=nx>startDate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>endDate</span> <span class=o>=</span> <span class=nx>echarts</span><span class=p>.</span><span class=nx>format</span><span class=p>.</span><span class=nx>formatTime</span><span class=p>(</span><span class=s1>&#39;yyyy-MM-dd&#39;</span><span class=p>,</span> <span class=nx>endDate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rangeArr</span> <span class=o>=</span> <span class=p>[</span><span class=nx>startDate</span><span class=p>,</span><span class=nx>endDate</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>option</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>top</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>left</span><span class=o>:</span> <span class=s1>&#39;center&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s1>&#39;Daily Step Count&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>tooltip</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=nx>visualMap</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>min</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>max</span><span class=o>:</span> <span class=mi>10000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;piecewise&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>orient</span><span class=o>:</span> <span class=s1>&#39;horizontal&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>left</span><span class=o>:</span> <span class=s1>&#39;center&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>top</span><span class=o>:</span> <span class=mi>65</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>calendar</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>top</span><span class=o>:</span> <span class=mi>120</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>left</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>right</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>cellSize</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;auto&#39;</span><span class=p>,</span> <span class=mi>13</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nx>range</span><span class=o>:</span> <span class=nx>rangeArr</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>itemStyle</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>borderWidth</span><span class=o>:</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>yearLabel</span><span class=o>:</span> <span class=p>{</span> <span class=nx>show</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>series</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;heatmap&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>coordinateSystem</span><span class=o>:</span> <span class=s1>&#39;calendar&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=nx>data</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>option</span> <span class=o>&amp;&amp;</span> <span class=nx>myChart</span><span class=p>.</span><span class=nx>setOption</span><span class=p>(</span><span class=nx>option</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div></br><p>但是，但是！等等&mldr;这样配置的热力图似乎并不完美，在不同屏幕宽度下的展示效果会非常差，所以要设置一下适配屏幕宽度的热力图。</p></br><h3 id=优化>优化</h3><p>我们分别设置在不同屏幕宽度下要显示的日期区间，将如下代码放至 <code>heatmap_width</code> 函数下面，<code>option</code> 上面(javascript 并不是特别拿手，只能使用最笨的方法了😥)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(max-width: 320px)&#39;</span><span class=p>).</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rangeArr</span> <span class=o>=</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(max-width: 400px)&#39;</span><span class=p>).</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rangeArr</span> <span class=o>=</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(max-width: 550px)&#39;</span><span class=p>).</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rangeArr</span> <span class=o>=</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=mi>6</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(max-width: 1021px)&#39;</span><span class=p>).</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rangeArr</span> <span class=o>=</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=mi>12</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(max-width: 1400px)&#39;</span><span class=p>).</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rangeArr</span> <span class=o>=</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=mi>9</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(max-width: 1920px)&#39;</span><span class=p>).</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rangeArr</span> <span class=o>=</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=mi>12</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(max-width: 2560px)&#39;</span><span class=p>).</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rangeArr</span> <span class=o>=</span> <span class=nx>heatmap_width</span><span class=p>(</span><span class=mi>24</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></br><h3 id=暗模式>暗模式</h3><p>该图表其实本身自带暗模式，但是为了和本网站相匹配，所以决定自己动手实现暗模式。</p><p>为此我分别写了两个函数</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>LightOption</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>DarkOption</span><span class=p>()</span>
</span></span></code></pre></div><p>将 <code>option</code> 配置分别放入两个函数中，再单独进行颜色配置</p><p>然后使用 <code>(window.matchMedia('(prefers-color-scheme: dark)').matches)</code> 获取当前系统的暗模式方法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(prefers-color-scheme: dark)&#39;</span><span class=p>).</span><span class=nx>matches</span><span class=p>){</span>          <span class=c1>// 暗模式
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>DarkOption</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>{</span>                                                                   <span class=c1>// 亮模式
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>LightOption</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></br><p><strong>加入屏幕监听功能</strong></p><p>当我们切换明暗模式时，以上代码对于网站并不会直接生效，需要刷新一遍才可以生效。所以加入监听功能使得网站一旦切换明暗模式则理科生效</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>listeners</span><span class=o>=</span><span class=p>{</span>                                                         <span class=c1>// 模式监听
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>dark</span><span class=o>:</span><span class=p>(</span><span class=nx>mediaQueryList</span> <span class=p>)=&gt;{</span>                                           <span class=c1>// 暗模式
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span><span class=p>(</span><span class=nx>mediaQueryList</span><span class=p>.</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=nx>DarkOption</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>light</span><span class=o>:</span><span class=p>(</span><span class=nx>mediaQueryList</span><span class=p>)=&gt;{</span>                                           <span class=c1>// 亮模式
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span><span class=p>(</span><span class=nx>mediaQueryList</span><span class=p>.</span><span class=nx>matches</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=nx>LightOption</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(prefers-color-scheme: dark)&#39;</span><span class=p>).</span><span class=nx>addListener</span><span class=p>(</span><span class=nx>listeners</span><span class=p>.</span><span class=nx>dark</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s1>&#39;(prefers-color-scheme: light)&#39;</span><span class=p>).</span><span class=nx>addListener</span><span class=p>(</span><span class=nx>listeners</span><span class=p>.</span><span class=nx>light</span><span class=p>)</span>
</span></span></code></pre></div></br><p>至此，总算完成了。</p></br><h3 id=总结>总结</h3><p>ECharts 功能很强大，但是却并不能生成如同 Github 代码贡献图的样子，对于每一天的小方块不能设置更好的样式。不知道 AntV 行不行。总之，以后有时间再研究研究。</p></div></article><section class="article labels"><a class=category href=/categories/%E5%BB%BA%E7%AB%99%E6%97%A5%E8%AE%B0/>建站日记</a><a class=tag href=/tags/%E7%83%AD%E5%8A%9B%E5%9B%BE/>热力图</a><a class=tag href=/tags/javascript/>javascript</a><a class=tag href=/tags/echarts/>ECharts</a><a class=tag href=/tags/antv/>AntV</a><a class=tag href=/tags/github/>Github</a></section><section class="article license">版权声明：如果转发请带上本文链接和注明来源。</section><section class="article author"><script src=/js/lottie-player.js></script>
<lottie-player class=avatar src=/json/77907-vault.json background=transparent speed=1 style=max-width:280px; loop autoplay></lottie-player><p class=name>yibocat</p><div class=bio>脑子不够键盘来凑</div><div class=details><a class=item href=https://github.com/yibocat target=_blank rel="noopener noreferrer"><span class="iconfont icon-github"></span>&nbsp;yibocat</a><a class=item href=mailto:yibocat@yeah.net target=_blank rel="noopener noreferrer"><span class="iconfont icon-mail"></span>&nbsp;yibocat@yeah.net</a></div></section></div><div class="article bottom"><div class="article bottom title">更多文章</div><section class="article navigation"><p><a class=link href=/posts/notes/note_1/><span class="iconfont icon-article"></span>[笔记手册] Latex 数学符号表</a></p><p><a class=link href=/posts/jzrj/jzrj_3/><span class="iconfont icon-article"></span>[建站日记] 动态打字特效</a></p></section><div class=nav-bottom><div class="nav wrap bottom"><nav class=nav><a class="nav item" href=/posts/>文章 </a><a class="nav item" href=/archives/>归档 </a><a class="nav item" href=/categories/>分类 </a><a class="nav item" href=/tags/>标签 </a><a class="nav item" href=/search/>搜索</a></nav></div></div></div></section><section id=footer><div class=tongji style=text-align:center><span>共 14 篇文章 • 总计 22908 字</span></div><div class=footer-wrap><p class=copyright>©2022 Yibocat.</p><p class=powerby><span>Powered&nbsp;by&nbsp;</span><a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a>
<span>&nbsp;Accelerate with Tencent Cloud CDN.</span>
<a href='https://ipv6-test.com/validate.php?url=referer'><img src=https://ipv6-test.com/button-ipv6-80x15.png alt='ipv6 ready' title='ipv6 ready' border=0></a></p></div></section><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script src=/js/core.min.5c7b67437ff4e36acca5d4f8fd7094276f09573657d699a765d6ad6b40a7c4e00993c7f07cb6637e726ae7c3f77fc968.js integrity=sha384-XHtnQ3/042rMpdT4/XCUJ28JVzZX1pmnZdata0CnxOAJk8fwfLZjfnJq58P3f8lo></script>
<script src=https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js></script>
<script type=text/javascript>var myChart=echarts.init(document.getElementById("heatmap")),option,data,rangeArr,listeners;window.onresize=function(){myChart.resize()};function heatmap_width(e){var t=new Date,o=t.setMonth(t.getMonth()-e),n=+new Date,t=+new Date(o),n=echarts.format.formatTime("yyyy-MM-dd",n),t=echarts.format.formatTime("yyyy-MM-dd",t),s=[];return s.push([t,n]),s}data=[],data.push(["2022-03-10",1102]),data.push(["2022-02-25",1706]),data.push(["2022-02-19",1133]),data.push(["2022-02-17",1469]),data.push(["2022-02-15",2774]),data.push(["2022-02-14",3494]),data.push(["2022-02-14",2006]),data.push(["2022-02-08",2576]),data.push(["2022-02-08",456]),data.push(["2022-02-02",588]),data.push(["2022-02-01",387]),data.push(["2022-01-30",1028]),data.push(["2022-01-29",3966]),data.push(["2022-01-28",74]),data.push(["2019-05-28",0]),data.push(["2019-02-28",149]),data.push(["0001-01-01",0]),window.matchMedia("(max-width: 320px)").matches?(rangeArr=heatmap_width(3)):window.matchMedia("(max-width: 400px)").matches?(rangeArr=heatmap_width(5)):window.matchMedia("(max-width: 550px)").matches?(rangeArr=heatmap_width(6)):window.matchMedia("(max-width: 1021px)").matches?(rangeArr=heatmap_width(12)):window.matchMedia("(max-width: 1400px)").matches?(rangeArr=heatmap_width(9)):window.matchMedia("(max-width: 1920px)").matches?(rangeArr=heatmap_width(12)):window.matchMedia("(max-width: 2560px)").matches&&(rangeArr=heatmap_width(24));function LightOption(){option={title:{show:!0,top:0,left:20,text:"文章热力图",textStyle:{color:"rgba(29,43,76,.85)",fontSize:10}},tooltip:{padding:10,backgroundColor:"#777",borderColor:"#777",borderWidth:1,formatter:function(e){var t=e.value;return'<div style="font-size: 14px;color: white;">'+t[0]+": "+t[1]+"</div>"}},visualMap:{show:!1,top:0,min:0,max:5e3,textStyle:{color:"#7bc96f",fontWeight:"bold",fontFamily:"monospace"},calculable:!0,inRange:{symbol:"rect",color:["#ccffcc","#82c979","#43923c","#125b15","#002800"]},itemWidth:12,itemHeight:200,orient:"horizontal",right:0},calendar:{top:45,left:30,right:30,cellSize:[12,12],orient:"horizontal",range:rangeArr,splitLine:{show:!1,lineStyle:{width:.5,type:"solid",color:"white"}},itemStyle:{borderWidth:3.4,borderType:"solid",shadowColor:"#f3f6f9",shadowBlur:1.2,borderColor:"#f3f6f9",color:"#dddddd",opacity:1},yearLabel:{show:!0,position:"top",fontWeight:"normal",fontSize:12,color:"#24292e"},monthLabel:{nameMap:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fontWeight:"bolder",color:"#24292e",fontSize:8},dayLabel:{formatter:"{start}  1st",fontWeight:"bolder",nameMap:["","Mon","","Wed","","Fri",""],color:"#24292e",fontSize:8}},series:{type:"heatmap",coordinateSystem:"calendar",data}},option&&myChart.setOption(option)}function DarkOption(){option={title:{show:!0,top:0,left:20,text:"文章热力图",textStyle:{color:"#c7d5f6",fontSize:10}},tooltip:{padding:10,backgroundColor:"#777",borderColor:"#777",borderWidth:1,formatter:function(e){var t=e.value;return'<div style="font-size: 14px;color: white;">'+t[0]+": "+t[1]+"</div>"}},visualMap:{show:!1,top:0,min:0,max:5e3,textStyle:{color:"#c7d5f6",fontWeight:"bold",fontFamily:"monospace"},calculable:!0,inRange:{symbol:"rect",color:["#ccffcc","#82c979","#43923c","#125b15","#002800"],opacity:.8},itemWidth:12,itemHeight:200,orient:"horizontal",right:0},calendar:{top:45,left:30,right:30,cellSize:[12,12],orient:"horizontal",range:rangeArr,splitLine:{show:!1,lineStyle:{width:.5,type:"solid",color:"white"}},itemStyle:{borderWidth:3.4,borderType:"solid",shadowColor:"#0d1117",shadowBlur:1.2,borderColor:"#0d1117",color:"#24292e",opacity:1},yearLabel:{show:!0,position:"top",fontWeight:"normal",fontSize:12,color:"#c7d5f6"},monthLabel:{nameMap:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fontWeight:"bolder",color:"#c7d5f6",fontSize:8},dayLabel:{formatter:"{start}  1st",fontWeight:"bolder",nameMap:["","Mon","","Wed","","Fri",""],color:"#c7d5f6",fontSize:8}},series:{type:"heatmap",coordinateSystem:"calendar",data}},option&&myChart.setOption(option)}window.matchMedia("(prefers-color-scheme: dark)").matches?DarkOption():LightOption(),listeners={dark:e=>{e.matches&&DarkOption()},light:e=>{e.matches&&LightOption()}},window.matchMedia("(prefers-color-scheme: dark)").addListener(listeners.dark),window.matchMedia("(prefers-color-scheme: light)").addListener(listeners.light)</script></body></html>